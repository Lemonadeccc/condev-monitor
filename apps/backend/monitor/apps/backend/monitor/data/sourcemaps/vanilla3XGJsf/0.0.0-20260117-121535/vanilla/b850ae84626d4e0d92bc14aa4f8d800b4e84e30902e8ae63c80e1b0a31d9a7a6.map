{"version":3,"file":"index-DCtJRgXP.js","sources":["../../../../node_modules/.pnpm/rrweb@2.0.0-alpha.4/node_modules/rrweb/es/rrweb/packages/rrweb-snapshot/es/rrweb-snapshot.js","../../../../node_modules/.pnpm/rrweb@2.0.0-alpha.4/node_modules/rrweb/es/rrweb/packages/rrweb/src/utils.js","../../../../node_modules/.pnpm/rrweb@2.0.0-alpha.4/node_modules/rrweb/es/rrweb/packages/types/dist/types.js","../../../../node_modules/.pnpm/rrweb@2.0.0-alpha.4/node_modules/rrweb/es/rrweb/packages/rrweb/src/record/mutation.js","../../../../node_modules/.pnpm/rrweb@2.0.0-alpha.4/node_modules/rrweb/es/rrweb/packages/rrweb/src/record/observer.js","../../../../node_modules/.pnpm/rrweb@2.0.0-alpha.4/node_modules/rrweb/es/rrweb/packages/rrweb/src/record/cross-origin-iframe-mirror.js","../../../../node_modules/.pnpm/rrweb@2.0.0-alpha.4/node_modules/rrweb/es/rrweb/packages/rrweb/src/record/iframe-manager.js","../../../../node_modules/.pnpm/rrweb@2.0.0-alpha.4/node_modules/rrweb/es/rrweb/packages/rrweb/src/record/shadow-dom-manager.js","../../../../node_modules/.pnpm/rrweb@2.0.0-alpha.4/node_modules/rrweb/es/rrweb/ext/tslib/tslib.es6.js","../../../../node_modules/.pnpm/rrweb@2.0.0-alpha.4/node_modules/rrweb/es/rrweb/ext/base64-arraybuffer/dist/base64-arraybuffer.es5.js","../../../../node_modules/.pnpm/rrweb@2.0.0-alpha.4/node_modules/rrweb/es/rrweb/packages/rrweb/src/record/observers/canvas/serialize-args.js","../../../../node_modules/.pnpm/rrweb@2.0.0-alpha.4/node_modules/rrweb/es/rrweb/packages/rrweb/src/record/observers/canvas/2d.js","../../../../node_modules/.pnpm/rrweb@2.0.0-alpha.4/node_modules/rrweb/es/rrweb/packages/rrweb/src/record/observers/canvas/canvas.js","../../../../node_modules/.pnpm/rrweb@2.0.0-alpha.4/node_modules/rrweb/es/rrweb/packages/rrweb/src/record/observers/canvas/webgl.js","../../../../node_modules/.pnpm/rrweb@2.0.0-alpha.4/node_modules/rrweb/es/rrweb/_virtual/_rollup-plugin-web-worker-loader__helper__node__WorkerClass.js","../../../../node_modules/.pnpm/rrweb@2.0.0-alpha.4/node_modules/rrweb/es/rrweb/_virtual/_rollup-plugin-web-worker-loader__helper__node__createBase64WorkerFactory.js","../../../../node_modules/.pnpm/rrweb@2.0.0-alpha.4/node_modules/rrweb/es/rrweb/_virtual/_rollup-plugin-web-worker-loader__helper__browser__createBase64WorkerFactory.js","../../../../node_modules/.pnpm/rrweb@2.0.0-alpha.4/node_modules/rrweb/es/rrweb/_virtual/_rollup-plugin-web-worker-loader__helper__auto__isNodeJS.js","../../../../node_modules/.pnpm/rrweb@2.0.0-alpha.4/node_modules/rrweb/es/rrweb/_virtual/_rollup-plugin-web-worker-loader__helper__auto__createBase64WorkerFactory.js","../../../../node_modules/.pnpm/rrweb@2.0.0-alpha.4/node_modules/rrweb/es/rrweb/_virtual/image-bitmap-data-url-worker.js","../../../../node_modules/.pnpm/rrweb@2.0.0-alpha.4/node_modules/rrweb/es/rrweb/packages/rrweb/src/record/observers/canvas/canvas-manager.js","../../../../node_modules/.pnpm/rrweb@2.0.0-alpha.4/node_modules/rrweb/es/rrweb/packages/rrweb/src/record/stylesheet-manager.js","../../../../node_modules/.pnpm/rrweb@2.0.0-alpha.4/node_modules/rrweb/es/rrweb/packages/rrweb/src/record/index.js","../../../../packages/browser/build/esm/chunk-PIWADR7D.mjs","../../../../packages/browser-utils/build/esm/chunk-ASE4CFBL.mjs","../../../../packages/browser-utils/build/esm/chunk-XOEXM75D.mjs","../../../../packages/browser-utils/build/esm/chunk-JKQBMT52.mjs","../../../../packages/browser-utils/build/esm/chunk-GHMYG4WD.mjs","../../../../packages/browser-utils/build/esm/chunk-GQCNY4BU.mjs","../../../../packages/browser-utils/build/esm/chunk-KWQIWTLW.mjs","../../../../packages/browser-utils/build/esm/chunk-JGRV4XZF.mjs","../../../../packages/browser-utils/build/esm/chunk-JVISIACI.mjs","../../../../packages/browser-utils/build/esm/chunk-7HQPBJGL.mjs","../../../../packages/browser-utils/build/esm/chunk-XYO6SENQ.mjs","../../../../packages/browser-utils/build/esm/chunk-OXFI2VSH.mjs","../../../../packages/browser-utils/build/esm/chunk-YCQ4E4LR.mjs","../../../../packages/browser-utils/build/esm/chunk-SC6CGYC4.mjs","../../../../packages/browser-utils/build/esm/chunk-YXQGTOBI.mjs","../../../../packages/browser-utils/build/esm/chunk-5R5MTCJL.mjs","../../../../packages/browser-utils/build/esm/chunk-2VNXWO72.mjs","../../../../packages/browser-utils/build/esm/chunk-5EDMF7CO.mjs","../../../../packages/browser-utils/build/esm/chunk-QB4OYEKQ.mjs","../../../../packages/browser-utils/build/esm/chunk-OPSLPDZU.mjs","../../../../packages/browser-utils/build/esm/chunk-PXUW2JF7.mjs","../../../../packages/browser-utils/build/esm/chunk-HEZ3VS73.mjs","../../../../packages/browser-utils/build/esm/index.mjs","../../../../packages/browser/build/esm/chunk-VZRKOJJ7.mjs","../../../../packages/browser/build/esm/chunk-K5NW3E3Y.mjs","../../../../packages/browser/build/esm/chunk-6IDWWMXA.mjs","../../../../packages/browser/build/esm/chunk-OFSDVTR3.mjs","../../../../packages/core/build/esm/chunk-YPGWPUPD.mjs","../../../../packages/core/build/esm/chunk-A46LLZ3Y.mjs","../../../../packages/browser/build/esm/index.mjs","../../../../../../../../../vite.svg","../../src/counter.ts","../../src/typescript.svg","../../src/main.ts"],"sourcesContent":["var NodeType;\r\n(function (NodeType) {\r\n    NodeType[NodeType[\"Document\"] = 0] = \"Document\";\r\n    NodeType[NodeType[\"DocumentType\"] = 1] = \"DocumentType\";\r\n    NodeType[NodeType[\"Element\"] = 2] = \"Element\";\r\n    NodeType[NodeType[\"Text\"] = 3] = \"Text\";\r\n    NodeType[NodeType[\"CDATA\"] = 4] = \"CDATA\";\r\n    NodeType[NodeType[\"Comment\"] = 5] = \"Comment\";\r\n})(NodeType || (NodeType = {}));\n\nfunction isElement(n) {\r\n    return n.nodeType === n.ELEMENT_NODE;\r\n}\r\nfunction isShadowRoot(n) {\r\n    var host = n === null || n === void 0 ? void 0 : n.host;\r\n    return Boolean((host === null || host === void 0 ? void 0 : host.shadowRoot) === n);\r\n}\r\nfunction isNativeShadowDom(shadowRoot) {\r\n    return Object.prototype.toString.call(shadowRoot) === '[object ShadowRoot]';\r\n}\r\nfunction fixBrowserCompatibilityIssuesInCSS(cssText) {\r\n    if (cssText.includes(' background-clip: text;') &&\r\n        !cssText.includes(' -webkit-background-clip: text;')) {\r\n        cssText = cssText.replace(' background-clip: text;', ' -webkit-background-clip: text; background-clip: text;');\r\n    }\r\n    return cssText;\r\n}\r\nfunction getCssRulesString(s) {\r\n    try {\r\n        var rules = s.rules || s.cssRules;\r\n        return rules\r\n            ? fixBrowserCompatibilityIssuesInCSS(Array.from(rules).map(getCssRuleString).join(''))\r\n            : null;\r\n    }\r\n    catch (error) {\r\n        return null;\r\n    }\r\n}\r\nfunction getCssRuleString(rule) {\r\n    var cssStringified = rule.cssText;\r\n    if (isCSSImportRule(rule)) {\r\n        try {\r\n            cssStringified = getCssRulesString(rule.styleSheet) || cssStringified;\r\n        }\r\n        catch (_a) {\r\n        }\r\n    }\r\n    return cssStringified;\r\n}\r\nfunction isCSSImportRule(rule) {\r\n    return 'styleSheet' in rule;\r\n}\r\nvar Mirror = (function () {\r\n    function Mirror() {\r\n        this.idNodeMap = new Map();\r\n        this.nodeMetaMap = new WeakMap();\r\n    }\r\n    Mirror.prototype.getId = function (n) {\r\n        var _a;\r\n        if (!n)\r\n            return -1;\r\n        var id = (_a = this.getMeta(n)) === null || _a === void 0 ? void 0 : _a.id;\r\n        return id !== null && id !== void 0 ? id : -1;\r\n    };\r\n    Mirror.prototype.getNode = function (id) {\r\n        return this.idNodeMap.get(id) || null;\r\n    };\r\n    Mirror.prototype.getIds = function () {\r\n        return Array.from(this.idNodeMap.keys());\r\n    };\r\n    Mirror.prototype.getMeta = function (n) {\r\n        return this.nodeMetaMap.get(n) || null;\r\n    };\r\n    Mirror.prototype.removeNodeFromMap = function (n) {\r\n        var _this = this;\r\n        var id = this.getId(n);\r\n        this.idNodeMap[\"delete\"](id);\r\n        if (n.childNodes) {\r\n            n.childNodes.forEach(function (childNode) {\r\n                return _this.removeNodeFromMap(childNode);\r\n            });\r\n        }\r\n    };\r\n    Mirror.prototype.has = function (id) {\r\n        return this.idNodeMap.has(id);\r\n    };\r\n    Mirror.prototype.hasNode = function (node) {\r\n        return this.nodeMetaMap.has(node);\r\n    };\r\n    Mirror.prototype.add = function (n, meta) {\r\n        var id = meta.id;\r\n        this.idNodeMap.set(id, n);\r\n        this.nodeMetaMap.set(n, meta);\r\n    };\r\n    Mirror.prototype.replace = function (id, n) {\r\n        var oldNode = this.getNode(id);\r\n        if (oldNode) {\r\n            var meta = this.nodeMetaMap.get(oldNode);\r\n            if (meta)\r\n                this.nodeMetaMap.set(n, meta);\r\n        }\r\n        this.idNodeMap.set(id, n);\r\n    };\r\n    Mirror.prototype.reset = function () {\r\n        this.idNodeMap = new Map();\r\n        this.nodeMetaMap = new WeakMap();\r\n    };\r\n    return Mirror;\r\n}());\r\nfunction createMirror() {\r\n    return new Mirror();\r\n}\r\nfunction maskInputValue(_a) {\r\n    var maskInputOptions = _a.maskInputOptions, tagName = _a.tagName, type = _a.type, value = _a.value, maskInputFn = _a.maskInputFn;\r\n    var text = value || '';\r\n    if (maskInputOptions[tagName.toLowerCase()] ||\r\n        maskInputOptions[type]) {\r\n        if (maskInputFn) {\r\n            text = maskInputFn(text);\r\n        }\r\n        else {\r\n            text = '*'.repeat(text.length);\r\n        }\r\n    }\r\n    return text;\r\n}\r\nvar ORIGINAL_ATTRIBUTE_NAME = '__rrweb_original__';\r\nfunction is2DCanvasBlank(canvas) {\r\n    var ctx = canvas.getContext('2d');\r\n    if (!ctx)\r\n        return true;\r\n    var chunkSize = 50;\r\n    for (var x = 0; x < canvas.width; x += chunkSize) {\r\n        for (var y = 0; y < canvas.height; y += chunkSize) {\r\n            var getImageData = ctx.getImageData;\r\n            var originalGetImageData = ORIGINAL_ATTRIBUTE_NAME in getImageData\r\n                ? getImageData[ORIGINAL_ATTRIBUTE_NAME]\r\n                : getImageData;\r\n            var pixelBuffer = new Uint32Array(originalGetImageData.call(ctx, x, y, Math.min(chunkSize, canvas.width - x), Math.min(chunkSize, canvas.height - y)).data.buffer);\r\n            if (pixelBuffer.some(function (pixel) { return pixel !== 0; }))\r\n                return false;\r\n        }\r\n    }\r\n    return true;\r\n}\n\nvar _id = 1;\r\nvar tagNameRegex = new RegExp('[^a-z0-9-_:]');\r\nvar IGNORED_NODE = -2;\r\nfunction genId() {\r\n    return _id++;\r\n}\r\nfunction getValidTagName(element) {\r\n    if (element instanceof HTMLFormElement) {\r\n        return 'form';\r\n    }\r\n    var processedTagName = element.tagName.toLowerCase().trim();\r\n    if (tagNameRegex.test(processedTagName)) {\r\n        return 'div';\r\n    }\r\n    return processedTagName;\r\n}\r\nfunction stringifyStyleSheet(sheet) {\r\n    return sheet.cssRules\r\n        ? Array.from(sheet.cssRules)\r\n            .map(function (rule) { return rule.cssText || ''; })\r\n            .join('')\r\n        : '';\r\n}\r\nfunction extractOrigin(url) {\r\n    var origin = '';\r\n    if (url.indexOf('//') > -1) {\r\n        origin = url.split('/').slice(0, 3).join('/');\r\n    }\r\n    else {\r\n        origin = url.split('/')[0];\r\n    }\r\n    origin = origin.split('?')[0];\r\n    return origin;\r\n}\r\nvar canvasService;\r\nvar canvasCtx;\r\nvar URL_IN_CSS_REF = /url\\((?:(')([^']*)'|(\")(.*?)\"|([^)]*))\\)/gm;\r\nvar RELATIVE_PATH = /^(?!www\\.|(?:http|ftp)s?:\\/\\/|[A-Za-z]:\\\\|\\/\\/|#).*/;\r\nvar DATA_URI = /^(data:)([^,]*),(.*)/i;\r\nfunction absoluteToStylesheet(cssText, href) {\r\n    return (cssText || '').replace(URL_IN_CSS_REF, function (origin, quote1, path1, quote2, path2, path3) {\r\n        var filePath = path1 || path2 || path3;\r\n        var maybeQuote = quote1 || quote2 || '';\r\n        if (!filePath) {\r\n            return origin;\r\n        }\r\n        if (!RELATIVE_PATH.test(filePath)) {\r\n            return \"url(\".concat(maybeQuote).concat(filePath).concat(maybeQuote, \")\");\r\n        }\r\n        if (DATA_URI.test(filePath)) {\r\n            return \"url(\".concat(maybeQuote).concat(filePath).concat(maybeQuote, \")\");\r\n        }\r\n        if (filePath[0] === '/') {\r\n            return \"url(\".concat(maybeQuote).concat(extractOrigin(href) + filePath).concat(maybeQuote, \")\");\r\n        }\r\n        var stack = href.split('/');\r\n        var parts = filePath.split('/');\r\n        stack.pop();\r\n        for (var _i = 0, parts_1 = parts; _i < parts_1.length; _i++) {\r\n            var part = parts_1[_i];\r\n            if (part === '.') {\r\n                continue;\r\n            }\r\n            else if (part === '..') {\r\n                stack.pop();\r\n            }\r\n            else {\r\n                stack.push(part);\r\n            }\r\n        }\r\n        return \"url(\".concat(maybeQuote).concat(stack.join('/')).concat(maybeQuote, \")\");\r\n    });\r\n}\r\nvar SRCSET_NOT_SPACES = /^[^ \\t\\n\\r\\u000c]+/;\r\nvar SRCSET_COMMAS_OR_SPACES = /^[, \\t\\n\\r\\u000c]+/;\r\nfunction getAbsoluteSrcsetString(doc, attributeValue) {\r\n    if (attributeValue.trim() === '') {\r\n        return attributeValue;\r\n    }\r\n    var pos = 0;\r\n    function collectCharacters(regEx) {\r\n        var chars;\r\n        var match = regEx.exec(attributeValue.substring(pos));\r\n        if (match) {\r\n            chars = match[0];\r\n            pos += chars.length;\r\n            return chars;\r\n        }\r\n        return '';\r\n    }\r\n    var output = [];\r\n    while (true) {\r\n        collectCharacters(SRCSET_COMMAS_OR_SPACES);\r\n        if (pos >= attributeValue.length) {\r\n            break;\r\n        }\r\n        var url = collectCharacters(SRCSET_NOT_SPACES);\r\n        if (url.slice(-1) === ',') {\r\n            url = absoluteToDoc(doc, url.substring(0, url.length - 1));\r\n            output.push(url);\r\n        }\r\n        else {\r\n            var descriptorsStr = '';\r\n            url = absoluteToDoc(doc, url);\r\n            var inParens = false;\r\n            while (true) {\r\n                var c = attributeValue.charAt(pos);\r\n                if (c === '') {\r\n                    output.push((url + descriptorsStr).trim());\r\n                    break;\r\n                }\r\n                else if (!inParens) {\r\n                    if (c === ',') {\r\n                        pos += 1;\r\n                        output.push((url + descriptorsStr).trim());\r\n                        break;\r\n                    }\r\n                    else if (c === '(') {\r\n                        inParens = true;\r\n                    }\r\n                }\r\n                else {\r\n                    if (c === ')') {\r\n                        inParens = false;\r\n                    }\r\n                }\r\n                descriptorsStr += c;\r\n                pos += 1;\r\n            }\r\n        }\r\n    }\r\n    return output.join(', ');\r\n}\r\nfunction absoluteToDoc(doc, attributeValue) {\r\n    if (!attributeValue || attributeValue.trim() === '') {\r\n        return attributeValue;\r\n    }\r\n    var a = doc.createElement('a');\r\n    a.href = attributeValue;\r\n    return a.href;\r\n}\r\nfunction isSVGElement(el) {\r\n    return Boolean(el.tagName === 'svg' || el.ownerSVGElement);\r\n}\r\nfunction getHref() {\r\n    var a = document.createElement('a');\r\n    a.href = '';\r\n    return a.href;\r\n}\r\nfunction transformAttribute(doc, tagName, name, value) {\r\n    if (name === 'src' ||\r\n        (name === 'href' && value && !(tagName === 'use' && value[0] === '#'))) {\r\n        return absoluteToDoc(doc, value);\r\n    }\r\n    else if (name === 'xlink:href' && value && value[0] !== '#') {\r\n        return absoluteToDoc(doc, value);\r\n    }\r\n    else if (name === 'background' &&\r\n        value &&\r\n        (tagName === 'table' || tagName === 'td' || tagName === 'th')) {\r\n        return absoluteToDoc(doc, value);\r\n    }\r\n    else if (name === 'srcset' && value) {\r\n        return getAbsoluteSrcsetString(doc, value);\r\n    }\r\n    else if (name === 'style' && value) {\r\n        return absoluteToStylesheet(value, getHref());\r\n    }\r\n    else if (tagName === 'object' && name === 'data' && value) {\r\n        return absoluteToDoc(doc, value);\r\n    }\r\n    else {\r\n        return value;\r\n    }\r\n}\r\nfunction _isBlockedElement(element, blockClass, blockSelector) {\r\n    if (typeof blockClass === 'string') {\r\n        if (element.classList.contains(blockClass)) {\r\n            return true;\r\n        }\r\n    }\r\n    else {\r\n        for (var eIndex = element.classList.length; eIndex--;) {\r\n            var className = element.classList[eIndex];\r\n            if (blockClass.test(className)) {\r\n                return true;\r\n            }\r\n        }\r\n    }\r\n    if (blockSelector) {\r\n        return element.matches(blockSelector);\r\n    }\r\n    return false;\r\n}\r\nfunction classMatchesRegex(node, regex, checkAncestors) {\r\n    if (!node)\r\n        return false;\r\n    if (node.nodeType !== node.ELEMENT_NODE) {\r\n        if (!checkAncestors)\r\n            return false;\r\n        return classMatchesRegex(node.parentNode, regex, checkAncestors);\r\n    }\r\n    for (var eIndex = node.classList.length; eIndex--;) {\r\n        var className = node.classList[eIndex];\r\n        if (regex.test(className)) {\r\n            return true;\r\n        }\r\n    }\r\n    if (!checkAncestors)\r\n        return false;\r\n    return classMatchesRegex(node.parentNode, regex, checkAncestors);\r\n}\r\nfunction needMaskingText(node, maskTextClass, maskTextSelector) {\r\n    var el = node.nodeType === node.ELEMENT_NODE\r\n        ? node\r\n        : node.parentElement;\r\n    if (el === null)\r\n        return false;\r\n    if (typeof maskTextClass === 'string') {\r\n        if (el.classList.contains(maskTextClass))\r\n            return true;\r\n        if (el.closest(\".\".concat(maskTextClass)))\r\n            return true;\r\n    }\r\n    else {\r\n        if (classMatchesRegex(el, maskTextClass, true))\r\n            return true;\r\n    }\r\n    if (maskTextSelector) {\r\n        if (el.matches(maskTextSelector))\r\n            return true;\r\n        if (el.closest(maskTextSelector))\r\n            return true;\r\n    }\r\n    return false;\r\n}\r\nfunction onceIframeLoaded(iframeEl, listener, iframeLoadTimeout) {\r\n    var win = iframeEl.contentWindow;\r\n    if (!win) {\r\n        return;\r\n    }\r\n    var fired = false;\r\n    var readyState;\r\n    try {\r\n        readyState = win.document.readyState;\r\n    }\r\n    catch (error) {\r\n        return;\r\n    }\r\n    if (readyState !== 'complete') {\r\n        var timer_1 = setTimeout(function () {\r\n            if (!fired) {\r\n                listener();\r\n                fired = true;\r\n            }\r\n        }, iframeLoadTimeout);\r\n        iframeEl.addEventListener('load', function () {\r\n            clearTimeout(timer_1);\r\n            fired = true;\r\n            listener();\r\n        });\r\n        return;\r\n    }\r\n    var blankUrl = 'about:blank';\r\n    if (win.location.href !== blankUrl ||\r\n        iframeEl.src === blankUrl ||\r\n        iframeEl.src === '') {\r\n        setTimeout(listener, 0);\r\n        return iframeEl.addEventListener('load', listener);\r\n    }\r\n    iframeEl.addEventListener('load', listener);\r\n}\r\nfunction onceStylesheetLoaded(link, listener, styleSheetLoadTimeout) {\r\n    var fired = false;\r\n    var styleSheetLoaded;\r\n    try {\r\n        styleSheetLoaded = link.sheet;\r\n    }\r\n    catch (error) {\r\n        return;\r\n    }\r\n    if (styleSheetLoaded)\r\n        return;\r\n    var timer = setTimeout(function () {\r\n        if (!fired) {\r\n            listener();\r\n            fired = true;\r\n        }\r\n    }, styleSheetLoadTimeout);\r\n    link.addEventListener('load', function () {\r\n        clearTimeout(timer);\r\n        fired = true;\r\n        listener();\r\n    });\r\n}\r\nfunction serializeNode(n, options) {\r\n    var doc = options.doc, mirror = options.mirror, blockClass = options.blockClass, blockSelector = options.blockSelector, maskTextClass = options.maskTextClass, maskTextSelector = options.maskTextSelector, inlineStylesheet = options.inlineStylesheet, _a = options.maskInputOptions, maskInputOptions = _a === void 0 ? {} : _a, maskTextFn = options.maskTextFn, maskInputFn = options.maskInputFn, _b = options.dataURLOptions, dataURLOptions = _b === void 0 ? {} : _b, inlineImages = options.inlineImages, recordCanvas = options.recordCanvas, keepIframeSrcFn = options.keepIframeSrcFn, _c = options.newlyAddedElement, newlyAddedElement = _c === void 0 ? false : _c;\r\n    var rootId = getRootId(doc, mirror);\r\n    switch (n.nodeType) {\r\n        case n.DOCUMENT_NODE:\r\n            if (n.compatMode !== 'CSS1Compat') {\r\n                return {\r\n                    type: NodeType.Document,\r\n                    childNodes: [],\r\n                    compatMode: n.compatMode\r\n                };\r\n            }\r\n            else {\r\n                return {\r\n                    type: NodeType.Document,\r\n                    childNodes: []\r\n                };\r\n            }\r\n        case n.DOCUMENT_TYPE_NODE:\r\n            return {\r\n                type: NodeType.DocumentType,\r\n                name: n.name,\r\n                publicId: n.publicId,\r\n                systemId: n.systemId,\r\n                rootId: rootId\r\n            };\r\n        case n.ELEMENT_NODE:\r\n            return serializeElementNode(n, {\r\n                doc: doc,\r\n                blockClass: blockClass,\r\n                blockSelector: blockSelector,\r\n                inlineStylesheet: inlineStylesheet,\r\n                maskInputOptions: maskInputOptions,\r\n                maskInputFn: maskInputFn,\r\n                dataURLOptions: dataURLOptions,\r\n                inlineImages: inlineImages,\r\n                recordCanvas: recordCanvas,\r\n                keepIframeSrcFn: keepIframeSrcFn,\r\n                newlyAddedElement: newlyAddedElement,\r\n                rootId: rootId\r\n            });\r\n        case n.TEXT_NODE:\r\n            return serializeTextNode(n, {\r\n                maskTextClass: maskTextClass,\r\n                maskTextSelector: maskTextSelector,\r\n                maskTextFn: maskTextFn,\r\n                rootId: rootId\r\n            });\r\n        case n.CDATA_SECTION_NODE:\r\n            return {\r\n                type: NodeType.CDATA,\r\n                textContent: '',\r\n                rootId: rootId\r\n            };\r\n        case n.COMMENT_NODE:\r\n            return {\r\n                type: NodeType.Comment,\r\n                textContent: n.textContent || '',\r\n                rootId: rootId\r\n            };\r\n        default:\r\n            return false;\r\n    }\r\n}\r\nfunction getRootId(doc, mirror) {\r\n    if (!mirror.hasNode(doc))\r\n        return undefined;\r\n    var docId = mirror.getId(doc);\r\n    return docId === 1 ? undefined : docId;\r\n}\r\nfunction serializeTextNode(n, options) {\r\n    var _a;\r\n    var maskTextClass = options.maskTextClass, maskTextSelector = options.maskTextSelector, maskTextFn = options.maskTextFn, rootId = options.rootId;\r\n    var parentTagName = n.parentNode && n.parentNode.tagName;\r\n    var textContent = n.textContent;\r\n    var isStyle = parentTagName === 'STYLE' ? true : undefined;\r\n    var isScript = parentTagName === 'SCRIPT' ? true : undefined;\r\n    if (isStyle && textContent) {\r\n        try {\r\n            if (n.nextSibling || n.previousSibling) {\r\n            }\r\n            else if ((_a = n.parentNode.sheet) === null || _a === void 0 ? void 0 : _a.cssRules) {\r\n                textContent = stringifyStyleSheet(n.parentNode.sheet);\r\n            }\r\n        }\r\n        catch (err) {\r\n            console.warn(\"Cannot get CSS styles from text's parentNode. Error: \".concat(err), n);\r\n        }\r\n        textContent = absoluteToStylesheet(textContent, getHref());\r\n    }\r\n    if (isScript) {\r\n        textContent = 'SCRIPT_PLACEHOLDER';\r\n    }\r\n    if (!isStyle &&\r\n        !isScript &&\r\n        textContent &&\r\n        needMaskingText(n, maskTextClass, maskTextSelector)) {\r\n        textContent = maskTextFn\r\n            ? maskTextFn(textContent)\r\n            : textContent.replace(/[\\S]/g, '*');\r\n    }\r\n    return {\r\n        type: NodeType.Text,\r\n        textContent: textContent || '',\r\n        isStyle: isStyle,\r\n        rootId: rootId\r\n    };\r\n}\r\nfunction serializeElementNode(n, options) {\r\n    var doc = options.doc, blockClass = options.blockClass, blockSelector = options.blockSelector, inlineStylesheet = options.inlineStylesheet, _a = options.maskInputOptions, maskInputOptions = _a === void 0 ? {} : _a, maskInputFn = options.maskInputFn, _b = options.dataURLOptions, dataURLOptions = _b === void 0 ? {} : _b, inlineImages = options.inlineImages, recordCanvas = options.recordCanvas, keepIframeSrcFn = options.keepIframeSrcFn, _c = options.newlyAddedElement, newlyAddedElement = _c === void 0 ? false : _c, rootId = options.rootId;\r\n    var needBlock = _isBlockedElement(n, blockClass, blockSelector);\r\n    var tagName = getValidTagName(n);\r\n    var attributes = {};\r\n    var len = n.attributes.length;\r\n    for (var i = 0; i < len; i++) {\r\n        var attr = n.attributes[i];\r\n        attributes[attr.name] = transformAttribute(doc, tagName, attr.name, attr.value);\r\n    }\r\n    if (tagName === 'link' && inlineStylesheet) {\r\n        var stylesheet = Array.from(doc.styleSheets).find(function (s) {\r\n            return s.href === n.href;\r\n        });\r\n        var cssText = null;\r\n        if (stylesheet) {\r\n            cssText = getCssRulesString(stylesheet);\r\n        }\r\n        if (cssText) {\r\n            delete attributes.rel;\r\n            delete attributes.href;\r\n            attributes._cssText = absoluteToStylesheet(cssText, stylesheet.href);\r\n        }\r\n    }\r\n    if (tagName === 'style' &&\r\n        n.sheet &&\r\n        !(n.innerText || n.textContent || '').trim().length) {\r\n        var cssText = getCssRulesString(n.sheet);\r\n        if (cssText) {\r\n            attributes._cssText = absoluteToStylesheet(cssText, getHref());\r\n        }\r\n    }\r\n    if (tagName === 'input' || tagName === 'textarea' || tagName === 'select') {\r\n        var value = n.value;\r\n        var checked = n.checked;\r\n        if (attributes.type !== 'radio' &&\r\n            attributes.type !== 'checkbox' &&\r\n            attributes.type !== 'submit' &&\r\n            attributes.type !== 'button' &&\r\n            value) {\r\n            attributes.value = maskInputValue({\r\n                type: attributes.type,\r\n                tagName: tagName,\r\n                value: value,\r\n                maskInputOptions: maskInputOptions,\r\n                maskInputFn: maskInputFn\r\n            });\r\n        }\r\n        else if (checked) {\r\n            attributes.checked = checked;\r\n        }\r\n    }\r\n    if (tagName === 'option') {\r\n        if (n.selected && !maskInputOptions['select']) {\r\n            attributes.selected = true;\r\n        }\r\n        else {\r\n            delete attributes.selected;\r\n        }\r\n    }\r\n    if (tagName === 'canvas' && recordCanvas) {\r\n        if (n.__context === '2d') {\r\n            if (!is2DCanvasBlank(n)) {\r\n                attributes.rr_dataURL = n.toDataURL(dataURLOptions.type, dataURLOptions.quality);\r\n            }\r\n        }\r\n        else if (!('__context' in n)) {\r\n            var canvasDataURL = n.toDataURL(dataURLOptions.type, dataURLOptions.quality);\r\n            var blankCanvas = document.createElement('canvas');\r\n            blankCanvas.width = n.width;\r\n            blankCanvas.height = n.height;\r\n            var blankCanvasDataURL = blankCanvas.toDataURL(dataURLOptions.type, dataURLOptions.quality);\r\n            if (canvasDataURL !== blankCanvasDataURL) {\r\n                attributes.rr_dataURL = canvasDataURL;\r\n            }\r\n        }\r\n    }\r\n    if (tagName === 'img' && inlineImages) {\r\n        if (!canvasService) {\r\n            canvasService = doc.createElement('canvas');\r\n            canvasCtx = canvasService.getContext('2d');\r\n        }\r\n        var image_1 = n;\r\n        var oldValue_1 = image_1.crossOrigin;\r\n        image_1.crossOrigin = 'anonymous';\r\n        var recordInlineImage = function () {\r\n            try {\r\n                canvasService.width = image_1.naturalWidth;\r\n                canvasService.height = image_1.naturalHeight;\r\n                canvasCtx.drawImage(image_1, 0, 0);\r\n                attributes.rr_dataURL = canvasService.toDataURL(dataURLOptions.type, dataURLOptions.quality);\r\n            }\r\n            catch (err) {\r\n                console.warn(\"Cannot inline img src=\".concat(image_1.currentSrc, \"! Error: \").concat(err));\r\n            }\r\n            oldValue_1\r\n                ? (attributes.crossOrigin = oldValue_1)\r\n                : image_1.removeAttribute('crossorigin');\r\n        };\r\n        if (image_1.complete && image_1.naturalWidth !== 0)\r\n            recordInlineImage();\r\n        else\r\n            image_1.onload = recordInlineImage;\r\n    }\r\n    if (tagName === 'audio' || tagName === 'video') {\r\n        attributes.rr_mediaState = n.paused\r\n            ? 'paused'\r\n            : 'played';\r\n        attributes.rr_mediaCurrentTime = n.currentTime;\r\n    }\r\n    if (!newlyAddedElement) {\r\n        if (n.scrollLeft) {\r\n            attributes.rr_scrollLeft = n.scrollLeft;\r\n        }\r\n        if (n.scrollTop) {\r\n            attributes.rr_scrollTop = n.scrollTop;\r\n        }\r\n    }\r\n    if (needBlock) {\r\n        var _d = n.getBoundingClientRect(), width = _d.width, height = _d.height;\r\n        attributes = {\r\n            \"class\": attributes[\"class\"],\r\n            rr_width: \"\".concat(width, \"px\"),\r\n            rr_height: \"\".concat(height, \"px\")\r\n        };\r\n    }\r\n    if (tagName === 'iframe' && !keepIframeSrcFn(attributes.src)) {\r\n        if (!n.contentDocument) {\r\n            attributes.rr_src = attributes.src;\r\n        }\r\n        delete attributes.src;\r\n    }\r\n    return {\r\n        type: NodeType.Element,\r\n        tagName: tagName,\r\n        attributes: attributes,\r\n        childNodes: [],\r\n        isSVG: isSVGElement(n) || undefined,\r\n        needBlock: needBlock,\r\n        rootId: rootId\r\n    };\r\n}\r\nfunction lowerIfExists(maybeAttr) {\r\n    if (maybeAttr === undefined) {\r\n        return '';\r\n    }\r\n    else {\r\n        return maybeAttr.toLowerCase();\r\n    }\r\n}\r\nfunction slimDOMExcluded(sn, slimDOMOptions) {\r\n    if (slimDOMOptions.comment && sn.type === NodeType.Comment) {\r\n        return true;\r\n    }\r\n    else if (sn.type === NodeType.Element) {\r\n        if (slimDOMOptions.script &&\r\n            (sn.tagName === 'script' ||\r\n                (sn.tagName === 'link' &&\r\n                    sn.attributes.rel === 'preload' &&\r\n                    sn.attributes.as === 'script') ||\r\n                (sn.tagName === 'link' &&\r\n                    sn.attributes.rel === 'prefetch' &&\r\n                    typeof sn.attributes.href === 'string' &&\r\n                    sn.attributes.href.endsWith('.js')))) {\r\n            return true;\r\n        }\r\n        else if (slimDOMOptions.headFavicon &&\r\n            ((sn.tagName === 'link' && sn.attributes.rel === 'shortcut icon') ||\r\n                (sn.tagName === 'meta' &&\r\n                    (lowerIfExists(sn.attributes.name).match(/^msapplication-tile(image|color)$/) ||\r\n                        lowerIfExists(sn.attributes.name) === 'application-name' ||\r\n                        lowerIfExists(sn.attributes.rel) === 'icon' ||\r\n                        lowerIfExists(sn.attributes.rel) === 'apple-touch-icon' ||\r\n                        lowerIfExists(sn.attributes.rel) === 'shortcut icon')))) {\r\n            return true;\r\n        }\r\n        else if (sn.tagName === 'meta') {\r\n            if (slimDOMOptions.headMetaDescKeywords &&\r\n                lowerIfExists(sn.attributes.name).match(/^description|keywords$/)) {\r\n                return true;\r\n            }\r\n            else if (slimDOMOptions.headMetaSocial &&\r\n                (lowerIfExists(sn.attributes.property).match(/^(og|twitter|fb):/) ||\r\n                    lowerIfExists(sn.attributes.name).match(/^(og|twitter):/) ||\r\n                    lowerIfExists(sn.attributes.name) === 'pinterest')) {\r\n                return true;\r\n            }\r\n            else if (slimDOMOptions.headMetaRobots &&\r\n                (lowerIfExists(sn.attributes.name) === 'robots' ||\r\n                    lowerIfExists(sn.attributes.name) === 'googlebot' ||\r\n                    lowerIfExists(sn.attributes.name) === 'bingbot')) {\r\n                return true;\r\n            }\r\n            else if (slimDOMOptions.headMetaHttpEquiv &&\r\n                sn.attributes['http-equiv'] !== undefined) {\r\n                return true;\r\n            }\r\n            else if (slimDOMOptions.headMetaAuthorship &&\r\n                (lowerIfExists(sn.attributes.name) === 'author' ||\r\n                    lowerIfExists(sn.attributes.name) === 'generator' ||\r\n                    lowerIfExists(sn.attributes.name) === 'framework' ||\r\n                    lowerIfExists(sn.attributes.name) === 'publisher' ||\r\n                    lowerIfExists(sn.attributes.name) === 'progid' ||\r\n                    lowerIfExists(sn.attributes.property).match(/^article:/) ||\r\n                    lowerIfExists(sn.attributes.property).match(/^product:/))) {\r\n                return true;\r\n            }\r\n            else if (slimDOMOptions.headMetaVerification &&\r\n                (lowerIfExists(sn.attributes.name) === 'google-site-verification' ||\r\n                    lowerIfExists(sn.attributes.name) === 'yandex-verification' ||\r\n                    lowerIfExists(sn.attributes.name) === 'csrf-token' ||\r\n                    lowerIfExists(sn.attributes.name) === 'p:domain_verify' ||\r\n                    lowerIfExists(sn.attributes.name) === 'verify-v1' ||\r\n                    lowerIfExists(sn.attributes.name) === 'verification' ||\r\n                    lowerIfExists(sn.attributes.name) === 'shopify-checkout-api-token')) {\r\n                return true;\r\n            }\r\n        }\r\n    }\r\n    return false;\r\n}\r\nfunction serializeNodeWithId(n, options) {\r\n    var doc = options.doc, mirror = options.mirror, blockClass = options.blockClass, blockSelector = options.blockSelector, maskTextClass = options.maskTextClass, maskTextSelector = options.maskTextSelector, _a = options.skipChild, skipChild = _a === void 0 ? false : _a, _b = options.inlineStylesheet, inlineStylesheet = _b === void 0 ? true : _b, _c = options.maskInputOptions, maskInputOptions = _c === void 0 ? {} : _c, maskTextFn = options.maskTextFn, maskInputFn = options.maskInputFn, slimDOMOptions = options.slimDOMOptions, _d = options.dataURLOptions, dataURLOptions = _d === void 0 ? {} : _d, _e = options.inlineImages, inlineImages = _e === void 0 ? false : _e, _f = options.recordCanvas, recordCanvas = _f === void 0 ? false : _f, onSerialize = options.onSerialize, onIframeLoad = options.onIframeLoad, _g = options.iframeLoadTimeout, iframeLoadTimeout = _g === void 0 ? 5000 : _g, onStylesheetLoad = options.onStylesheetLoad, _h = options.stylesheetLoadTimeout, stylesheetLoadTimeout = _h === void 0 ? 5000 : _h, _j = options.keepIframeSrcFn, keepIframeSrcFn = _j === void 0 ? function () { return false; } : _j, _k = options.newlyAddedElement, newlyAddedElement = _k === void 0 ? false : _k;\r\n    var _l = options.preserveWhiteSpace, preserveWhiteSpace = _l === void 0 ? true : _l;\r\n    var _serializedNode = serializeNode(n, {\r\n        doc: doc,\r\n        mirror: mirror,\r\n        blockClass: blockClass,\r\n        blockSelector: blockSelector,\r\n        maskTextClass: maskTextClass,\r\n        maskTextSelector: maskTextSelector,\r\n        inlineStylesheet: inlineStylesheet,\r\n        maskInputOptions: maskInputOptions,\r\n        maskTextFn: maskTextFn,\r\n        maskInputFn: maskInputFn,\r\n        dataURLOptions: dataURLOptions,\r\n        inlineImages: inlineImages,\r\n        recordCanvas: recordCanvas,\r\n        keepIframeSrcFn: keepIframeSrcFn,\r\n        newlyAddedElement: newlyAddedElement\r\n    });\r\n    if (!_serializedNode) {\r\n        console.warn(n, 'not serialized');\r\n        return null;\r\n    }\r\n    var id;\r\n    if (mirror.hasNode(n)) {\r\n        id = mirror.getId(n);\r\n    }\r\n    else if (slimDOMExcluded(_serializedNode, slimDOMOptions) ||\r\n        (!preserveWhiteSpace &&\r\n            _serializedNode.type === NodeType.Text &&\r\n            !_serializedNode.isStyle &&\r\n            !_serializedNode.textContent.replace(/^\\s+|\\s+$/gm, '').length)) {\r\n        id = IGNORED_NODE;\r\n    }\r\n    else {\r\n        id = genId();\r\n    }\r\n    var serializedNode = Object.assign(_serializedNode, { id: id });\r\n    mirror.add(n, serializedNode);\r\n    if (id === IGNORED_NODE) {\r\n        return null;\r\n    }\r\n    if (onSerialize) {\r\n        onSerialize(n);\r\n    }\r\n    var recordChild = !skipChild;\r\n    if (serializedNode.type === NodeType.Element) {\r\n        recordChild = recordChild && !serializedNode.needBlock;\r\n        delete serializedNode.needBlock;\r\n        var shadowRoot = n.shadowRoot;\r\n        if (shadowRoot && isNativeShadowDom(shadowRoot))\r\n            serializedNode.isShadowHost = true;\r\n    }\r\n    if ((serializedNode.type === NodeType.Document ||\r\n        serializedNode.type === NodeType.Element) &&\r\n        recordChild) {\r\n        if (slimDOMOptions.headWhitespace &&\r\n            serializedNode.type === NodeType.Element &&\r\n            serializedNode.tagName === 'head') {\r\n            preserveWhiteSpace = false;\r\n        }\r\n        var bypassOptions = {\r\n            doc: doc,\r\n            mirror: mirror,\r\n            blockClass: blockClass,\r\n            blockSelector: blockSelector,\r\n            maskTextClass: maskTextClass,\r\n            maskTextSelector: maskTextSelector,\r\n            skipChild: skipChild,\r\n            inlineStylesheet: inlineStylesheet,\r\n            maskInputOptions: maskInputOptions,\r\n            maskTextFn: maskTextFn,\r\n            maskInputFn: maskInputFn,\r\n            slimDOMOptions: slimDOMOptions,\r\n            dataURLOptions: dataURLOptions,\r\n            inlineImages: inlineImages,\r\n            recordCanvas: recordCanvas,\r\n            preserveWhiteSpace: preserveWhiteSpace,\r\n            onSerialize: onSerialize,\r\n            onIframeLoad: onIframeLoad,\r\n            iframeLoadTimeout: iframeLoadTimeout,\r\n            onStylesheetLoad: onStylesheetLoad,\r\n            stylesheetLoadTimeout: stylesheetLoadTimeout,\r\n            keepIframeSrcFn: keepIframeSrcFn\r\n        };\r\n        for (var _i = 0, _m = Array.from(n.childNodes); _i < _m.length; _i++) {\r\n            var childN = _m[_i];\r\n            var serializedChildNode = serializeNodeWithId(childN, bypassOptions);\r\n            if (serializedChildNode) {\r\n                serializedNode.childNodes.push(serializedChildNode);\r\n            }\r\n        }\r\n        if (isElement(n) && n.shadowRoot) {\r\n            for (var _o = 0, _p = Array.from(n.shadowRoot.childNodes); _o < _p.length; _o++) {\r\n                var childN = _p[_o];\r\n                var serializedChildNode = serializeNodeWithId(childN, bypassOptions);\r\n                if (serializedChildNode) {\r\n                    isNativeShadowDom(n.shadowRoot) &&\r\n                        (serializedChildNode.isShadow = true);\r\n                    serializedNode.childNodes.push(serializedChildNode);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    if (n.parentNode &&\r\n        isShadowRoot(n.parentNode) &&\r\n        isNativeShadowDom(n.parentNode)) {\r\n        serializedNode.isShadow = true;\r\n    }\r\n    if (serializedNode.type === NodeType.Element &&\r\n        serializedNode.tagName === 'iframe') {\r\n        onceIframeLoaded(n, function () {\r\n            var iframeDoc = n.contentDocument;\r\n            if (iframeDoc && onIframeLoad) {\r\n                var serializedIframeNode = serializeNodeWithId(iframeDoc, {\r\n                    doc: iframeDoc,\r\n                    mirror: mirror,\r\n                    blockClass: blockClass,\r\n                    blockSelector: blockSelector,\r\n                    maskTextClass: maskTextClass,\r\n                    maskTextSelector: maskTextSelector,\r\n                    skipChild: false,\r\n                    inlineStylesheet: inlineStylesheet,\r\n                    maskInputOptions: maskInputOptions,\r\n                    maskTextFn: maskTextFn,\r\n                    maskInputFn: maskInputFn,\r\n                    slimDOMOptions: slimDOMOptions,\r\n                    dataURLOptions: dataURLOptions,\r\n                    inlineImages: inlineImages,\r\n                    recordCanvas: recordCanvas,\r\n                    preserveWhiteSpace: preserveWhiteSpace,\r\n                    onSerialize: onSerialize,\r\n                    onIframeLoad: onIframeLoad,\r\n                    iframeLoadTimeout: iframeLoadTimeout,\r\n                    onStylesheetLoad: onStylesheetLoad,\r\n                    stylesheetLoadTimeout: stylesheetLoadTimeout,\r\n                    keepIframeSrcFn: keepIframeSrcFn\r\n                });\r\n                if (serializedIframeNode) {\r\n                    onIframeLoad(n, serializedIframeNode);\r\n                }\r\n            }\r\n        }, iframeLoadTimeout);\r\n    }\r\n    if (serializedNode.type === NodeType.Element &&\r\n        serializedNode.tagName === 'link' &&\r\n        serializedNode.attributes.rel === 'stylesheet') {\r\n        onceStylesheetLoaded(n, function () {\r\n            if (onStylesheetLoad) {\r\n                var serializedLinkNode = serializeNodeWithId(n, {\r\n                    doc: doc,\r\n                    mirror: mirror,\r\n                    blockClass: blockClass,\r\n                    blockSelector: blockSelector,\r\n                    maskTextClass: maskTextClass,\r\n                    maskTextSelector: maskTextSelector,\r\n                    skipChild: false,\r\n                    inlineStylesheet: inlineStylesheet,\r\n                    maskInputOptions: maskInputOptions,\r\n                    maskTextFn: maskTextFn,\r\n                    maskInputFn: maskInputFn,\r\n                    slimDOMOptions: slimDOMOptions,\r\n                    dataURLOptions: dataURLOptions,\r\n                    inlineImages: inlineImages,\r\n                    recordCanvas: recordCanvas,\r\n                    preserveWhiteSpace: preserveWhiteSpace,\r\n                    onSerialize: onSerialize,\r\n                    onIframeLoad: onIframeLoad,\r\n                    iframeLoadTimeout: iframeLoadTimeout,\r\n                    onStylesheetLoad: onStylesheetLoad,\r\n                    stylesheetLoadTimeout: stylesheetLoadTimeout,\r\n                    keepIframeSrcFn: keepIframeSrcFn\r\n                });\r\n                if (serializedLinkNode) {\r\n                    onStylesheetLoad(n, serializedLinkNode);\r\n                }\r\n            }\r\n        }, stylesheetLoadTimeout);\r\n    }\r\n    return serializedNode;\r\n}\r\nfunction snapshot(n, options) {\r\n    var _a = options || {}, _b = _a.mirror, mirror = _b === void 0 ? new Mirror() : _b, _c = _a.blockClass, blockClass = _c === void 0 ? 'rr-block' : _c, _d = _a.blockSelector, blockSelector = _d === void 0 ? null : _d, _e = _a.maskTextClass, maskTextClass = _e === void 0 ? 'rr-mask' : _e, _f = _a.maskTextSelector, maskTextSelector = _f === void 0 ? null : _f, _g = _a.inlineStylesheet, inlineStylesheet = _g === void 0 ? true : _g, _h = _a.inlineImages, inlineImages = _h === void 0 ? false : _h, _j = _a.recordCanvas, recordCanvas = _j === void 0 ? false : _j, _k = _a.maskAllInputs, maskAllInputs = _k === void 0 ? false : _k, maskTextFn = _a.maskTextFn, maskInputFn = _a.maskInputFn, _l = _a.slimDOM, slimDOM = _l === void 0 ? false : _l, dataURLOptions = _a.dataURLOptions, preserveWhiteSpace = _a.preserveWhiteSpace, onSerialize = _a.onSerialize, onIframeLoad = _a.onIframeLoad, iframeLoadTimeout = _a.iframeLoadTimeout, onStylesheetLoad = _a.onStylesheetLoad, stylesheetLoadTimeout = _a.stylesheetLoadTimeout, _m = _a.keepIframeSrcFn, keepIframeSrcFn = _m === void 0 ? function () { return false; } : _m;\r\n    var maskInputOptions = maskAllInputs === true\r\n        ? {\r\n            color: true,\r\n            date: true,\r\n            'datetime-local': true,\r\n            email: true,\r\n            month: true,\r\n            number: true,\r\n            range: true,\r\n            search: true,\r\n            tel: true,\r\n            text: true,\r\n            time: true,\r\n            url: true,\r\n            week: true,\r\n            textarea: true,\r\n            select: true,\r\n            password: true\r\n        }\r\n        : maskAllInputs === false\r\n            ? {\r\n                password: true\r\n            }\r\n            : maskAllInputs;\r\n    var slimDOMOptions = slimDOM === true || slimDOM === 'all'\r\n        ?\r\n            {\r\n                script: true,\r\n                comment: true,\r\n                headFavicon: true,\r\n                headWhitespace: true,\r\n                headMetaDescKeywords: slimDOM === 'all',\r\n                headMetaSocial: true,\r\n                headMetaRobots: true,\r\n                headMetaHttpEquiv: true,\r\n                headMetaAuthorship: true,\r\n                headMetaVerification: true\r\n            }\r\n        : slimDOM === false\r\n            ? {}\r\n            : slimDOM;\r\n    return serializeNodeWithId(n, {\r\n        doc: n,\r\n        mirror: mirror,\r\n        blockClass: blockClass,\r\n        blockSelector: blockSelector,\r\n        maskTextClass: maskTextClass,\r\n        maskTextSelector: maskTextSelector,\r\n        skipChild: false,\r\n        inlineStylesheet: inlineStylesheet,\r\n        maskInputOptions: maskInputOptions,\r\n        maskTextFn: maskTextFn,\r\n        maskInputFn: maskInputFn,\r\n        slimDOMOptions: slimDOMOptions,\r\n        dataURLOptions: dataURLOptions,\r\n        inlineImages: inlineImages,\r\n        recordCanvas: recordCanvas,\r\n        preserveWhiteSpace: preserveWhiteSpace,\r\n        onSerialize: onSerialize,\r\n        onIframeLoad: onIframeLoad,\r\n        iframeLoadTimeout: iframeLoadTimeout,\r\n        onStylesheetLoad: onStylesheetLoad,\r\n        stylesheetLoadTimeout: stylesheetLoadTimeout,\r\n        keepIframeSrcFn: keepIframeSrcFn,\r\n        newlyAddedElement: false\r\n    });\r\n}\r\n\nvar commentre = /\\/\\*[^*]*\\*+([^/*][^*]*\\*+)*\\//g;\r\nfunction parse(css, options) {\r\n    if (options === void 0) { options = {}; }\r\n    var lineno = 1;\r\n    var column = 1;\r\n    function updatePosition(str) {\r\n        var lines = str.match(/\\n/g);\r\n        if (lines) {\r\n            lineno += lines.length;\r\n        }\r\n        var i = str.lastIndexOf('\\n');\r\n        column = i === -1 ? column + str.length : str.length - i;\r\n    }\r\n    function position() {\r\n        var start = { line: lineno, column: column };\r\n        return function (node) {\r\n            node.position = new Position(start);\r\n            whitespace();\r\n            return node;\r\n        };\r\n    }\r\n    var Position = (function () {\r\n        function Position(start) {\r\n            this.start = start;\r\n            this.end = { line: lineno, column: column };\r\n            this.source = options.source;\r\n        }\r\n        return Position;\r\n    }());\r\n    Position.prototype.content = css;\r\n    var errorsList = [];\r\n    function error(msg) {\r\n        var err = new Error(\"\".concat(options.source || '', \":\").concat(lineno, \":\").concat(column, \": \").concat(msg));\r\n        err.reason = msg;\r\n        err.filename = options.source;\r\n        err.line = lineno;\r\n        err.column = column;\r\n        err.source = css;\r\n        if (options.silent) {\r\n            errorsList.push(err);\r\n        }\r\n        else {\r\n            throw err;\r\n        }\r\n    }\r\n    function stylesheet() {\r\n        var rulesList = rules();\r\n        return {\r\n            type: 'stylesheet',\r\n            stylesheet: {\r\n                source: options.source,\r\n                rules: rulesList,\r\n                parsingErrors: errorsList\r\n            }\r\n        };\r\n    }\r\n    function open() {\r\n        return match(/^{\\s*/);\r\n    }\r\n    function close() {\r\n        return match(/^}/);\r\n    }\r\n    function rules() {\r\n        var node;\r\n        var rules = [];\r\n        whitespace();\r\n        comments(rules);\r\n        while (css.length && css.charAt(0) !== '}' && (node = atrule() || rule())) {\r\n            if (node !== false) {\r\n                rules.push(node);\r\n                comments(rules);\r\n            }\r\n        }\r\n        return rules;\r\n    }\r\n    function match(re) {\r\n        var m = re.exec(css);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        var str = m[0];\r\n        updatePosition(str);\r\n        css = css.slice(str.length);\r\n        return m;\r\n    }\r\n    function whitespace() {\r\n        match(/^\\s*/);\r\n    }\r\n    function comments(rules) {\r\n        if (rules === void 0) { rules = []; }\r\n        var c;\r\n        while ((c = comment())) {\r\n            if (c !== false) {\r\n                rules.push(c);\r\n            }\r\n            c = comment();\r\n        }\r\n        return rules;\r\n    }\r\n    function comment() {\r\n        var pos = position();\r\n        if ('/' !== css.charAt(0) || '*' !== css.charAt(1)) {\r\n            return;\r\n        }\r\n        var i = 2;\r\n        while ('' !== css.charAt(i) &&\r\n            ('*' !== css.charAt(i) || '/' !== css.charAt(i + 1))) {\r\n            ++i;\r\n        }\r\n        i += 2;\r\n        if ('' === css.charAt(i - 1)) {\r\n            return error('End of comment missing');\r\n        }\r\n        var str = css.slice(2, i - 2);\r\n        column += 2;\r\n        updatePosition(str);\r\n        css = css.slice(i);\r\n        column += 2;\r\n        return pos({\r\n            type: 'comment',\r\n            comment: str\r\n        });\r\n    }\r\n    function selector() {\r\n        var m = match(/^([^{]+)/);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        return trim(m[0])\r\n            .replace(/\\/\\*([^*]|[\\r\\n]|(\\*+([^*/]|[\\r\\n])))*\\*\\/+/g, '')\r\n            .replace(/\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'/g, function (m) {\r\n            return m.replace(/,/g, '\\u200C');\r\n        })\r\n            .split(/\\s*(?![^(]*\\)),\\s*/)\r\n            .map(function (s) {\r\n            return s.replace(/\\u200C/g, ',');\r\n        });\r\n    }\r\n    function declaration() {\r\n        var pos = position();\r\n        var propMatch = match(/^(\\*?[-#\\/\\*\\\\\\w]+(\\[[0-9a-z_-]+\\])?)\\s*/);\r\n        if (!propMatch) {\r\n            return;\r\n        }\r\n        var prop = trim(propMatch[0]);\r\n        if (!match(/^:\\s*/)) {\r\n            return error(\"property missing ':'\");\r\n        }\r\n        var val = match(/^((?:'(?:\\\\'|.)*?'|\"(?:\\\\\"|.)*?\"|\\([^\\)]*?\\)|[^};])+)/);\r\n        var ret = pos({\r\n            type: 'declaration',\r\n            property: prop.replace(commentre, ''),\r\n            value: val ? trim(val[0]).replace(commentre, '') : ''\r\n        });\r\n        match(/^[;\\s]*/);\r\n        return ret;\r\n    }\r\n    function declarations() {\r\n        var decls = [];\r\n        if (!open()) {\r\n            return error(\"missing '{'\");\r\n        }\r\n        comments(decls);\r\n        var decl;\r\n        while ((decl = declaration())) {\r\n            if (decl !== false) {\r\n                decls.push(decl);\r\n                comments(decls);\r\n            }\r\n            decl = declaration();\r\n        }\r\n        if (!close()) {\r\n            return error(\"missing '}'\");\r\n        }\r\n        return decls;\r\n    }\r\n    function keyframe() {\r\n        var m;\r\n        var vals = [];\r\n        var pos = position();\r\n        while ((m = match(/^((\\d+\\.\\d+|\\.\\d+|\\d+)%?|[a-z]+)\\s*/))) {\r\n            vals.push(m[1]);\r\n            match(/^,\\s*/);\r\n        }\r\n        if (!vals.length) {\r\n            return;\r\n        }\r\n        return pos({\r\n            type: 'keyframe',\r\n            values: vals,\r\n            declarations: declarations()\r\n        });\r\n    }\r\n    function atkeyframes() {\r\n        var pos = position();\r\n        var m = match(/^@([-\\w]+)?keyframes\\s*/);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        var vendor = m[1];\r\n        m = match(/^([-\\w]+)\\s*/);\r\n        if (!m) {\r\n            return error('@keyframes missing name');\r\n        }\r\n        var name = m[1];\r\n        if (!open()) {\r\n            return error(\"@keyframes missing '{'\");\r\n        }\r\n        var frame;\r\n        var frames = comments();\r\n        while ((frame = keyframe())) {\r\n            frames.push(frame);\r\n            frames = frames.concat(comments());\r\n        }\r\n        if (!close()) {\r\n            return error(\"@keyframes missing '}'\");\r\n        }\r\n        return pos({\r\n            type: 'keyframes',\r\n            name: name,\r\n            vendor: vendor,\r\n            keyframes: frames\r\n        });\r\n    }\r\n    function atsupports() {\r\n        var pos = position();\r\n        var m = match(/^@supports *([^{]+)/);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        var supports = trim(m[1]);\r\n        if (!open()) {\r\n            return error(\"@supports missing '{'\");\r\n        }\r\n        var style = comments().concat(rules());\r\n        if (!close()) {\r\n            return error(\"@supports missing '}'\");\r\n        }\r\n        return pos({\r\n            type: 'supports',\r\n            supports: supports,\r\n            rules: style\r\n        });\r\n    }\r\n    function athost() {\r\n        var pos = position();\r\n        var m = match(/^@host\\s*/);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        if (!open()) {\r\n            return error(\"@host missing '{'\");\r\n        }\r\n        var style = comments().concat(rules());\r\n        if (!close()) {\r\n            return error(\"@host missing '}'\");\r\n        }\r\n        return pos({\r\n            type: 'host',\r\n            rules: style\r\n        });\r\n    }\r\n    function atmedia() {\r\n        var pos = position();\r\n        var m = match(/^@media *([^{]+)/);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        var media = trim(m[1]);\r\n        if (!open()) {\r\n            return error(\"@media missing '{'\");\r\n        }\r\n        var style = comments().concat(rules());\r\n        if (!close()) {\r\n            return error(\"@media missing '}'\");\r\n        }\r\n        return pos({\r\n            type: 'media',\r\n            media: media,\r\n            rules: style\r\n        });\r\n    }\r\n    function atcustommedia() {\r\n        var pos = position();\r\n        var m = match(/^@custom-media\\s+(--[^\\s]+)\\s*([^{;]+);/);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        return pos({\r\n            type: 'custom-media',\r\n            name: trim(m[1]),\r\n            media: trim(m[2])\r\n        });\r\n    }\r\n    function atpage() {\r\n        var pos = position();\r\n        var m = match(/^@page */);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        var sel = selector() || [];\r\n        if (!open()) {\r\n            return error(\"@page missing '{'\");\r\n        }\r\n        var decls = comments();\r\n        var decl;\r\n        while ((decl = declaration())) {\r\n            decls.push(decl);\r\n            decls = decls.concat(comments());\r\n        }\r\n        if (!close()) {\r\n            return error(\"@page missing '}'\");\r\n        }\r\n        return pos({\r\n            type: 'page',\r\n            selectors: sel,\r\n            declarations: decls\r\n        });\r\n    }\r\n    function atdocument() {\r\n        var pos = position();\r\n        var m = match(/^@([-\\w]+)?document *([^{]+)/);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        var vendor = trim(m[1]);\r\n        var doc = trim(m[2]);\r\n        if (!open()) {\r\n            return error(\"@document missing '{'\");\r\n        }\r\n        var style = comments().concat(rules());\r\n        if (!close()) {\r\n            return error(\"@document missing '}'\");\r\n        }\r\n        return pos({\r\n            type: 'document',\r\n            document: doc,\r\n            vendor: vendor,\r\n            rules: style\r\n        });\r\n    }\r\n    function atfontface() {\r\n        var pos = position();\r\n        var m = match(/^@font-face\\s*/);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        if (!open()) {\r\n            return error(\"@font-face missing '{'\");\r\n        }\r\n        var decls = comments();\r\n        var decl;\r\n        while ((decl = declaration())) {\r\n            decls.push(decl);\r\n            decls = decls.concat(comments());\r\n        }\r\n        if (!close()) {\r\n            return error(\"@font-face missing '}'\");\r\n        }\r\n        return pos({\r\n            type: 'font-face',\r\n            declarations: decls\r\n        });\r\n    }\r\n    var atimport = _compileAtrule('import');\r\n    var atcharset = _compileAtrule('charset');\r\n    var atnamespace = _compileAtrule('namespace');\r\n    function _compileAtrule(name) {\r\n        var re = new RegExp('^@' + name + '\\\\s*([^;]+);');\r\n        return function () {\r\n            var pos = position();\r\n            var m = match(re);\r\n            if (!m) {\r\n                return;\r\n            }\r\n            var ret = { type: name };\r\n            ret[name] = m[1].trim();\r\n            return pos(ret);\r\n        };\r\n    }\r\n    function atrule() {\r\n        if (css[0] !== '@') {\r\n            return;\r\n        }\r\n        return (atkeyframes() ||\r\n            atmedia() ||\r\n            atcustommedia() ||\r\n            atsupports() ||\r\n            atimport() ||\r\n            atcharset() ||\r\n            atnamespace() ||\r\n            atdocument() ||\r\n            atpage() ||\r\n            athost() ||\r\n            atfontface());\r\n    }\r\n    function rule() {\r\n        var pos = position();\r\n        var sel = selector();\r\n        if (!sel) {\r\n            return error('selector missing');\r\n        }\r\n        comments();\r\n        return pos({\r\n            type: 'rule',\r\n            selectors: sel,\r\n            declarations: declarations()\r\n        });\r\n    }\r\n    return addParent(stylesheet());\r\n}\r\nfunction trim(str) {\r\n    return str ? str.replace(/^\\s+|\\s+$/g, '') : '';\r\n}\r\nfunction addParent(obj, parent) {\r\n    var isNode = obj && typeof obj.type === 'string';\r\n    var childParent = isNode ? obj : parent;\r\n    for (var _i = 0, _a = Object.keys(obj); _i < _a.length; _i++) {\r\n        var k = _a[_i];\r\n        var value = obj[k];\r\n        if (Array.isArray(value)) {\r\n            value.forEach(function (v) {\r\n                addParent(v, childParent);\r\n            });\r\n        }\r\n        else if (value && typeof value === 'object') {\r\n            addParent(value, childParent);\r\n        }\r\n    }\r\n    if (isNode) {\r\n        Object.defineProperty(obj, 'parent', {\r\n            configurable: true,\r\n            writable: true,\r\n            enumerable: false,\r\n            value: parent || null\r\n        });\r\n    }\r\n    return obj;\r\n}\n\nvar tagMap = {\r\n    script: 'noscript',\r\n    altglyph: 'altGlyph',\r\n    altglyphdef: 'altGlyphDef',\r\n    altglyphitem: 'altGlyphItem',\r\n    animatecolor: 'animateColor',\r\n    animatemotion: 'animateMotion',\r\n    animatetransform: 'animateTransform',\r\n    clippath: 'clipPath',\r\n    feblend: 'feBlend',\r\n    fecolormatrix: 'feColorMatrix',\r\n    fecomponenttransfer: 'feComponentTransfer',\r\n    fecomposite: 'feComposite',\r\n    feconvolvematrix: 'feConvolveMatrix',\r\n    fediffuselighting: 'feDiffuseLighting',\r\n    fedisplacementmap: 'feDisplacementMap',\r\n    fedistantlight: 'feDistantLight',\r\n    fedropshadow: 'feDropShadow',\r\n    feflood: 'feFlood',\r\n    fefunca: 'feFuncA',\r\n    fefuncb: 'feFuncB',\r\n    fefuncg: 'feFuncG',\r\n    fefuncr: 'feFuncR',\r\n    fegaussianblur: 'feGaussianBlur',\r\n    feimage: 'feImage',\r\n    femerge: 'feMerge',\r\n    femergenode: 'feMergeNode',\r\n    femorphology: 'feMorphology',\r\n    feoffset: 'feOffset',\r\n    fepointlight: 'fePointLight',\r\n    fespecularlighting: 'feSpecularLighting',\r\n    fespotlight: 'feSpotLight',\r\n    fetile: 'feTile',\r\n    feturbulence: 'feTurbulence',\r\n    foreignobject: 'foreignObject',\r\n    glyphref: 'glyphRef',\r\n    lineargradient: 'linearGradient',\r\n    radialgradient: 'radialGradient'\r\n};\r\nfunction getTagName(n) {\r\n    var tagName = tagMap[n.tagName] ? tagMap[n.tagName] : n.tagName;\r\n    if (tagName === 'link' && n.attributes._cssText) {\r\n        tagName = 'style';\r\n    }\r\n    return tagName;\r\n}\r\nfunction escapeRegExp(str) {\r\n    return str.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\r\n}\r\nvar HOVER_SELECTOR = /([^\\\\]):hover/;\r\nvar HOVER_SELECTOR_GLOBAL = new RegExp(HOVER_SELECTOR.source, 'g');\r\nfunction addHoverClass(cssText, cache) {\r\n    var cachedStyle = cache === null || cache === void 0 ? void 0 : cache.stylesWithHoverClass.get(cssText);\r\n    if (cachedStyle)\r\n        return cachedStyle;\r\n    var ast = parse(cssText, {\r\n        silent: true\r\n    });\r\n    if (!ast.stylesheet) {\r\n        return cssText;\r\n    }\r\n    var selectors = [];\r\n    ast.stylesheet.rules.forEach(function (rule) {\r\n        if ('selectors' in rule) {\r\n            (rule.selectors || []).forEach(function (selector) {\r\n                if (HOVER_SELECTOR.test(selector)) {\r\n                    selectors.push(selector);\r\n                }\r\n            });\r\n        }\r\n    });\r\n    if (selectors.length === 0) {\r\n        return cssText;\r\n    }\r\n    var selectorMatcher = new RegExp(selectors\r\n        .filter(function (selector, index) { return selectors.indexOf(selector) === index; })\r\n        .sort(function (a, b) { return b.length - a.length; })\r\n        .map(function (selector) {\r\n        return escapeRegExp(selector);\r\n    })\r\n        .join('|'), 'g');\r\n    var result = cssText.replace(selectorMatcher, function (selector) {\r\n        var newSelector = selector.replace(HOVER_SELECTOR_GLOBAL, '$1.\\\\:hover');\r\n        return \"\".concat(selector, \", \").concat(newSelector);\r\n    });\r\n    cache === null || cache === void 0 ? void 0 : cache.stylesWithHoverClass.set(cssText, result);\r\n    return result;\r\n}\r\nfunction createCache() {\r\n    var stylesWithHoverClass = new Map();\r\n    return {\r\n        stylesWithHoverClass: stylesWithHoverClass\r\n    };\r\n}\r\nfunction buildNode(n, options) {\r\n    var doc = options.doc, hackCss = options.hackCss, cache = options.cache;\r\n    switch (n.type) {\r\n        case NodeType.Document:\r\n            return doc.implementation.createDocument(null, '', null);\r\n        case NodeType.DocumentType:\r\n            return doc.implementation.createDocumentType(n.name || 'html', n.publicId, n.systemId);\r\n        case NodeType.Element: {\r\n            var tagName = getTagName(n);\r\n            var node_1;\r\n            if (n.isSVG) {\r\n                node_1 = doc.createElementNS('http://www.w3.org/2000/svg', tagName);\r\n            }\r\n            else {\r\n                node_1 = doc.createElement(tagName);\r\n            }\r\n            var specialAttributes = {};\r\n            for (var name_1 in n.attributes) {\r\n                if (!Object.prototype.hasOwnProperty.call(n.attributes, name_1)) {\r\n                    continue;\r\n                }\r\n                var value = n.attributes[name_1];\r\n                if (tagName === 'option' &&\r\n                    name_1 === 'selected' &&\r\n                    value === false) {\r\n                    continue;\r\n                }\r\n                if (value === true)\r\n                    value = '';\r\n                if (name_1.startsWith('rr_')) {\r\n                    specialAttributes[name_1] = value;\r\n                    continue;\r\n                }\r\n                var isTextarea = tagName === 'textarea' && name_1 === 'value';\r\n                var isRemoteOrDynamicCss = tagName === 'style' && name_1 === '_cssText';\r\n                if (isRemoteOrDynamicCss && hackCss && typeof value === 'string') {\r\n                    value = addHoverClass(value, cache);\r\n                }\r\n                if ((isTextarea || isRemoteOrDynamicCss) && typeof value === 'string') {\r\n                    var child = doc.createTextNode(value);\r\n                    for (var _i = 0, _a = Array.from(node_1.childNodes); _i < _a.length; _i++) {\r\n                        var c = _a[_i];\r\n                        if (c.nodeType === node_1.TEXT_NODE) {\r\n                            node_1.removeChild(c);\r\n                        }\r\n                    }\r\n                    node_1.appendChild(child);\r\n                    continue;\r\n                }\r\n                try {\r\n                    if (n.isSVG && name_1 === 'xlink:href') {\r\n                        node_1.setAttributeNS('http://www.w3.org/1999/xlink', name_1, value.toString());\r\n                    }\r\n                    else if (name_1 === 'onload' ||\r\n                        name_1 === 'onclick' ||\r\n                        name_1.substring(0, 7) === 'onmouse') {\r\n                        node_1.setAttribute('_' + name_1, value.toString());\r\n                    }\r\n                    else if (tagName === 'meta' &&\r\n                        n.attributes['http-equiv'] === 'Content-Security-Policy' &&\r\n                        name_1 === 'content') {\r\n                        node_1.setAttribute('csp-content', value.toString());\r\n                        continue;\r\n                    }\r\n                    else if (tagName === 'link' &&\r\n                        n.attributes.rel === 'preload' &&\r\n                        n.attributes.as === 'script') {\r\n                    }\r\n                    else if (tagName === 'link' &&\r\n                        n.attributes.rel === 'prefetch' &&\r\n                        typeof n.attributes.href === 'string' &&\r\n                        n.attributes.href.endsWith('.js')) {\r\n                    }\r\n                    else if (tagName === 'img' &&\r\n                        n.attributes.srcset &&\r\n                        n.attributes.rr_dataURL) {\r\n                        node_1.setAttribute('rrweb-original-srcset', n.attributes.srcset);\r\n                    }\r\n                    else {\r\n                        node_1.setAttribute(name_1, value.toString());\r\n                    }\r\n                }\r\n                catch (error) {\r\n                }\r\n            }\r\n            var _loop_1 = function (name_2) {\r\n                var value = specialAttributes[name_2];\r\n                if (tagName === 'canvas' && name_2 === 'rr_dataURL') {\r\n                    var image_1 = document.createElement('img');\r\n                    image_1.onload = function () {\r\n                        var ctx = node_1.getContext('2d');\r\n                        if (ctx) {\r\n                            ctx.drawImage(image_1, 0, 0, image_1.width, image_1.height);\r\n                        }\r\n                    };\r\n                    image_1.src = value.toString();\r\n                    if (node_1.RRNodeType)\r\n                        node_1.rr_dataURL = value.toString();\r\n                }\r\n                else if (tagName === 'img' && name_2 === 'rr_dataURL') {\r\n                    var image = node_1;\r\n                    if (!image.currentSrc.startsWith('data:')) {\r\n                        image.setAttribute('rrweb-original-src', n.attributes.src);\r\n                        image.src = value.toString();\r\n                    }\r\n                }\r\n                if (name_2 === 'rr_width') {\r\n                    node_1.style.width = value.toString();\r\n                }\r\n                else if (name_2 === 'rr_height') {\r\n                    node_1.style.height = value.toString();\r\n                }\r\n                else if (name_2 === 'rr_mediaCurrentTime' &&\r\n                    typeof value === 'number') {\r\n                    node_1.currentTime = value;\r\n                }\r\n                else if (name_2 === 'rr_mediaState') {\r\n                    switch (value) {\r\n                        case 'played':\r\n                            node_1\r\n                                .play()[\"catch\"](function (e) { return console.warn('media playback error', e); });\r\n                            break;\r\n                        case 'paused':\r\n                            node_1.pause();\r\n                            break;\r\n                    }\r\n                }\r\n            };\r\n            for (var name_2 in specialAttributes) {\r\n                _loop_1(name_2);\r\n            }\r\n            if (n.isShadowHost) {\r\n                if (!node_1.shadowRoot) {\r\n                    node_1.attachShadow({ mode: 'open' });\r\n                }\r\n                else {\r\n                    while (node_1.shadowRoot.firstChild) {\r\n                        node_1.shadowRoot.removeChild(node_1.shadowRoot.firstChild);\r\n                    }\r\n                }\r\n            }\r\n            return node_1;\r\n        }\r\n        case NodeType.Text:\r\n            return doc.createTextNode(n.isStyle && hackCss\r\n                ? addHoverClass(n.textContent, cache)\r\n                : n.textContent);\r\n        case NodeType.CDATA:\r\n            return doc.createCDATASection(n.textContent);\r\n        case NodeType.Comment:\r\n            return doc.createComment(n.textContent);\r\n        default:\r\n            return null;\r\n    }\r\n}\r\nfunction buildNodeWithSN(n, options) {\r\n    var doc = options.doc, mirror = options.mirror, _a = options.skipChild, skipChild = _a === void 0 ? false : _a, _b = options.hackCss, hackCss = _b === void 0 ? true : _b, afterAppend = options.afterAppend, cache = options.cache;\r\n    var node = buildNode(n, { doc: doc, hackCss: hackCss, cache: cache });\r\n    if (!node) {\r\n        return null;\r\n    }\r\n    if (n.rootId && mirror.getNode(n.rootId) !== doc) {\r\n        mirror.replace(n.rootId, doc);\r\n    }\r\n    if (n.type === NodeType.Document) {\r\n        doc.close();\r\n        doc.open();\r\n        if (n.compatMode === 'BackCompat' &&\r\n            n.childNodes &&\r\n            n.childNodes[0].type !== NodeType.DocumentType) {\r\n            if (n.childNodes[0].type === NodeType.Element &&\r\n                'xmlns' in n.childNodes[0].attributes &&\r\n                n.childNodes[0].attributes.xmlns === 'http://www.w3.org/1999/xhtml') {\r\n                doc.write('<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"\">');\r\n            }\r\n            else {\r\n                doc.write('<!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.0 Transitional//EN\" \"\">');\r\n            }\r\n        }\r\n        node = doc;\r\n    }\r\n    mirror.add(node, n);\r\n    if ((n.type === NodeType.Document || n.type === NodeType.Element) &&\r\n        !skipChild) {\r\n        for (var _i = 0, _c = n.childNodes; _i < _c.length; _i++) {\r\n            var childN = _c[_i];\r\n            var childNode = buildNodeWithSN(childN, {\r\n                doc: doc,\r\n                mirror: mirror,\r\n                skipChild: false,\r\n                hackCss: hackCss,\r\n                afterAppend: afterAppend,\r\n                cache: cache\r\n            });\r\n            if (!childNode) {\r\n                console.warn('Failed to rebuild', childN);\r\n                continue;\r\n            }\r\n            if (childN.isShadow && isElement(node) && node.shadowRoot) {\r\n                node.shadowRoot.appendChild(childNode);\r\n            }\r\n            else {\r\n                node.appendChild(childNode);\r\n            }\r\n            if (afterAppend) {\r\n                afterAppend(childNode, childN.id);\r\n            }\r\n        }\r\n    }\r\n    return node;\r\n}\r\nfunction visit(mirror, onVisit) {\r\n    function walk(node) {\r\n        onVisit(node);\r\n    }\r\n    for (var _i = 0, _a = mirror.getIds(); _i < _a.length; _i++) {\r\n        var id = _a[_i];\r\n        if (mirror.has(id)) {\r\n            walk(mirror.getNode(id));\r\n        }\r\n    }\r\n}\r\nfunction handleScroll(node, mirror) {\r\n    var n = mirror.getMeta(node);\r\n    if ((n === null || n === void 0 ? void 0 : n.type) !== NodeType.Element) {\r\n        return;\r\n    }\r\n    var el = node;\r\n    for (var name_3 in n.attributes) {\r\n        if (!(Object.prototype.hasOwnProperty.call(n.attributes, name_3) &&\r\n            name_3.startsWith('rr_'))) {\r\n            continue;\r\n        }\r\n        var value = n.attributes[name_3];\r\n        if (name_3 === 'rr_scrollLeft') {\r\n            el.scrollLeft = value;\r\n        }\r\n        if (name_3 === 'rr_scrollTop') {\r\n            el.scrollTop = value;\r\n        }\r\n    }\r\n}\r\nfunction rebuild(n, options) {\r\n    var doc = options.doc, onVisit = options.onVisit, _a = options.hackCss, hackCss = _a === void 0 ? true : _a, afterAppend = options.afterAppend, cache = options.cache, _b = options.mirror, mirror = _b === void 0 ? new Mirror() : _b;\r\n    var node = buildNodeWithSN(n, {\r\n        doc: doc,\r\n        mirror: mirror,\r\n        skipChild: false,\r\n        hackCss: hackCss,\r\n        afterAppend: afterAppend,\r\n        cache: cache\r\n    });\r\n    visit(mirror, function (visitedNode) {\r\n        if (onVisit) {\r\n            onVisit(visitedNode);\r\n        }\r\n        handleScroll(visitedNode, mirror);\r\n    });\r\n    return node;\r\n}\n\nexport { IGNORED_NODE, Mirror, NodeType, addHoverClass, buildNodeWithSN, classMatchesRegex, createCache, createMirror, genId, getCssRuleString, getCssRulesString, is2DCanvasBlank, isCSSImportRule, isElement, isNativeShadowDom, isShadowRoot, maskInputValue, needMaskingText, rebuild, serializeNodeWithId, snapshot, transformAttribute };\n","import { classMatchesRegex, IGNORED_NODE, isShadowRoot } from '../../rrweb-snapshot/es/rrweb-snapshot.js';\n\nfunction on(type, fn, target = document) {\r\n    const options = { capture: true, passive: true };\r\n    target.addEventListener(type, fn, options);\r\n    return () => target.removeEventListener(type, fn, options);\r\n}\r\nconst DEPARTED_MIRROR_ACCESS_WARNING = 'Please stop import mirror directly. Instead of that,' +\r\n    '\\r\\n' +\r\n    'now you can use replayer.getMirror() to access the mirror instance of a replayer,' +\r\n    '\\r\\n' +\r\n    'or you can use record.mirror to access the mirror instance during recording.';\r\nlet _mirror = {\r\n    map: {},\r\n    getId() {\r\n        console.error(DEPARTED_MIRROR_ACCESS_WARNING);\r\n        return -1;\r\n    },\r\n    getNode() {\r\n        console.error(DEPARTED_MIRROR_ACCESS_WARNING);\r\n        return null;\r\n    },\r\n    removeNodeFromMap() {\r\n        console.error(DEPARTED_MIRROR_ACCESS_WARNING);\r\n    },\r\n    has() {\r\n        console.error(DEPARTED_MIRROR_ACCESS_WARNING);\r\n        return false;\r\n    },\r\n    reset() {\r\n        console.error(DEPARTED_MIRROR_ACCESS_WARNING);\r\n    },\r\n};\r\nif (typeof window !== 'undefined' && window.Proxy && window.Reflect) {\r\n    _mirror = new Proxy(_mirror, {\r\n        get(target, prop, receiver) {\r\n            if (prop === 'map') {\r\n                console.error(DEPARTED_MIRROR_ACCESS_WARNING);\r\n            }\r\n            return Reflect.get(target, prop, receiver);\r\n        },\r\n    });\r\n}\r\nfunction throttle(func, wait, options = {}) {\r\n    let timeout = null;\r\n    let previous = 0;\r\n    return function (...args) {\r\n        const now = Date.now();\r\n        if (!previous && options.leading === false) {\r\n            previous = now;\r\n        }\r\n        const remaining = wait - (now - previous);\r\n        const context = this;\r\n        if (remaining <= 0 || remaining > wait) {\r\n            if (timeout) {\r\n                clearTimeout(timeout);\r\n                timeout = null;\r\n            }\r\n            previous = now;\r\n            func.apply(context, args);\r\n        }\r\n        else if (!timeout && options.trailing !== false) {\r\n            timeout = setTimeout(() => {\r\n                previous = options.leading === false ? 0 : Date.now();\r\n                timeout = null;\r\n                func.apply(context, args);\r\n            }, remaining);\r\n        }\r\n    };\r\n}\r\nfunction hookSetter(target, key, d, isRevoked, win = window) {\r\n    const original = win.Object.getOwnPropertyDescriptor(target, key);\r\n    win.Object.defineProperty(target, key, isRevoked\r\n        ? d\r\n        : {\r\n            set(value) {\r\n                setTimeout(() => {\r\n                    d.set.call(this, value);\r\n                }, 0);\r\n                if (original && original.set) {\r\n                    original.set.call(this, value);\r\n                }\r\n            },\r\n        });\r\n    return () => hookSetter(target, key, original || {}, true);\r\n}\r\nfunction patch(source, name, replacement) {\r\n    try {\r\n        if (!(name in source)) {\r\n            return () => {\r\n            };\r\n        }\r\n        const original = source[name];\r\n        const wrapped = replacement(original);\r\n        if (typeof wrapped === 'function') {\r\n            wrapped.prototype = wrapped.prototype || {};\r\n            Object.defineProperties(wrapped, {\r\n                __rrweb_original__: {\r\n                    enumerable: false,\r\n                    value: original,\r\n                },\r\n            });\r\n        }\r\n        source[name] = wrapped;\r\n        return () => {\r\n            source[name] = original;\r\n        };\r\n    }\r\n    catch (_a) {\r\n        return () => {\r\n        };\r\n    }\r\n}\r\nfunction getWindowHeight() {\r\n    return (window.innerHeight ||\r\n        (document.documentElement && document.documentElement.clientHeight) ||\r\n        (document.body && document.body.clientHeight));\r\n}\r\nfunction getWindowWidth() {\r\n    return (window.innerWidth ||\r\n        (document.documentElement && document.documentElement.clientWidth) ||\r\n        (document.body && document.body.clientWidth));\r\n}\r\nfunction isBlocked(node, blockClass, blockSelector, checkAncestors) {\r\n    if (!node) {\r\n        return false;\r\n    }\r\n    const el = node.nodeType === node.ELEMENT_NODE\r\n        ? node\r\n        : node.parentElement;\r\n    if (!el)\r\n        return false;\r\n    if (typeof blockClass === 'string') {\r\n        if (el.classList.contains(blockClass))\r\n            return true;\r\n        if (checkAncestors && el.closest('.' + blockClass) !== null)\r\n            return true;\r\n    }\r\n    else {\r\n        if (classMatchesRegex(el, blockClass, checkAncestors))\r\n            return true;\r\n    }\r\n    if (blockSelector) {\r\n        if (node.matches(blockSelector))\r\n            return true;\r\n        if (checkAncestors && el.closest(blockSelector) !== null)\r\n            return true;\r\n    }\r\n    return false;\r\n}\r\nfunction isSerialized(n, mirror) {\r\n    return mirror.getId(n) !== -1;\r\n}\r\nfunction isIgnored(n, mirror) {\r\n    return mirror.getId(n) === IGNORED_NODE;\r\n}\r\nfunction isAncestorRemoved(target, mirror) {\r\n    if (isShadowRoot(target)) {\r\n        return false;\r\n    }\r\n    const id = mirror.getId(target);\r\n    if (!mirror.has(id)) {\r\n        return true;\r\n    }\r\n    if (target.parentNode &&\r\n        target.parentNode.nodeType === target.DOCUMENT_NODE) {\r\n        return false;\r\n    }\r\n    if (!target.parentNode) {\r\n        return true;\r\n    }\r\n    return isAncestorRemoved(target.parentNode, mirror);\r\n}\r\nfunction isTouchEvent(event) {\r\n    return Boolean(event.changedTouches);\r\n}\r\nfunction polyfill(win = window) {\r\n    if ('NodeList' in win && !win.NodeList.prototype.forEach) {\r\n        win.NodeList.prototype.forEach = Array.prototype\r\n            .forEach;\r\n    }\r\n    if ('DOMTokenList' in win && !win.DOMTokenList.prototype.forEach) {\r\n        win.DOMTokenList.prototype.forEach = Array.prototype\r\n            .forEach;\r\n    }\r\n    if (!Node.prototype.contains) {\r\n        Node.prototype.contains = (...args) => {\r\n            let node = args[0];\r\n            if (!(0 in args)) {\r\n                throw new TypeError('1 argument is required');\r\n            }\r\n            do {\r\n                if (this === node) {\r\n                    return true;\r\n                }\r\n            } while ((node = node && node.parentNode));\r\n            return false;\r\n        };\r\n    }\r\n}\r\nfunction queueToResolveTrees(queue) {\r\n    const queueNodeMap = {};\r\n    const putIntoMap = (m, parent) => {\r\n        const nodeInTree = {\r\n            value: m,\r\n            parent,\r\n            children: [],\r\n        };\r\n        queueNodeMap[m.node.id] = nodeInTree;\r\n        return nodeInTree;\r\n    };\r\n    const queueNodeTrees = [];\r\n    for (const mutation of queue) {\r\n        const { nextId, parentId } = mutation;\r\n        if (nextId && nextId in queueNodeMap) {\r\n            const nextInTree = queueNodeMap[nextId];\r\n            if (nextInTree.parent) {\r\n                const idx = nextInTree.parent.children.indexOf(nextInTree);\r\n                nextInTree.parent.children.splice(idx, 0, putIntoMap(mutation, nextInTree.parent));\r\n            }\r\n            else {\r\n                const idx = queueNodeTrees.indexOf(nextInTree);\r\n                queueNodeTrees.splice(idx, 0, putIntoMap(mutation, null));\r\n            }\r\n            continue;\r\n        }\r\n        if (parentId in queueNodeMap) {\r\n            const parentInTree = queueNodeMap[parentId];\r\n            parentInTree.children.push(putIntoMap(mutation, parentInTree));\r\n            continue;\r\n        }\r\n        queueNodeTrees.push(putIntoMap(mutation, null));\r\n    }\r\n    return queueNodeTrees;\r\n}\r\nfunction iterateResolveTree(tree, cb) {\r\n    cb(tree.value);\r\n    for (let i = tree.children.length - 1; i >= 0; i--) {\r\n        iterateResolveTree(tree.children[i], cb);\r\n    }\r\n}\r\nfunction isSerializedIframe(n, mirror) {\r\n    return Boolean(n.nodeName === 'IFRAME' && mirror.getMeta(n));\r\n}\r\nfunction isSerializedStylesheet(n, mirror) {\r\n    return Boolean(n.nodeName === 'LINK' &&\r\n        n.nodeType === n.ELEMENT_NODE &&\r\n        n.getAttribute &&\r\n        n.getAttribute('rel') === 'stylesheet' &&\r\n        mirror.getMeta(n));\r\n}\r\nfunction getBaseDimension(node, rootIframe) {\r\n    var _a, _b;\r\n    const frameElement = (_b = (_a = node.ownerDocument) === null || _a === void 0 ? void 0 : _a.defaultView) === null || _b === void 0 ? void 0 : _b.frameElement;\r\n    if (!frameElement || frameElement === rootIframe) {\r\n        return {\r\n            x: 0,\r\n            y: 0,\r\n            relativeScale: 1,\r\n            absoluteScale: 1,\r\n        };\r\n    }\r\n    const frameDimension = frameElement.getBoundingClientRect();\r\n    const frameBaseDimension = getBaseDimension(frameElement, rootIframe);\r\n    const relativeScale = frameDimension.height / frameElement.clientHeight;\r\n    return {\r\n        x: frameDimension.x * frameBaseDimension.relativeScale +\r\n            frameBaseDimension.x,\r\n        y: frameDimension.y * frameBaseDimension.relativeScale +\r\n            frameBaseDimension.y,\r\n        relativeScale,\r\n        absoluteScale: frameBaseDimension.absoluteScale * relativeScale,\r\n    };\r\n}\r\nfunction hasShadowRoot(n) {\r\n    return Boolean(n === null || n === void 0 ? void 0 : n.shadowRoot);\r\n}\r\nfunction getNestedRule(rules, position) {\r\n    const rule = rules[position[0]];\r\n    if (position.length === 1) {\r\n        return rule;\r\n    }\r\n    else {\r\n        return getNestedRule(rule.cssRules[position[1]].cssRules, position.slice(2));\r\n    }\r\n}\r\nfunction getPositionsAndIndex(nestedIndex) {\r\n    const positions = [...nestedIndex];\r\n    const index = positions.pop();\r\n    return { positions, index };\r\n}\r\nfunction uniqueTextMutations(mutations) {\r\n    const idSet = new Set();\r\n    const uniqueMutations = [];\r\n    for (let i = mutations.length; i--;) {\r\n        const mutation = mutations[i];\r\n        if (!idSet.has(mutation.id)) {\r\n            uniqueMutations.push(mutation);\r\n            idSet.add(mutation.id);\r\n        }\r\n    }\r\n    return uniqueMutations;\r\n}\r\nclass StyleSheetMirror {\r\n    constructor() {\r\n        this.id = 1;\r\n        this.styleIDMap = new WeakMap();\r\n        this.idStyleMap = new Map();\r\n    }\r\n    getId(stylesheet) {\r\n        var _a;\r\n        return (_a = this.styleIDMap.get(stylesheet)) !== null && _a !== void 0 ? _a : -1;\r\n    }\r\n    has(stylesheet) {\r\n        return this.styleIDMap.has(stylesheet);\r\n    }\r\n    add(stylesheet, id) {\r\n        if (this.has(stylesheet))\r\n            return this.getId(stylesheet);\r\n        let newId;\r\n        if (id === undefined) {\r\n            newId = this.id++;\r\n        }\r\n        else\r\n            newId = id;\r\n        this.styleIDMap.set(stylesheet, newId);\r\n        this.idStyleMap.set(newId, stylesheet);\r\n        return newId;\r\n    }\r\n    getStyle(id) {\r\n        return this.idStyleMap.get(id) || null;\r\n    }\r\n    reset() {\r\n        this.styleIDMap = new WeakMap();\r\n        this.idStyleMap = new Map();\r\n        this.id = 1;\r\n    }\r\n    generateId() {\r\n        return this.id++;\r\n    }\r\n}\n\nexport { StyleSheetMirror, _mirror, getBaseDimension, getNestedRule, getPositionsAndIndex, getWindowHeight, getWindowWidth, hasShadowRoot, hookSetter, isAncestorRemoved, isBlocked, isIgnored, isSerialized, isSerializedIframe, isSerializedStylesheet, isTouchEvent, iterateResolveTree, on, patch, polyfill, queueToResolveTrees, throttle, uniqueTextMutations };\n","var EventType = /* @__PURE__ */ ((EventType2) => {\n  EventType2[EventType2[\"DomContentLoaded\"] = 0] = \"DomContentLoaded\";\n  EventType2[EventType2[\"Load\"] = 1] = \"Load\";\n  EventType2[EventType2[\"FullSnapshot\"] = 2] = \"FullSnapshot\";\n  EventType2[EventType2[\"IncrementalSnapshot\"] = 3] = \"IncrementalSnapshot\";\n  EventType2[EventType2[\"Meta\"] = 4] = \"Meta\";\n  EventType2[EventType2[\"Custom\"] = 5] = \"Custom\";\n  EventType2[EventType2[\"Plugin\"] = 6] = \"Plugin\";\n  return EventType2;\n})(EventType || {});\nvar IncrementalSource = /* @__PURE__ */ ((IncrementalSource2) => {\n  IncrementalSource2[IncrementalSource2[\"Mutation\"] = 0] = \"Mutation\";\n  IncrementalSource2[IncrementalSource2[\"MouseMove\"] = 1] = \"MouseMove\";\n  IncrementalSource2[IncrementalSource2[\"MouseInteraction\"] = 2] = \"MouseInteraction\";\n  IncrementalSource2[IncrementalSource2[\"Scroll\"] = 3] = \"Scroll\";\n  IncrementalSource2[IncrementalSource2[\"ViewportResize\"] = 4] = \"ViewportResize\";\n  IncrementalSource2[IncrementalSource2[\"Input\"] = 5] = \"Input\";\n  IncrementalSource2[IncrementalSource2[\"TouchMove\"] = 6] = \"TouchMove\";\n  IncrementalSource2[IncrementalSource2[\"MediaInteraction\"] = 7] = \"MediaInteraction\";\n  IncrementalSource2[IncrementalSource2[\"StyleSheetRule\"] = 8] = \"StyleSheetRule\";\n  IncrementalSource2[IncrementalSource2[\"CanvasMutation\"] = 9] = \"CanvasMutation\";\n  IncrementalSource2[IncrementalSource2[\"Font\"] = 10] = \"Font\";\n  IncrementalSource2[IncrementalSource2[\"Log\"] = 11] = \"Log\";\n  IncrementalSource2[IncrementalSource2[\"Drag\"] = 12] = \"Drag\";\n  IncrementalSource2[IncrementalSource2[\"StyleDeclaration\"] = 13] = \"StyleDeclaration\";\n  IncrementalSource2[IncrementalSource2[\"Selection\"] = 14] = \"Selection\";\n  IncrementalSource2[IncrementalSource2[\"AdoptedStyleSheet\"] = 15] = \"AdoptedStyleSheet\";\n  return IncrementalSource2;\n})(IncrementalSource || {});\nvar MouseInteractions = /* @__PURE__ */ ((MouseInteractions2) => {\n  MouseInteractions2[MouseInteractions2[\"MouseUp\"] = 0] = \"MouseUp\";\n  MouseInteractions2[MouseInteractions2[\"MouseDown\"] = 1] = \"MouseDown\";\n  MouseInteractions2[MouseInteractions2[\"Click\"] = 2] = \"Click\";\n  MouseInteractions2[MouseInteractions2[\"ContextMenu\"] = 3] = \"ContextMenu\";\n  MouseInteractions2[MouseInteractions2[\"DblClick\"] = 4] = \"DblClick\";\n  MouseInteractions2[MouseInteractions2[\"Focus\"] = 5] = \"Focus\";\n  MouseInteractions2[MouseInteractions2[\"Blur\"] = 6] = \"Blur\";\n  MouseInteractions2[MouseInteractions2[\"TouchStart\"] = 7] = \"TouchStart\";\n  MouseInteractions2[MouseInteractions2[\"TouchMove_Departed\"] = 8] = \"TouchMove_Departed\";\n  MouseInteractions2[MouseInteractions2[\"TouchEnd\"] = 9] = \"TouchEnd\";\n  MouseInteractions2[MouseInteractions2[\"TouchCancel\"] = 10] = \"TouchCancel\";\n  return MouseInteractions2;\n})(MouseInteractions || {});\nvar CanvasContext = /* @__PURE__ */ ((CanvasContext2) => {\n  CanvasContext2[CanvasContext2[\"2D\"] = 0] = \"2D\";\n  CanvasContext2[CanvasContext2[\"WebGL\"] = 1] = \"WebGL\";\n  CanvasContext2[CanvasContext2[\"WebGL2\"] = 2] = \"WebGL2\";\n  return CanvasContext2;\n})(CanvasContext || {});\nvar ReplayerEvents = /* @__PURE__ */ ((ReplayerEvents2) => {\n  ReplayerEvents2[\"Start\"] = \"start\";\n  ReplayerEvents2[\"Pause\"] = \"pause\";\n  ReplayerEvents2[\"Resume\"] = \"resume\";\n  ReplayerEvents2[\"Resize\"] = \"resize\";\n  ReplayerEvents2[\"Finish\"] = \"finish\";\n  ReplayerEvents2[\"FullsnapshotRebuilded\"] = \"fullsnapshot-rebuilded\";\n  ReplayerEvents2[\"LoadStylesheetStart\"] = \"load-stylesheet-start\";\n  ReplayerEvents2[\"LoadStylesheetEnd\"] = \"load-stylesheet-end\";\n  ReplayerEvents2[\"SkipStart\"] = \"skip-start\";\n  ReplayerEvents2[\"SkipEnd\"] = \"skip-end\";\n  ReplayerEvents2[\"MouseInteraction\"] = \"mouse-interaction\";\n  ReplayerEvents2[\"EventCast\"] = \"event-cast\";\n  ReplayerEvents2[\"CustomEvent\"] = \"custom-event\";\n  ReplayerEvents2[\"Flush\"] = \"flush\";\n  ReplayerEvents2[\"StateChange\"] = \"state-change\";\n  ReplayerEvents2[\"PlayBack\"] = \"play-back\";\n  ReplayerEvents2[\"Destroy\"] = \"destroy\";\n  return ReplayerEvents2;\n})(ReplayerEvents || {});\n\nexport { CanvasContext, EventType, IncrementalSource, MouseInteractions, ReplayerEvents };\n","import { isShadowRoot, isNativeShadowDom, maskInputValue, transformAttribute, needMaskingText, IGNORED_NODE, serializeNodeWithId } from '../../../rrweb-snapshot/es/rrweb-snapshot.js';\nimport { isIgnored, isBlocked, isSerialized, isAncestorRemoved, isSerializedIframe, isSerializedStylesheet, hasShadowRoot } from '../utils.js';\n\nfunction isNodeInLinkedList(n) {\r\n    return '__ln' in n;\r\n}\r\nclass DoubleLinkedList {\r\n    constructor() {\r\n        this.length = 0;\r\n        this.head = null;\r\n    }\r\n    get(position) {\r\n        if (position >= this.length) {\r\n            throw new Error('Position outside of list range');\r\n        }\r\n        let current = this.head;\r\n        for (let index = 0; index < position; index++) {\r\n            current = (current === null || current === void 0 ? void 0 : current.next) || null;\r\n        }\r\n        return current;\r\n    }\r\n    addNode(n) {\r\n        const node = {\r\n            value: n,\r\n            previous: null,\r\n            next: null,\r\n        };\r\n        n.__ln = node;\r\n        if (n.previousSibling && isNodeInLinkedList(n.previousSibling)) {\r\n            const current = n.previousSibling.__ln.next;\r\n            node.next = current;\r\n            node.previous = n.previousSibling.__ln;\r\n            n.previousSibling.__ln.next = node;\r\n            if (current) {\r\n                current.previous = node;\r\n            }\r\n        }\r\n        else if (n.nextSibling &&\r\n            isNodeInLinkedList(n.nextSibling) &&\r\n            n.nextSibling.__ln.previous) {\r\n            const current = n.nextSibling.__ln.previous;\r\n            node.previous = current;\r\n            node.next = n.nextSibling.__ln;\r\n            n.nextSibling.__ln.previous = node;\r\n            if (current) {\r\n                current.next = node;\r\n            }\r\n        }\r\n        else {\r\n            if (this.head) {\r\n                this.head.previous = node;\r\n            }\r\n            node.next = this.head;\r\n            this.head = node;\r\n        }\r\n        this.length++;\r\n    }\r\n    removeNode(n) {\r\n        const current = n.__ln;\r\n        if (!this.head) {\r\n            return;\r\n        }\r\n        if (!current.previous) {\r\n            this.head = current.next;\r\n            if (this.head) {\r\n                this.head.previous = null;\r\n            }\r\n        }\r\n        else {\r\n            current.previous.next = current.next;\r\n            if (current.next) {\r\n                current.next.previous = current.previous;\r\n            }\r\n        }\r\n        if (n.__ln) {\r\n            delete n.__ln;\r\n        }\r\n        this.length--;\r\n    }\r\n}\r\nconst moveKey = (id, parentId) => `${id}@${parentId}`;\r\nclass MutationBuffer {\r\n    constructor() {\r\n        this.frozen = false;\r\n        this.locked = false;\r\n        this.texts = [];\r\n        this.attributes = [];\r\n        this.removes = [];\r\n        this.mapRemoves = [];\r\n        this.movedMap = {};\r\n        this.addedSet = new Set();\r\n        this.movedSet = new Set();\r\n        this.droppedSet = new Set();\r\n        this.processMutations = (mutations) => {\r\n            mutations.forEach(this.processMutation);\r\n            this.emit();\r\n        };\r\n        this.emit = () => {\r\n            if (this.frozen || this.locked) {\r\n                return;\r\n            }\r\n            const adds = [];\r\n            const addList = new DoubleLinkedList();\r\n            const getNextId = (n) => {\r\n                let ns = n;\r\n                let nextId = IGNORED_NODE;\r\n                while (nextId === IGNORED_NODE) {\r\n                    ns = ns && ns.nextSibling;\r\n                    nextId = ns && this.mirror.getId(ns);\r\n                }\r\n                return nextId;\r\n            };\r\n            const pushAdd = (n) => {\r\n                var _a, _b, _c, _d;\r\n                let shadowHost = null;\r\n                if (((_b = (_a = n.getRootNode) === null || _a === void 0 ? void 0 : _a.call(n)) === null || _b === void 0 ? void 0 : _b.nodeType) === Node.DOCUMENT_FRAGMENT_NODE &&\r\n                    n.getRootNode().host)\r\n                    shadowHost = n.getRootNode().host;\r\n                let rootShadowHost = shadowHost;\r\n                while (((_d = (_c = rootShadowHost === null || rootShadowHost === void 0 ? void 0 : rootShadowHost.getRootNode) === null || _c === void 0 ? void 0 : _c.call(rootShadowHost)) === null || _d === void 0 ? void 0 : _d.nodeType) ===\r\n                    Node.DOCUMENT_FRAGMENT_NODE &&\r\n                    rootShadowHost.getRootNode().host)\r\n                    rootShadowHost = rootShadowHost.getRootNode().host;\r\n                const notInDoc = !this.doc.contains(n) &&\r\n                    (!rootShadowHost || !this.doc.contains(rootShadowHost));\r\n                if (!n.parentNode || notInDoc) {\r\n                    return;\r\n                }\r\n                const parentId = isShadowRoot(n.parentNode)\r\n                    ? this.mirror.getId(shadowHost)\r\n                    : this.mirror.getId(n.parentNode);\r\n                const nextId = getNextId(n);\r\n                if (parentId === -1 || nextId === -1) {\r\n                    return addList.addNode(n);\r\n                }\r\n                const sn = serializeNodeWithId(n, {\r\n                    doc: this.doc,\r\n                    mirror: this.mirror,\r\n                    blockClass: this.blockClass,\r\n                    blockSelector: this.blockSelector,\r\n                    maskTextClass: this.maskTextClass,\r\n                    maskTextSelector: this.maskTextSelector,\r\n                    skipChild: true,\r\n                    newlyAddedElement: true,\r\n                    inlineStylesheet: this.inlineStylesheet,\r\n                    maskInputOptions: this.maskInputOptions,\r\n                    maskTextFn: this.maskTextFn,\r\n                    maskInputFn: this.maskInputFn,\r\n                    slimDOMOptions: this.slimDOMOptions,\r\n                    dataURLOptions: this.dataURLOptions,\r\n                    recordCanvas: this.recordCanvas,\r\n                    inlineImages: this.inlineImages,\r\n                    onSerialize: (currentN) => {\r\n                        if (isSerializedIframe(currentN, this.mirror)) {\r\n                            this.iframeManager.addIframe(currentN);\r\n                        }\r\n                        if (isSerializedStylesheet(currentN, this.mirror)) {\r\n                            this.stylesheetManager.trackLinkElement(currentN);\r\n                        }\r\n                        if (hasShadowRoot(n)) {\r\n                            this.shadowDomManager.addShadowRoot(n.shadowRoot, this.doc);\r\n                        }\r\n                    },\r\n                    onIframeLoad: (iframe, childSn) => {\r\n                        this.iframeManager.attachIframe(iframe, childSn);\r\n                        this.shadowDomManager.observeAttachShadow(iframe);\r\n                    },\r\n                    onStylesheetLoad: (link, childSn) => {\r\n                        this.stylesheetManager.attachLinkElement(link, childSn);\r\n                    },\r\n                });\r\n                if (sn) {\r\n                    adds.push({\r\n                        parentId,\r\n                        nextId,\r\n                        node: sn,\r\n                    });\r\n                }\r\n            };\r\n            while (this.mapRemoves.length) {\r\n                this.mirror.removeNodeFromMap(this.mapRemoves.shift());\r\n            }\r\n            for (const n of Array.from(this.movedSet.values())) {\r\n                if (isParentRemoved(this.removes, n, this.mirror) &&\r\n                    !this.movedSet.has(n.parentNode)) {\r\n                    continue;\r\n                }\r\n                pushAdd(n);\r\n            }\r\n            for (const n of Array.from(this.addedSet.values())) {\r\n                if (!isAncestorInSet(this.droppedSet, n) &&\r\n                    !isParentRemoved(this.removes, n, this.mirror)) {\r\n                    pushAdd(n);\r\n                }\r\n                else if (isAncestorInSet(this.movedSet, n)) {\r\n                    pushAdd(n);\r\n                }\r\n                else {\r\n                    this.droppedSet.add(n);\r\n                }\r\n            }\r\n            let candidate = null;\r\n            while (addList.length) {\r\n                let node = null;\r\n                if (candidate) {\r\n                    const parentId = this.mirror.getId(candidate.value.parentNode);\r\n                    const nextId = getNextId(candidate.value);\r\n                    if (parentId !== -1 && nextId !== -1) {\r\n                        node = candidate;\r\n                    }\r\n                }\r\n                if (!node) {\r\n                    for (let index = addList.length - 1; index >= 0; index--) {\r\n                        const _node = addList.get(index);\r\n                        if (_node) {\r\n                            const parentId = this.mirror.getId(_node.value.parentNode);\r\n                            const nextId = getNextId(_node.value);\r\n                            if (nextId === -1)\r\n                                continue;\r\n                            else if (parentId !== -1) {\r\n                                node = _node;\r\n                                break;\r\n                            }\r\n                            else {\r\n                                const unhandledNode = _node.value;\r\n                                if (unhandledNode.parentNode &&\r\n                                    unhandledNode.parentNode.nodeType ===\r\n                                        Node.DOCUMENT_FRAGMENT_NODE) {\r\n                                    const shadowHost = unhandledNode.parentNode\r\n                                        .host;\r\n                                    const parentId = this.mirror.getId(shadowHost);\r\n                                    if (parentId !== -1) {\r\n                                        node = _node;\r\n                                        break;\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                if (!node) {\r\n                    while (addList.head) {\r\n                        addList.removeNode(addList.head.value);\r\n                    }\r\n                    break;\r\n                }\r\n                candidate = node.previous;\r\n                addList.removeNode(node.value);\r\n                pushAdd(node.value);\r\n            }\r\n            const payload = {\r\n                texts: this.texts\r\n                    .map((text) => ({\r\n                    id: this.mirror.getId(text.node),\r\n                    value: text.value,\r\n                }))\r\n                    .filter((text) => this.mirror.has(text.id)),\r\n                attributes: this.attributes\r\n                    .map((attribute) => ({\r\n                    id: this.mirror.getId(attribute.node),\r\n                    attributes: attribute.attributes,\r\n                }))\r\n                    .filter((attribute) => this.mirror.has(attribute.id)),\r\n                removes: this.removes,\r\n                adds,\r\n            };\r\n            if (!payload.texts.length &&\r\n                !payload.attributes.length &&\r\n                !payload.removes.length &&\r\n                !payload.adds.length) {\r\n                return;\r\n            }\r\n            this.texts = [];\r\n            this.attributes = [];\r\n            this.removes = [];\r\n            this.addedSet = new Set();\r\n            this.movedSet = new Set();\r\n            this.droppedSet = new Set();\r\n            this.movedMap = {};\r\n            this.mutationCb(payload);\r\n        };\r\n        this.processMutation = (m) => {\r\n            if (isIgnored(m.target, this.mirror)) {\r\n                return;\r\n            }\r\n            switch (m.type) {\r\n                case 'characterData': {\r\n                    const value = m.target.textContent;\r\n                    if (!isBlocked(m.target, this.blockClass, this.blockSelector, false) &&\r\n                        value !== m.oldValue) {\r\n                        this.texts.push({\r\n                            value: needMaskingText(m.target, this.maskTextClass, this.maskTextSelector) && value\r\n                                ? this.maskTextFn\r\n                                    ? this.maskTextFn(value)\r\n                                    : value.replace(/[\\S]/g, '*')\r\n                                : value,\r\n                            node: m.target,\r\n                        });\r\n                    }\r\n                    break;\r\n                }\r\n                case 'attributes': {\r\n                    const target = m.target;\r\n                    let value = m.target.getAttribute(m.attributeName);\r\n                    if (m.attributeName === 'value') {\r\n                        value = maskInputValue({\r\n                            maskInputOptions: this.maskInputOptions,\r\n                            tagName: m.target.tagName,\r\n                            type: m.target.getAttribute('type'),\r\n                            value,\r\n                            maskInputFn: this.maskInputFn,\r\n                        });\r\n                    }\r\n                    if (isBlocked(m.target, this.blockClass, this.blockSelector, false) ||\r\n                        value === m.oldValue) {\r\n                        return;\r\n                    }\r\n                    let item = this.attributes.find((a) => a.node === m.target);\r\n                    if (target.tagName === 'IFRAME' &&\r\n                        m.attributeName === 'src' &&\r\n                        !this.keepIframeSrcFn(value)) {\r\n                        if (!target.contentDocument) {\r\n                            m.attributeName = 'rr_src';\r\n                        }\r\n                        else {\r\n                            return;\r\n                        }\r\n                    }\r\n                    if (!item) {\r\n                        item = {\r\n                            node: m.target,\r\n                            attributes: {},\r\n                        };\r\n                        this.attributes.push(item);\r\n                    }\r\n                    if (m.attributeName === 'style') {\r\n                        const old = this.doc.createElement('span');\r\n                        if (m.oldValue) {\r\n                            old.setAttribute('style', m.oldValue);\r\n                        }\r\n                        if (item.attributes.style === undefined ||\r\n                            item.attributes.style === null) {\r\n                            item.attributes.style = {};\r\n                        }\r\n                        const styleObj = item.attributes.style;\r\n                        for (const pname of Array.from(target.style)) {\r\n                            const newValue = target.style.getPropertyValue(pname);\r\n                            const newPriority = target.style.getPropertyPriority(pname);\r\n                            if (newValue !== old.style.getPropertyValue(pname) ||\r\n                                newPriority !== old.style.getPropertyPriority(pname)) {\r\n                                if (newPriority === '') {\r\n                                    styleObj[pname] = newValue;\r\n                                }\r\n                                else {\r\n                                    styleObj[pname] = [newValue, newPriority];\r\n                                }\r\n                            }\r\n                        }\r\n                        for (const pname of Array.from(old.style)) {\r\n                            if (target.style.getPropertyValue(pname) === '') {\r\n                                styleObj[pname] = false;\r\n                            }\r\n                        }\r\n                    }\r\n                    else {\r\n                        item.attributes[m.attributeName] = transformAttribute(this.doc, target.tagName, m.attributeName, value);\r\n                    }\r\n                    break;\r\n                }\r\n                case 'childList': {\r\n                    if (isBlocked(m.target, this.blockClass, this.blockSelector, true))\r\n                        return;\r\n                    m.addedNodes.forEach((n) => this.genAdds(n, m.target));\r\n                    m.removedNodes.forEach((n) => {\r\n                        const nodeId = this.mirror.getId(n);\r\n                        const parentId = isShadowRoot(m.target)\r\n                            ? this.mirror.getId(m.target.host)\r\n                            : this.mirror.getId(m.target);\r\n                        if (isBlocked(m.target, this.blockClass, this.blockSelector, false) ||\r\n                            isIgnored(n, this.mirror) ||\r\n                            !isSerialized(n, this.mirror)) {\r\n                            return;\r\n                        }\r\n                        if (this.addedSet.has(n)) {\r\n                            deepDelete(this.addedSet, n);\r\n                            this.droppedSet.add(n);\r\n                        }\r\n                        else if (this.addedSet.has(m.target) && nodeId === -1) ;\r\n                        else if (isAncestorRemoved(m.target, this.mirror)) ;\r\n                        else if (this.movedSet.has(n) &&\r\n                            this.movedMap[moveKey(nodeId, parentId)]) {\r\n                            deepDelete(this.movedSet, n);\r\n                        }\r\n                        else {\r\n                            this.removes.push({\r\n                                parentId,\r\n                                id: nodeId,\r\n                                isShadow: isShadowRoot(m.target) && isNativeShadowDom(m.target)\r\n                                    ? true\r\n                                    : undefined,\r\n                            });\r\n                        }\r\n                        this.mapRemoves.push(n);\r\n                    });\r\n                    break;\r\n                }\r\n            }\r\n        };\r\n        this.genAdds = (n, target) => {\r\n            if (this.mirror.hasNode(n)) {\r\n                if (isIgnored(n, this.mirror)) {\r\n                    return;\r\n                }\r\n                this.movedSet.add(n);\r\n                let targetId = null;\r\n                if (target && this.mirror.hasNode(target)) {\r\n                    targetId = this.mirror.getId(target);\r\n                }\r\n                if (targetId && targetId !== -1) {\r\n                    this.movedMap[moveKey(this.mirror.getId(n), targetId)] = true;\r\n                }\r\n            }\r\n            else {\r\n                this.addedSet.add(n);\r\n                this.droppedSet.delete(n);\r\n            }\r\n            if (!isBlocked(n, this.blockClass, this.blockSelector, false))\r\n                n.childNodes.forEach((childN) => this.genAdds(childN));\r\n        };\r\n    }\r\n    init(options) {\r\n        [\r\n            'mutationCb',\r\n            'blockClass',\r\n            'blockSelector',\r\n            'maskTextClass',\r\n            'maskTextSelector',\r\n            'inlineStylesheet',\r\n            'maskInputOptions',\r\n            'maskTextFn',\r\n            'maskInputFn',\r\n            'keepIframeSrcFn',\r\n            'recordCanvas',\r\n            'inlineImages',\r\n            'slimDOMOptions',\r\n            'dataURLOptions',\r\n            'doc',\r\n            'mirror',\r\n            'iframeManager',\r\n            'stylesheetManager',\r\n            'shadowDomManager',\r\n            'canvasManager',\r\n        ].forEach((key) => {\r\n            this[key] = options[key];\r\n        });\r\n    }\r\n    freeze() {\r\n        this.frozen = true;\r\n        this.canvasManager.freeze();\r\n    }\r\n    unfreeze() {\r\n        this.frozen = false;\r\n        this.canvasManager.unfreeze();\r\n        this.emit();\r\n    }\r\n    isFrozen() {\r\n        return this.frozen;\r\n    }\r\n    lock() {\r\n        this.locked = true;\r\n        this.canvasManager.lock();\r\n    }\r\n    unlock() {\r\n        this.locked = false;\r\n        this.canvasManager.unlock();\r\n        this.emit();\r\n    }\r\n    reset() {\r\n        this.shadowDomManager.reset();\r\n        this.canvasManager.reset();\r\n    }\r\n}\r\nfunction deepDelete(addsSet, n) {\r\n    addsSet.delete(n);\r\n    n.childNodes.forEach((childN) => deepDelete(addsSet, childN));\r\n}\r\nfunction isParentRemoved(removes, n, mirror) {\r\n    if (removes.length === 0)\r\n        return false;\r\n    return _isParentRemoved(removes, n, mirror);\r\n}\r\nfunction _isParentRemoved(removes, n, mirror) {\r\n    const { parentNode } = n;\r\n    if (!parentNode) {\r\n        return false;\r\n    }\r\n    const parentId = mirror.getId(parentNode);\r\n    if (removes.some((r) => r.id === parentId)) {\r\n        return true;\r\n    }\r\n    return _isParentRemoved(removes, parentNode, mirror);\r\n}\r\nfunction isAncestorInSet(set, n) {\r\n    if (set.size === 0)\r\n        return false;\r\n    return _isAncestorInSet(set, n);\r\n}\r\nfunction _isAncestorInSet(set, n) {\r\n    const { parentNode } = n;\r\n    if (!parentNode) {\r\n        return false;\r\n    }\r\n    if (set.has(parentNode)) {\r\n        return true;\r\n    }\r\n    return _isAncestorInSet(set, parentNode);\r\n}\n\nexport { MutationBuffer as default };\n","import { maskInputValue } from '../../../rrweb-snapshot/es/rrweb-snapshot.js';\nimport { on, throttle, isBlocked, getWindowHeight, getWindowWidth, hookSetter, patch, isTouchEvent } from '../utils.js';\nimport { MouseInteractions, IncrementalSource } from '../../../types/dist/types.js';\nimport MutationBuffer from './mutation.js';\n\nconst mutationBuffers = [];\r\nconst isCSSGroupingRuleSupported = typeof CSSGroupingRule !== 'undefined';\r\nconst isCSSMediaRuleSupported = typeof CSSMediaRule !== 'undefined';\r\nconst isCSSSupportsRuleSupported = typeof CSSSupportsRule !== 'undefined';\r\nconst isCSSConditionRuleSupported = typeof CSSConditionRule !== 'undefined';\r\nfunction getEventTarget(event) {\r\n    try {\r\n        if ('composedPath' in event) {\r\n            const path = event.composedPath();\r\n            if (path.length) {\r\n                return path[0];\r\n            }\r\n        }\r\n        else if ('path' in event && event.path.length) {\r\n            return event.path[0];\r\n        }\r\n        return event.target;\r\n    }\r\n    catch (_a) {\r\n        return event.target;\r\n    }\r\n}\r\nfunction initMutationObserver(options, rootEl) {\r\n    var _a, _b;\r\n    const mutationBuffer = new MutationBuffer();\r\n    mutationBuffers.push(mutationBuffer);\r\n    mutationBuffer.init(options);\r\n    let mutationObserverCtor = window.MutationObserver ||\r\n        window.__rrMutationObserver;\r\n    const angularZoneSymbol = (_b = (_a = window === null || window === void 0 ? void 0 : window.Zone) === null || _a === void 0 ? void 0 : _a.__symbol__) === null || _b === void 0 ? void 0 : _b.call(_a, 'MutationObserver');\r\n    if (angularZoneSymbol &&\r\n        window[angularZoneSymbol]) {\r\n        mutationObserverCtor = window[angularZoneSymbol];\r\n    }\r\n    const observer = new mutationObserverCtor(mutationBuffer.processMutations.bind(mutationBuffer));\r\n    observer.observe(rootEl, {\r\n        attributes: true,\r\n        attributeOldValue: true,\r\n        characterData: true,\r\n        characterDataOldValue: true,\r\n        childList: true,\r\n        subtree: true,\r\n    });\r\n    return observer;\r\n}\r\nfunction initMoveObserver({ mousemoveCb, sampling, doc, mirror, }) {\r\n    if (sampling.mousemove === false) {\r\n        return () => {\r\n        };\r\n    }\r\n    const threshold = typeof sampling.mousemove === 'number' ? sampling.mousemove : 50;\r\n    const callbackThreshold = typeof sampling.mousemoveCallback === 'number'\r\n        ? sampling.mousemoveCallback\r\n        : 500;\r\n    let positions = [];\r\n    let timeBaseline;\r\n    const wrappedCb = throttle((source) => {\r\n        const totalOffset = Date.now() - timeBaseline;\r\n        mousemoveCb(positions.map((p) => {\r\n            p.timeOffset -= totalOffset;\r\n            return p;\r\n        }), source);\r\n        positions = [];\r\n        timeBaseline = null;\r\n    }, callbackThreshold);\r\n    const updatePosition = throttle((evt) => {\r\n        const target = getEventTarget(evt);\r\n        const { clientX, clientY } = isTouchEvent(evt)\r\n            ? evt.changedTouches[0]\r\n            : evt;\r\n        if (!timeBaseline) {\r\n            timeBaseline = Date.now();\r\n        }\r\n        positions.push({\r\n            x: clientX,\r\n            y: clientY,\r\n            id: mirror.getId(target),\r\n            timeOffset: Date.now() - timeBaseline,\r\n        });\r\n        wrappedCb(typeof DragEvent !== 'undefined' && evt instanceof DragEvent\r\n            ? IncrementalSource.Drag\r\n            : evt instanceof MouseEvent\r\n                ? IncrementalSource.MouseMove\r\n                : IncrementalSource.TouchMove);\r\n    }, threshold, {\r\n        trailing: false,\r\n    });\r\n    const handlers = [\r\n        on('mousemove', updatePosition, doc),\r\n        on('touchmove', updatePosition, doc),\r\n        on('drag', updatePosition, doc),\r\n    ];\r\n    return () => {\r\n        handlers.forEach((h) => h());\r\n    };\r\n}\r\nfunction initMouseInteractionObserver({ mouseInteractionCb, doc, mirror, blockClass, blockSelector, sampling, }) {\r\n    if (sampling.mouseInteraction === false) {\r\n        return () => {\r\n        };\r\n    }\r\n    const disableMap = sampling.mouseInteraction === true ||\r\n        sampling.mouseInteraction === undefined\r\n        ? {}\r\n        : sampling.mouseInteraction;\r\n    const handlers = [];\r\n    const getHandler = (eventKey) => {\r\n        return (event) => {\r\n            const target = getEventTarget(event);\r\n            if (isBlocked(target, blockClass, blockSelector, true)) {\r\n                return;\r\n            }\r\n            const e = isTouchEvent(event) ? event.changedTouches[0] : event;\r\n            if (!e) {\r\n                return;\r\n            }\r\n            const id = mirror.getId(target);\r\n            const { clientX, clientY } = e;\r\n            mouseInteractionCb({\r\n                type: MouseInteractions[eventKey],\r\n                id,\r\n                x: clientX,\r\n                y: clientY,\r\n            });\r\n        };\r\n    };\r\n    Object.keys(MouseInteractions)\r\n        .filter((key) => Number.isNaN(Number(key)) &&\r\n        !key.endsWith('_Departed') &&\r\n        disableMap[key] !== false)\r\n        .forEach((eventKey) => {\r\n        const eventName = eventKey.toLowerCase();\r\n        const handler = getHandler(eventKey);\r\n        handlers.push(on(eventName, handler, doc));\r\n    });\r\n    return () => {\r\n        handlers.forEach((h) => h());\r\n    };\r\n}\r\nfunction initScrollObserver({ scrollCb, doc, mirror, blockClass, blockSelector, sampling, }) {\r\n    const updatePosition = throttle((evt) => {\r\n        const target = getEventTarget(evt);\r\n        if (!target || isBlocked(target, blockClass, blockSelector, true)) {\r\n            return;\r\n        }\r\n        const id = mirror.getId(target);\r\n        if (target === doc) {\r\n            const scrollEl = (doc.scrollingElement || doc.documentElement);\r\n            scrollCb({\r\n                id,\r\n                x: scrollEl.scrollLeft,\r\n                y: scrollEl.scrollTop,\r\n            });\r\n        }\r\n        else {\r\n            scrollCb({\r\n                id,\r\n                x: target.scrollLeft,\r\n                y: target.scrollTop,\r\n            });\r\n        }\r\n    }, sampling.scroll || 100);\r\n    return on('scroll', updatePosition, doc);\r\n}\r\nfunction initViewportResizeObserver({ viewportResizeCb, }) {\r\n    let lastH = -1;\r\n    let lastW = -1;\r\n    const updateDimension = throttle(() => {\r\n        const height = getWindowHeight();\r\n        const width = getWindowWidth();\r\n        if (lastH !== height || lastW !== width) {\r\n            viewportResizeCb({\r\n                width: Number(width),\r\n                height: Number(height),\r\n            });\r\n            lastH = height;\r\n            lastW = width;\r\n        }\r\n    }, 200);\r\n    return on('resize', updateDimension, window);\r\n}\r\nfunction wrapEventWithUserTriggeredFlag(v, enable) {\r\n    const value = Object.assign({}, v);\r\n    if (!enable)\r\n        delete value.userTriggered;\r\n    return value;\r\n}\r\nconst INPUT_TAGS = ['INPUT', 'TEXTAREA', 'SELECT'];\r\nconst lastInputValueMap = new WeakMap();\r\nfunction initInputObserver({ inputCb, doc, mirror, blockClass, blockSelector, ignoreClass, maskInputOptions, maskInputFn, sampling, userTriggeredOnInput, }) {\r\n    function eventHandler(event) {\r\n        let target = getEventTarget(event);\r\n        const userTriggered = event.isTrusted;\r\n        if (target && target.tagName === 'OPTION')\r\n            target = target.parentElement;\r\n        if (!target ||\r\n            !target.tagName ||\r\n            INPUT_TAGS.indexOf(target.tagName) < 0 ||\r\n            isBlocked(target, blockClass, blockSelector, true)) {\r\n            return;\r\n        }\r\n        const type = target.type;\r\n        if (target.classList.contains(ignoreClass)) {\r\n            return;\r\n        }\r\n        let text = target.value;\r\n        let isChecked = false;\r\n        if (type === 'radio' || type === 'checkbox') {\r\n            isChecked = target.checked;\r\n        }\r\n        else if (maskInputOptions[target.tagName.toLowerCase()] ||\r\n            maskInputOptions[type]) {\r\n            text = maskInputValue({\r\n                maskInputOptions,\r\n                tagName: target.tagName,\r\n                type,\r\n                value: text,\r\n                maskInputFn,\r\n            });\r\n        }\r\n        cbWithDedup(target, wrapEventWithUserTriggeredFlag({ text, isChecked, userTriggered }, userTriggeredOnInput));\r\n        const name = target.name;\r\n        if (type === 'radio' && name && isChecked) {\r\n            doc\r\n                .querySelectorAll(`input[type=\"radio\"][name=\"${name}\"]`)\r\n                .forEach((el) => {\r\n                if (el !== target) {\r\n                    cbWithDedup(el, wrapEventWithUserTriggeredFlag({\r\n                        text: el.value,\r\n                        isChecked: !isChecked,\r\n                        userTriggered: false,\r\n                    }, userTriggeredOnInput));\r\n                }\r\n            });\r\n        }\r\n    }\r\n    function cbWithDedup(target, v) {\r\n        const lastInputValue = lastInputValueMap.get(target);\r\n        if (!lastInputValue ||\r\n            lastInputValue.text !== v.text ||\r\n            lastInputValue.isChecked !== v.isChecked) {\r\n            lastInputValueMap.set(target, v);\r\n            const id = mirror.getId(target);\r\n            inputCb(Object.assign(Object.assign({}, v), { id }));\r\n        }\r\n    }\r\n    const events = sampling.input === 'last' ? ['change'] : ['input', 'change'];\r\n    const handlers = events.map((eventName) => on(eventName, eventHandler, doc));\r\n    const currentWindow = doc.defaultView;\r\n    if (!currentWindow) {\r\n        return () => {\r\n            handlers.forEach((h) => h());\r\n        };\r\n    }\r\n    const propertyDescriptor = currentWindow.Object.getOwnPropertyDescriptor(currentWindow.HTMLInputElement.prototype, 'value');\r\n    const hookProperties = [\r\n        [currentWindow.HTMLInputElement.prototype, 'value'],\r\n        [currentWindow.HTMLInputElement.prototype, 'checked'],\r\n        [currentWindow.HTMLSelectElement.prototype, 'value'],\r\n        [currentWindow.HTMLTextAreaElement.prototype, 'value'],\r\n        [currentWindow.HTMLSelectElement.prototype, 'selectedIndex'],\r\n        [currentWindow.HTMLOptionElement.prototype, 'selected'],\r\n    ];\r\n    if (propertyDescriptor && propertyDescriptor.set) {\r\n        handlers.push(...hookProperties.map((p) => hookSetter(p[0], p[1], {\r\n            set() {\r\n                eventHandler({ target: this });\r\n            },\r\n        }, false, currentWindow)));\r\n    }\r\n    return () => {\r\n        handlers.forEach((h) => h());\r\n    };\r\n}\r\nfunction getNestedCSSRulePositions(rule) {\r\n    const positions = [];\r\n    function recurse(childRule, pos) {\r\n        if ((isCSSGroupingRuleSupported &&\r\n            childRule.parentRule instanceof CSSGroupingRule) ||\r\n            (isCSSMediaRuleSupported &&\r\n                childRule.parentRule instanceof CSSMediaRule) ||\r\n            (isCSSSupportsRuleSupported &&\r\n                childRule.parentRule instanceof CSSSupportsRule) ||\r\n            (isCSSConditionRuleSupported &&\r\n                childRule.parentRule instanceof CSSConditionRule)) {\r\n            const rules = Array.from(childRule.parentRule.cssRules);\r\n            const index = rules.indexOf(childRule);\r\n            pos.unshift(index);\r\n        }\r\n        else if (childRule.parentStyleSheet) {\r\n            const rules = Array.from(childRule.parentStyleSheet.cssRules);\r\n            const index = rules.indexOf(childRule);\r\n            pos.unshift(index);\r\n        }\r\n        return pos;\r\n    }\r\n    return recurse(rule, positions);\r\n}\r\nfunction getIdAndStyleId(sheet, mirror, styleMirror) {\r\n    let id, styleId;\r\n    if (!sheet)\r\n        return {};\r\n    if (sheet.ownerNode)\r\n        id = mirror.getId(sheet.ownerNode);\r\n    else\r\n        styleId = styleMirror.getId(sheet);\r\n    return {\r\n        styleId,\r\n        id,\r\n    };\r\n}\r\nfunction initStyleSheetObserver({ styleSheetRuleCb, mirror, stylesheetManager }, { win }) {\r\n    const insertRule = win.CSSStyleSheet.prototype.insertRule;\r\n    win.CSSStyleSheet.prototype.insertRule = function (rule, index) {\r\n        const { id, styleId } = getIdAndStyleId(this, mirror, stylesheetManager.styleMirror);\r\n        if ((id && id !== -1) || (styleId && styleId !== -1)) {\r\n            styleSheetRuleCb({\r\n                id,\r\n                styleId,\r\n                adds: [{ rule, index }],\r\n            });\r\n        }\r\n        return insertRule.apply(this, [rule, index]);\r\n    };\r\n    const deleteRule = win.CSSStyleSheet.prototype.deleteRule;\r\n    win.CSSStyleSheet.prototype.deleteRule = function (index) {\r\n        const { id, styleId } = getIdAndStyleId(this, mirror, stylesheetManager.styleMirror);\r\n        if ((id && id !== -1) || (styleId && styleId !== -1)) {\r\n            styleSheetRuleCb({\r\n                id,\r\n                styleId,\r\n                removes: [{ index }],\r\n            });\r\n        }\r\n        return deleteRule.apply(this, [index]);\r\n    };\r\n    let replace;\r\n    if (win.CSSStyleSheet.prototype.replace) {\r\n        replace = win.CSSStyleSheet.prototype.replace;\r\n        win.CSSStyleSheet.prototype.replace = function (text) {\r\n            const { id, styleId } = getIdAndStyleId(this, mirror, stylesheetManager.styleMirror);\r\n            if ((id && id !== -1) || (styleId && styleId !== -1)) {\r\n                styleSheetRuleCb({\r\n                    id,\r\n                    styleId,\r\n                    replace: text,\r\n                });\r\n            }\r\n            return replace.apply(this, [text]);\r\n        };\r\n    }\r\n    let replaceSync;\r\n    if (win.CSSStyleSheet.prototype.replaceSync) {\r\n        replaceSync = win.CSSStyleSheet.prototype.replaceSync;\r\n        win.CSSStyleSheet.prototype.replaceSync = function (text) {\r\n            const { id, styleId } = getIdAndStyleId(this, mirror, stylesheetManager.styleMirror);\r\n            if ((id && id !== -1) || (styleId && styleId !== -1)) {\r\n                styleSheetRuleCb({\r\n                    id,\r\n                    styleId,\r\n                    replaceSync: text,\r\n                });\r\n            }\r\n            return replaceSync.apply(this, [text]);\r\n        };\r\n    }\r\n    const supportedNestedCSSRuleTypes = {};\r\n    if (isCSSGroupingRuleSupported) {\r\n        supportedNestedCSSRuleTypes.CSSGroupingRule = win.CSSGroupingRule;\r\n    }\r\n    else {\r\n        if (isCSSMediaRuleSupported) {\r\n            supportedNestedCSSRuleTypes.CSSMediaRule = win.CSSMediaRule;\r\n        }\r\n        if (isCSSConditionRuleSupported) {\r\n            supportedNestedCSSRuleTypes.CSSConditionRule = win.CSSConditionRule;\r\n        }\r\n        if (isCSSSupportsRuleSupported) {\r\n            supportedNestedCSSRuleTypes.CSSSupportsRule = win.CSSSupportsRule;\r\n        }\r\n    }\r\n    const unmodifiedFunctions = {};\r\n    Object.entries(supportedNestedCSSRuleTypes).forEach(([typeKey, type]) => {\r\n        unmodifiedFunctions[typeKey] = {\r\n            insertRule: type.prototype.insertRule,\r\n            deleteRule: type.prototype.deleteRule,\r\n        };\r\n        type.prototype.insertRule = function (rule, index) {\r\n            const { id, styleId } = getIdAndStyleId(this.parentStyleSheet, mirror, stylesheetManager.styleMirror);\r\n            if ((id && id !== -1) || (styleId && styleId !== -1)) {\r\n                styleSheetRuleCb({\r\n                    id,\r\n                    styleId,\r\n                    adds: [\r\n                        {\r\n                            rule,\r\n                            index: [\r\n                                ...getNestedCSSRulePositions(this),\r\n                                index || 0,\r\n                            ],\r\n                        },\r\n                    ],\r\n                });\r\n            }\r\n            return unmodifiedFunctions[typeKey].insertRule.apply(this, [rule, index]);\r\n        };\r\n        type.prototype.deleteRule = function (index) {\r\n            const { id, styleId } = getIdAndStyleId(this.parentStyleSheet, mirror, stylesheetManager.styleMirror);\r\n            if ((id && id !== -1) || (styleId && styleId !== -1)) {\r\n                styleSheetRuleCb({\r\n                    id,\r\n                    styleId,\r\n                    removes: [\r\n                        { index: [...getNestedCSSRulePositions(this), index] },\r\n                    ],\r\n                });\r\n            }\r\n            return unmodifiedFunctions[typeKey].deleteRule.apply(this, [index]);\r\n        };\r\n    });\r\n    return () => {\r\n        win.CSSStyleSheet.prototype.insertRule = insertRule;\r\n        win.CSSStyleSheet.prototype.deleteRule = deleteRule;\r\n        replace && (win.CSSStyleSheet.prototype.replace = replace);\r\n        replaceSync && (win.CSSStyleSheet.prototype.replaceSync = replaceSync);\r\n        Object.entries(supportedNestedCSSRuleTypes).forEach(([typeKey, type]) => {\r\n            type.prototype.insertRule = unmodifiedFunctions[typeKey].insertRule;\r\n            type.prototype.deleteRule = unmodifiedFunctions[typeKey].deleteRule;\r\n        });\r\n    };\r\n}\r\nfunction initAdoptedStyleSheetObserver({ mirror, stylesheetManager, }, host) {\r\n    var _a, _b, _c;\r\n    let hostId = null;\r\n    if (host.nodeName === '#document')\r\n        hostId = mirror.getId(host);\r\n    else\r\n        hostId = mirror.getId(host.host);\r\n    const patchTarget = host.nodeName === '#document'\r\n        ? (_a = host.defaultView) === null || _a === void 0 ? void 0 : _a.Document\r\n        : (_c = (_b = host.ownerDocument) === null || _b === void 0 ? void 0 : _b.defaultView) === null || _c === void 0 ? void 0 : _c.ShadowRoot;\r\n    const originalPropertyDescriptor = Object.getOwnPropertyDescriptor(patchTarget === null || patchTarget === void 0 ? void 0 : patchTarget.prototype, 'adoptedStyleSheets');\r\n    if (hostId === null ||\r\n        hostId === -1 ||\r\n        !patchTarget ||\r\n        !originalPropertyDescriptor)\r\n        return () => {\r\n        };\r\n    Object.defineProperty(host, 'adoptedStyleSheets', {\r\n        configurable: originalPropertyDescriptor.configurable,\r\n        enumerable: originalPropertyDescriptor.enumerable,\r\n        get() {\r\n            var _a;\r\n            return (_a = originalPropertyDescriptor.get) === null || _a === void 0 ? void 0 : _a.call(this);\r\n        },\r\n        set(sheets) {\r\n            var _a;\r\n            const result = (_a = originalPropertyDescriptor.set) === null || _a === void 0 ? void 0 : _a.call(this, sheets);\r\n            if (hostId !== null && hostId !== -1) {\r\n                try {\r\n                    stylesheetManager.adoptStyleSheets(sheets, hostId);\r\n                }\r\n                catch (e) {\r\n                }\r\n            }\r\n            return result;\r\n        },\r\n    });\r\n    return () => {\r\n        Object.defineProperty(host, 'adoptedStyleSheets', {\r\n            configurable: originalPropertyDescriptor.configurable,\r\n            enumerable: originalPropertyDescriptor.enumerable,\r\n            get: originalPropertyDescriptor.get,\r\n            set: originalPropertyDescriptor.set,\r\n        });\r\n    };\r\n}\r\nfunction initStyleDeclarationObserver({ styleDeclarationCb, mirror, ignoreCSSAttributes, stylesheetManager, }, { win }) {\r\n    const setProperty = win.CSSStyleDeclaration.prototype.setProperty;\r\n    win.CSSStyleDeclaration.prototype.setProperty = function (property, value, priority) {\r\n        var _a;\r\n        if (ignoreCSSAttributes.has(property)) {\r\n            return setProperty.apply(this, [property, value, priority]);\r\n        }\r\n        const { id, styleId } = getIdAndStyleId((_a = this.parentRule) === null || _a === void 0 ? void 0 : _a.parentStyleSheet, mirror, stylesheetManager.styleMirror);\r\n        if ((id && id !== -1) || (styleId && styleId !== -1)) {\r\n            styleDeclarationCb({\r\n                id,\r\n                styleId,\r\n                set: {\r\n                    property,\r\n                    value,\r\n                    priority,\r\n                },\r\n                index: getNestedCSSRulePositions(this.parentRule),\r\n            });\r\n        }\r\n        return setProperty.apply(this, [property, value, priority]);\r\n    };\r\n    const removeProperty = win.CSSStyleDeclaration.prototype.removeProperty;\r\n    win.CSSStyleDeclaration.prototype.removeProperty = function (property) {\r\n        var _a;\r\n        if (ignoreCSSAttributes.has(property)) {\r\n            return removeProperty.apply(this, [property]);\r\n        }\r\n        const { id, styleId } = getIdAndStyleId((_a = this.parentRule) === null || _a === void 0 ? void 0 : _a.parentStyleSheet, mirror, stylesheetManager.styleMirror);\r\n        if ((id && id !== -1) || (styleId && styleId !== -1)) {\r\n            styleDeclarationCb({\r\n                id,\r\n                styleId,\r\n                remove: {\r\n                    property,\r\n                },\r\n                index: getNestedCSSRulePositions(this.parentRule),\r\n            });\r\n        }\r\n        return removeProperty.apply(this, [property]);\r\n    };\r\n    return () => {\r\n        win.CSSStyleDeclaration.prototype.setProperty = setProperty;\r\n        win.CSSStyleDeclaration.prototype.removeProperty = removeProperty;\r\n    };\r\n}\r\nfunction initMediaInteractionObserver({ mediaInteractionCb, blockClass, blockSelector, mirror, sampling, }) {\r\n    const handler = (type) => throttle((event) => {\r\n        const target = getEventTarget(event);\r\n        if (!target ||\r\n            isBlocked(target, blockClass, blockSelector, true)) {\r\n            return;\r\n        }\r\n        const { currentTime, volume, muted, playbackRate, } = target;\r\n        mediaInteractionCb({\r\n            type,\r\n            id: mirror.getId(target),\r\n            currentTime,\r\n            volume,\r\n            muted,\r\n            playbackRate,\r\n        });\r\n    }, sampling.media || 500);\r\n    const handlers = [\r\n        on('play', handler(0)),\r\n        on('pause', handler(1)),\r\n        on('seeked', handler(2)),\r\n        on('volumechange', handler(3)),\r\n        on('ratechange', handler(4)),\r\n    ];\r\n    return () => {\r\n        handlers.forEach((h) => h());\r\n    };\r\n}\r\nfunction initFontObserver({ fontCb, doc }) {\r\n    const win = doc.defaultView;\r\n    if (!win) {\r\n        return () => {\r\n        };\r\n    }\r\n    const handlers = [];\r\n    const fontMap = new WeakMap();\r\n    const originalFontFace = win.FontFace;\r\n    win.FontFace = function FontFace(family, source, descriptors) {\r\n        const fontFace = new originalFontFace(family, source, descriptors);\r\n        fontMap.set(fontFace, {\r\n            family,\r\n            buffer: typeof source !== 'string',\r\n            descriptors,\r\n            fontSource: typeof source === 'string'\r\n                ? source\r\n                : JSON.stringify(Array.from(new Uint8Array(source))),\r\n        });\r\n        return fontFace;\r\n    };\r\n    const restoreHandler = patch(doc.fonts, 'add', function (original) {\r\n        return function (fontFace) {\r\n            setTimeout(() => {\r\n                const p = fontMap.get(fontFace);\r\n                if (p) {\r\n                    fontCb(p);\r\n                    fontMap.delete(fontFace);\r\n                }\r\n            }, 0);\r\n            return original.apply(this, [fontFace]);\r\n        };\r\n    });\r\n    handlers.push(() => {\r\n        win.FontFace = originalFontFace;\r\n    });\r\n    handlers.push(restoreHandler);\r\n    return () => {\r\n        handlers.forEach((h) => h());\r\n    };\r\n}\r\nfunction initSelectionObserver(param) {\r\n    const { doc, mirror, blockClass, blockSelector, selectionCb } = param;\r\n    let collapsed = true;\r\n    const updateSelection = () => {\r\n        const selection = doc.getSelection();\r\n        if (!selection || (collapsed && (selection === null || selection === void 0 ? void 0 : selection.isCollapsed)))\r\n            return;\r\n        collapsed = selection.isCollapsed || false;\r\n        const ranges = [];\r\n        const count = selection.rangeCount || 0;\r\n        for (let i = 0; i < count; i++) {\r\n            const range = selection.getRangeAt(i);\r\n            const { startContainer, startOffset, endContainer, endOffset } = range;\r\n            const blocked = isBlocked(startContainer, blockClass, blockSelector, true) ||\r\n                isBlocked(endContainer, blockClass, blockSelector, true);\r\n            if (blocked)\r\n                continue;\r\n            ranges.push({\r\n                start: mirror.getId(startContainer),\r\n                startOffset,\r\n                end: mirror.getId(endContainer),\r\n                endOffset,\r\n            });\r\n        }\r\n        selectionCb({ ranges });\r\n    };\r\n    updateSelection();\r\n    return on('selectionchange', updateSelection);\r\n}\r\nfunction mergeHooks(o, hooks) {\r\n    const { mutationCb, mousemoveCb, mouseInteractionCb, scrollCb, viewportResizeCb, inputCb, mediaInteractionCb, styleSheetRuleCb, styleDeclarationCb, canvasMutationCb, fontCb, selectionCb, } = o;\r\n    o.mutationCb = (...p) => {\r\n        if (hooks.mutation) {\r\n            hooks.mutation(...p);\r\n        }\r\n        mutationCb(...p);\r\n    };\r\n    o.mousemoveCb = (...p) => {\r\n        if (hooks.mousemove) {\r\n            hooks.mousemove(...p);\r\n        }\r\n        mousemoveCb(...p);\r\n    };\r\n    o.mouseInteractionCb = (...p) => {\r\n        if (hooks.mouseInteraction) {\r\n            hooks.mouseInteraction(...p);\r\n        }\r\n        mouseInteractionCb(...p);\r\n    };\r\n    o.scrollCb = (...p) => {\r\n        if (hooks.scroll) {\r\n            hooks.scroll(...p);\r\n        }\r\n        scrollCb(...p);\r\n    };\r\n    o.viewportResizeCb = (...p) => {\r\n        if (hooks.viewportResize) {\r\n            hooks.viewportResize(...p);\r\n        }\r\n        viewportResizeCb(...p);\r\n    };\r\n    o.inputCb = (...p) => {\r\n        if (hooks.input) {\r\n            hooks.input(...p);\r\n        }\r\n        inputCb(...p);\r\n    };\r\n    o.mediaInteractionCb = (...p) => {\r\n        if (hooks.mediaInteaction) {\r\n            hooks.mediaInteaction(...p);\r\n        }\r\n        mediaInteractionCb(...p);\r\n    };\r\n    o.styleSheetRuleCb = (...p) => {\r\n        if (hooks.styleSheetRule) {\r\n            hooks.styleSheetRule(...p);\r\n        }\r\n        styleSheetRuleCb(...p);\r\n    };\r\n    o.styleDeclarationCb = (...p) => {\r\n        if (hooks.styleDeclaration) {\r\n            hooks.styleDeclaration(...p);\r\n        }\r\n        styleDeclarationCb(...p);\r\n    };\r\n    o.canvasMutationCb = (...p) => {\r\n        if (hooks.canvasMutation) {\r\n            hooks.canvasMutation(...p);\r\n        }\r\n        canvasMutationCb(...p);\r\n    };\r\n    o.fontCb = (...p) => {\r\n        if (hooks.font) {\r\n            hooks.font(...p);\r\n        }\r\n        fontCb(...p);\r\n    };\r\n    o.selectionCb = (...p) => {\r\n        if (hooks.selection) {\r\n            hooks.selection(...p);\r\n        }\r\n        selectionCb(...p);\r\n    };\r\n}\r\nfunction initObservers(o, hooks = {}) {\r\n    const currentWindow = o.doc.defaultView;\r\n    if (!currentWindow) {\r\n        return () => {\r\n        };\r\n    }\r\n    mergeHooks(o, hooks);\r\n    const mutationObserver = initMutationObserver(o, o.doc);\r\n    const mousemoveHandler = initMoveObserver(o);\r\n    const mouseInteractionHandler = initMouseInteractionObserver(o);\r\n    const scrollHandler = initScrollObserver(o);\r\n    const viewportResizeHandler = initViewportResizeObserver(o);\r\n    const inputHandler = initInputObserver(o);\r\n    const mediaInteractionHandler = initMediaInteractionObserver(o);\r\n    const styleSheetObserver = initStyleSheetObserver(o, { win: currentWindow });\r\n    const adoptedStyleSheetObserver = initAdoptedStyleSheetObserver(o, o.doc);\r\n    const styleDeclarationObserver = initStyleDeclarationObserver(o, {\r\n        win: currentWindow,\r\n    });\r\n    const fontObserver = o.collectFonts\r\n        ? initFontObserver(o)\r\n        : () => {\r\n        };\r\n    const selectionObserver = initSelectionObserver(o);\r\n    const pluginHandlers = [];\r\n    for (const plugin of o.plugins) {\r\n        pluginHandlers.push(plugin.observer(plugin.callback, currentWindow, plugin.options));\r\n    }\r\n    return () => {\r\n        mutationBuffers.forEach((b) => b.reset());\r\n        mutationObserver.disconnect();\r\n        mousemoveHandler();\r\n        mouseInteractionHandler();\r\n        scrollHandler();\r\n        viewportResizeHandler();\r\n        inputHandler();\r\n        mediaInteractionHandler();\r\n        styleSheetObserver();\r\n        adoptedStyleSheetObserver();\r\n        styleDeclarationObserver();\r\n        fontObserver();\r\n        selectionObserver();\r\n        pluginHandlers.forEach((h) => h());\r\n    };\r\n}\n\nexport { INPUT_TAGS, initAdoptedStyleSheetObserver, initMutationObserver, initObservers, initScrollObserver, mutationBuffers };\n","class CrossOriginIframeMirror {\r\n    constructor(generateIdFn) {\r\n        this.generateIdFn = generateIdFn;\r\n        this.iframeIdToRemoteIdMap = new WeakMap();\r\n        this.iframeRemoteIdToIdMap = new WeakMap();\r\n    }\r\n    getId(iframe, remoteId, idToRemoteMap, remoteToIdMap) {\r\n        const idToRemoteIdMap = idToRemoteMap || this.getIdToRemoteIdMap(iframe);\r\n        const remoteIdToIdMap = remoteToIdMap || this.getRemoteIdToIdMap(iframe);\r\n        let id = idToRemoteIdMap.get(remoteId);\r\n        if (!id) {\r\n            id = this.generateIdFn();\r\n            idToRemoteIdMap.set(remoteId, id);\r\n            remoteIdToIdMap.set(id, remoteId);\r\n        }\r\n        return id;\r\n    }\r\n    getIds(iframe, remoteId) {\r\n        const idToRemoteIdMap = this.getIdToRemoteIdMap(iframe);\r\n        const remoteIdToIdMap = this.getRemoteIdToIdMap(iframe);\r\n        return remoteId.map((id) => this.getId(iframe, id, idToRemoteIdMap, remoteIdToIdMap));\r\n    }\r\n    getRemoteId(iframe, id, map) {\r\n        const remoteIdToIdMap = map || this.getRemoteIdToIdMap(iframe);\r\n        if (typeof id !== 'number')\r\n            return id;\r\n        const remoteId = remoteIdToIdMap.get(id);\r\n        if (!remoteId)\r\n            return -1;\r\n        return remoteId;\r\n    }\r\n    getRemoteIds(iframe, ids) {\r\n        const remoteIdToIdMap = this.getRemoteIdToIdMap(iframe);\r\n        return ids.map((id) => this.getRemoteId(iframe, id, remoteIdToIdMap));\r\n    }\r\n    reset(iframe) {\r\n        if (!iframe) {\r\n            this.iframeIdToRemoteIdMap = new WeakMap();\r\n            this.iframeRemoteIdToIdMap = new WeakMap();\r\n            return;\r\n        }\r\n        this.iframeIdToRemoteIdMap.delete(iframe);\r\n        this.iframeRemoteIdToIdMap.delete(iframe);\r\n    }\r\n    getIdToRemoteIdMap(iframe) {\r\n        let idToRemoteIdMap = this.iframeIdToRemoteIdMap.get(iframe);\r\n        if (!idToRemoteIdMap) {\r\n            idToRemoteIdMap = new Map();\r\n            this.iframeIdToRemoteIdMap.set(iframe, idToRemoteIdMap);\r\n        }\r\n        return idToRemoteIdMap;\r\n    }\r\n    getRemoteIdToIdMap(iframe) {\r\n        let remoteIdToIdMap = this.iframeRemoteIdToIdMap.get(iframe);\r\n        if (!remoteIdToIdMap) {\r\n            remoteIdToIdMap = new Map();\r\n            this.iframeRemoteIdToIdMap.set(iframe, remoteIdToIdMap);\r\n        }\r\n        return remoteIdToIdMap;\r\n    }\r\n}\n\nexport { CrossOriginIframeMirror as default };\n","import { genId } from '../../../rrweb-snapshot/es/rrweb-snapshot.js';\nimport CrossOriginIframeMirror from './cross-origin-iframe-mirror.js';\nimport { EventType, IncrementalSource } from '../../../types/dist/types.js';\n\nclass IframeManager {\r\n    constructor(options) {\r\n        this.iframes = new WeakMap();\r\n        this.crossOriginIframeMap = new WeakMap();\r\n        this.crossOriginIframeMirror = new CrossOriginIframeMirror(genId);\r\n        this.mutationCb = options.mutationCb;\r\n        this.wrappedEmit = options.wrappedEmit;\r\n        this.stylesheetManager = options.stylesheetManager;\r\n        this.recordCrossOriginIframes = options.recordCrossOriginIframes;\r\n        this.crossOriginIframeStyleMirror = new CrossOriginIframeMirror(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror));\r\n        this.mirror = options.mirror;\r\n        if (this.recordCrossOriginIframes) {\r\n            window.addEventListener('message', this.handleMessage.bind(this));\r\n        }\r\n    }\r\n    addIframe(iframeEl) {\r\n        this.iframes.set(iframeEl, true);\r\n        if (iframeEl.contentWindow)\r\n            this.crossOriginIframeMap.set(iframeEl.contentWindow, iframeEl);\r\n    }\r\n    addLoadListener(cb) {\r\n        this.loadListener = cb;\r\n    }\r\n    attachIframe(iframeEl, childSn) {\r\n        var _a;\r\n        this.mutationCb({\r\n            adds: [\r\n                {\r\n                    parentId: this.mirror.getId(iframeEl),\r\n                    nextId: null,\r\n                    node: childSn,\r\n                },\r\n            ],\r\n            removes: [],\r\n            texts: [],\r\n            attributes: [],\r\n            isAttachIframe: true,\r\n        });\r\n        (_a = this.loadListener) === null || _a === void 0 ? void 0 : _a.call(this, iframeEl);\r\n        if (iframeEl.contentDocument &&\r\n            iframeEl.contentDocument.adoptedStyleSheets &&\r\n            iframeEl.contentDocument.adoptedStyleSheets.length > 0)\r\n            this.stylesheetManager.adoptStyleSheets(iframeEl.contentDocument.adoptedStyleSheets, this.mirror.getId(iframeEl.contentDocument));\r\n    }\r\n    handleMessage(message) {\r\n        if (message.data.type === 'rrweb') {\r\n            const iframeSourceWindow = message.source;\r\n            if (!iframeSourceWindow)\r\n                return;\r\n            const iframeEl = this.crossOriginIframeMap.get(message.source);\r\n            if (!iframeEl)\r\n                return;\r\n            const transformedEvent = this.transformCrossOriginEvent(iframeEl, message.data.event);\r\n            if (transformedEvent)\r\n                this.wrappedEmit(transformedEvent, message.data.isCheckout);\r\n        }\r\n    }\r\n    transformCrossOriginEvent(iframeEl, e) {\r\n        var _a;\r\n        switch (e.type) {\r\n            case EventType.FullSnapshot: {\r\n                this.crossOriginIframeMirror.reset(iframeEl);\r\n                this.crossOriginIframeStyleMirror.reset(iframeEl);\r\n                this.replaceIdOnNode(e.data.node, iframeEl);\r\n                return {\r\n                    timestamp: e.timestamp,\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: {\r\n                        source: IncrementalSource.Mutation,\r\n                        adds: [\r\n                            {\r\n                                parentId: this.mirror.getId(iframeEl),\r\n                                nextId: null,\r\n                                node: e.data.node,\r\n                            },\r\n                        ],\r\n                        removes: [],\r\n                        texts: [],\r\n                        attributes: [],\r\n                        isAttachIframe: true,\r\n                    },\r\n                };\r\n            }\r\n            case EventType.Meta:\r\n            case EventType.Load:\r\n            case EventType.DomContentLoaded: {\r\n                return false;\r\n            }\r\n            case EventType.Plugin: {\r\n                return e;\r\n            }\r\n            case EventType.Custom: {\r\n                this.replaceIds(e.data.payload, iframeEl, ['id', 'parentId', 'previousId', 'nextId']);\r\n                return e;\r\n            }\r\n            case EventType.IncrementalSnapshot: {\r\n                switch (e.data.source) {\r\n                    case IncrementalSource.Mutation: {\r\n                        e.data.adds.forEach((n) => {\r\n                            this.replaceIds(n, iframeEl, [\r\n                                'parentId',\r\n                                'nextId',\r\n                                'previousId',\r\n                            ]);\r\n                            this.replaceIdOnNode(n.node, iframeEl);\r\n                        });\r\n                        e.data.removes.forEach((n) => {\r\n                            this.replaceIds(n, iframeEl, ['parentId', 'id']);\r\n                        });\r\n                        e.data.attributes.forEach((n) => {\r\n                            this.replaceIds(n, iframeEl, ['id']);\r\n                        });\r\n                        e.data.texts.forEach((n) => {\r\n                            this.replaceIds(n, iframeEl, ['id']);\r\n                        });\r\n                        return e;\r\n                    }\r\n                    case IncrementalSource.Drag:\r\n                    case IncrementalSource.TouchMove:\r\n                    case IncrementalSource.MouseMove: {\r\n                        e.data.positions.forEach((p) => {\r\n                            this.replaceIds(p, iframeEl, ['id']);\r\n                        });\r\n                        return e;\r\n                    }\r\n                    case IncrementalSource.ViewportResize: {\r\n                        return false;\r\n                    }\r\n                    case IncrementalSource.MediaInteraction:\r\n                    case IncrementalSource.MouseInteraction:\r\n                    case IncrementalSource.Scroll:\r\n                    case IncrementalSource.CanvasMutation:\r\n                    case IncrementalSource.Input: {\r\n                        this.replaceIds(e.data, iframeEl, ['id']);\r\n                        return e;\r\n                    }\r\n                    case IncrementalSource.StyleSheetRule:\r\n                    case IncrementalSource.StyleDeclaration: {\r\n                        this.replaceIds(e.data, iframeEl, ['id']);\r\n                        this.replaceStyleIds(e.data, iframeEl, ['styleId']);\r\n                        return e;\r\n                    }\r\n                    case IncrementalSource.Font: {\r\n                        return e;\r\n                    }\r\n                    case IncrementalSource.Selection: {\r\n                        e.data.ranges.forEach((range) => {\r\n                            this.replaceIds(range, iframeEl, ['start', 'end']);\r\n                        });\r\n                        return e;\r\n                    }\r\n                    case IncrementalSource.AdoptedStyleSheet: {\r\n                        this.replaceIds(e.data, iframeEl, ['id']);\r\n                        this.replaceStyleIds(e.data, iframeEl, ['styleIds']);\r\n                        (_a = e.data.styles) === null || _a === void 0 ? void 0 : _a.forEach((style) => {\r\n                            this.replaceStyleIds(style, iframeEl, ['styleId']);\r\n                        });\r\n                        return e;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    replace(iframeMirror, obj, iframeEl, keys) {\r\n        for (const key of keys) {\r\n            if (!Array.isArray(obj[key]) && typeof obj[key] !== 'number')\r\n                continue;\r\n            if (Array.isArray(obj[key])) {\r\n                obj[key] = iframeMirror.getIds(iframeEl, obj[key]);\r\n            }\r\n            else {\r\n                obj[key] = iframeMirror.getId(iframeEl, obj[key]);\r\n            }\r\n        }\r\n        return obj;\r\n    }\r\n    replaceIds(obj, iframeEl, keys) {\r\n        return this.replace(this.crossOriginIframeMirror, obj, iframeEl, keys);\r\n    }\r\n    replaceStyleIds(obj, iframeEl, keys) {\r\n        return this.replace(this.crossOriginIframeStyleMirror, obj, iframeEl, keys);\r\n    }\r\n    replaceIdOnNode(node, iframeEl) {\r\n        this.replaceIds(node, iframeEl, ['id']);\r\n        if ('childNodes' in node) {\r\n            node.childNodes.forEach((child) => {\r\n                this.replaceIdOnNode(child, iframeEl);\r\n            });\r\n        }\r\n    }\r\n}\n\nexport { IframeManager };\n","import { initMutationObserver, initScrollObserver, initAdoptedStyleSheetObserver } from './observer.js';\nimport { patch } from '../utils.js';\nimport { isNativeShadowDom } from '../../../rrweb-snapshot/es/rrweb-snapshot.js';\n\nclass ShadowDomManager {\r\n    constructor(options) {\r\n        this.shadowDoms = new WeakSet();\r\n        this.restorePatches = [];\r\n        this.mutationCb = options.mutationCb;\r\n        this.scrollCb = options.scrollCb;\r\n        this.bypassOptions = options.bypassOptions;\r\n        this.mirror = options.mirror;\r\n        const manager = this;\r\n        this.restorePatches.push(patch(Element.prototype, 'attachShadow', function (original) {\r\n            return function (option) {\r\n                const shadowRoot = original.call(this, option);\r\n                if (this.shadowRoot)\r\n                    manager.addShadowRoot(this.shadowRoot, this.ownerDocument);\r\n                return shadowRoot;\r\n            };\r\n        }));\r\n    }\r\n    addShadowRoot(shadowRoot, doc) {\r\n        if (!isNativeShadowDom(shadowRoot))\r\n            return;\r\n        if (this.shadowDoms.has(shadowRoot))\r\n            return;\r\n        this.shadowDoms.add(shadowRoot);\r\n        initMutationObserver(Object.assign(Object.assign({}, this.bypassOptions), { doc, mutationCb: this.mutationCb, mirror: this.mirror, shadowDomManager: this }), shadowRoot);\r\n        initScrollObserver(Object.assign(Object.assign({}, this.bypassOptions), { scrollCb: this.scrollCb, doc: shadowRoot, mirror: this.mirror }));\r\n        setTimeout(() => {\r\n            if (shadowRoot.adoptedStyleSheets &&\r\n                shadowRoot.adoptedStyleSheets.length > 0)\r\n                this.bypassOptions.stylesheetManager.adoptStyleSheets(shadowRoot.adoptedStyleSheets, this.mirror.getId(shadowRoot.host));\r\n            initAdoptedStyleSheetObserver({\r\n                mirror: this.mirror,\r\n                stylesheetManager: this.bypassOptions.stylesheetManager,\r\n            }, shadowRoot);\r\n        }, 0);\r\n    }\r\n    observeAttachShadow(iframeElement) {\r\n        if (iframeElement.contentWindow) {\r\n            const manager = this;\r\n            this.restorePatches.push(patch(iframeElement.contentWindow.HTMLElement.prototype, 'attachShadow', function (original) {\r\n                return function (option) {\r\n                    const shadowRoot = original.call(this, option);\r\n                    if (this.shadowRoot)\r\n                        manager.addShadowRoot(this.shadowRoot, iframeElement.contentDocument);\r\n                    return shadowRoot;\r\n                };\r\n            }));\r\n        }\r\n    }\r\n    reset() {\r\n        this.restorePatches.forEach((restorePatch) => restorePatch());\r\n        this.shadowDoms = new WeakSet();\r\n    }\r\n}\n\nexport { ShadowDomManager };\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\n\nexport { __awaiter, __rest };\n","/*\n * base64-arraybuffer 1.0.1 <https://github.com/niklasvh/base64-arraybuffer>\n * Copyright (c) 2021 Niklas von Hertzen <https://hertzen.com>\n * Released under MIT License\n */\nvar chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n// Use a lookup table to find the index.\nvar lookup = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);\nfor (var i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n}\nvar encode = function (arraybuffer) {\n    var bytes = new Uint8Array(arraybuffer), i, len = bytes.length, base64 = '';\n    for (i = 0; i < len; i += 3) {\n        base64 += chars[bytes[i] >> 2];\n        base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n        base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n        base64 += chars[bytes[i + 2] & 63];\n    }\n    if (len % 3 === 2) {\n        base64 = base64.substring(0, base64.length - 1) + '=';\n    }\n    else if (len % 3 === 1) {\n        base64 = base64.substring(0, base64.length - 2) + '==';\n    }\n    return base64;\n};\nvar decode = function (base64) {\n    var bufferLength = base64.length * 0.75, len = base64.length, i, p = 0, encoded1, encoded2, encoded3, encoded4;\n    if (base64[base64.length - 1] === '=') {\n        bufferLength--;\n        if (base64[base64.length - 2] === '=') {\n            bufferLength--;\n        }\n    }\n    var arraybuffer = new ArrayBuffer(bufferLength), bytes = new Uint8Array(arraybuffer);\n    for (i = 0; i < len; i += 4) {\n        encoded1 = lookup[base64.charCodeAt(i)];\n        encoded2 = lookup[base64.charCodeAt(i + 1)];\n        encoded3 = lookup[base64.charCodeAt(i + 2)];\n        encoded4 = lookup[base64.charCodeAt(i + 3)];\n        bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n        bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n        bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n    return arraybuffer;\n};\n\nexport { decode, encode };\n","import { encode } from './../../../../../../ext/base64-arraybuffer/dist/base64-arraybuffer.es5.js';\n\nconst canvasVarMap = new Map();\r\nfunction variableListFor(ctx, ctor) {\r\n    let contextMap = canvasVarMap.get(ctx);\r\n    if (!contextMap) {\r\n        contextMap = new Map();\r\n        canvasVarMap.set(ctx, contextMap);\r\n    }\r\n    if (!contextMap.has(ctor)) {\r\n        contextMap.set(ctor, []);\r\n    }\r\n    return contextMap.get(ctor);\r\n}\r\nconst saveWebGLVar = (value, win, ctx) => {\r\n    if (!value ||\r\n        !(isInstanceOfWebGLObject(value, win) || typeof value === 'object'))\r\n        return;\r\n    const name = value.constructor.name;\r\n    const list = variableListFor(ctx, name);\r\n    let index = list.indexOf(value);\r\n    if (index === -1) {\r\n        index = list.length;\r\n        list.push(value);\r\n    }\r\n    return index;\r\n};\r\nfunction serializeArg(value, win, ctx) {\r\n    if (value instanceof Array) {\r\n        return value.map((arg) => serializeArg(arg, win, ctx));\r\n    }\r\n    else if (value === null) {\r\n        return value;\r\n    }\r\n    else if (value instanceof Float32Array ||\r\n        value instanceof Float64Array ||\r\n        value instanceof Int32Array ||\r\n        value instanceof Uint32Array ||\r\n        value instanceof Uint8Array ||\r\n        value instanceof Uint16Array ||\r\n        value instanceof Int16Array ||\r\n        value instanceof Int8Array ||\r\n        value instanceof Uint8ClampedArray) {\r\n        const name = value.constructor.name;\r\n        return {\r\n            rr_type: name,\r\n            args: [Object.values(value)],\r\n        };\r\n    }\r\n    else if (value instanceof ArrayBuffer) {\r\n        const name = value.constructor.name;\r\n        const base64 = encode(value);\r\n        return {\r\n            rr_type: name,\r\n            base64,\r\n        };\r\n    }\r\n    else if (value instanceof DataView) {\r\n        const name = value.constructor.name;\r\n        return {\r\n            rr_type: name,\r\n            args: [\r\n                serializeArg(value.buffer, win, ctx),\r\n                value.byteOffset,\r\n                value.byteLength,\r\n            ],\r\n        };\r\n    }\r\n    else if (value instanceof HTMLImageElement) {\r\n        const name = value.constructor.name;\r\n        const { src } = value;\r\n        return {\r\n            rr_type: name,\r\n            src,\r\n        };\r\n    }\r\n    else if (value instanceof HTMLCanvasElement) {\r\n        const name = 'HTMLImageElement';\r\n        const src = value.toDataURL();\r\n        return {\r\n            rr_type: name,\r\n            src,\r\n        };\r\n    }\r\n    else if (value instanceof ImageData) {\r\n        const name = value.constructor.name;\r\n        return {\r\n            rr_type: name,\r\n            args: [serializeArg(value.data, win, ctx), value.width, value.height],\r\n        };\r\n    }\r\n    else if (isInstanceOfWebGLObject(value, win) || typeof value === 'object') {\r\n        const name = value.constructor.name;\r\n        const index = saveWebGLVar(value, win, ctx);\r\n        return {\r\n            rr_type: name,\r\n            index: index,\r\n        };\r\n    }\r\n    return value;\r\n}\r\nconst serializeArgs = (args, win, ctx) => {\r\n    return [...args].map((arg) => serializeArg(arg, win, ctx));\r\n};\r\nconst isInstanceOfWebGLObject = (value, win) => {\r\n    const webGLConstructorNames = [\r\n        'WebGLActiveInfo',\r\n        'WebGLBuffer',\r\n        'WebGLFramebuffer',\r\n        'WebGLProgram',\r\n        'WebGLRenderbuffer',\r\n        'WebGLShader',\r\n        'WebGLShaderPrecisionFormat',\r\n        'WebGLTexture',\r\n        'WebGLUniformLocation',\r\n        'WebGLVertexArrayObject',\r\n        'WebGLVertexArrayObjectOES',\r\n    ];\r\n    const supportedWebGLConstructorNames = webGLConstructorNames.filter((name) => typeof win[name] === 'function');\r\n    return Boolean(supportedWebGLConstructorNames.find((name) => value instanceof win[name]));\r\n};\n\nexport { isInstanceOfWebGLObject, saveWebGLVar, serializeArg, serializeArgs, variableListFor };\n","import { CanvasContext } from '../../../../../types/dist/types.js';\nimport { patch, isBlocked, hookSetter } from '../../../utils.js';\nimport { serializeArgs } from './serialize-args.js';\n\nfunction initCanvas2DMutationObserver(cb, win, blockClass, blockSelector) {\r\n    const handlers = [];\r\n    const props2D = Object.getOwnPropertyNames(win.CanvasRenderingContext2D.prototype);\r\n    for (const prop of props2D) {\r\n        try {\r\n            if (typeof win.CanvasRenderingContext2D.prototype[prop] !== 'function') {\r\n                continue;\r\n            }\r\n            const restoreHandler = patch(win.CanvasRenderingContext2D.prototype, prop, function (original) {\r\n                return function (...args) {\r\n                    if (!isBlocked(this.canvas, blockClass, blockSelector, true)) {\r\n                        setTimeout(() => {\r\n                            const recordArgs = serializeArgs([...args], win, this);\r\n                            cb(this.canvas, {\r\n                                type: CanvasContext['2D'],\r\n                                property: prop,\r\n                                args: recordArgs,\r\n                            });\r\n                        }, 0);\r\n                    }\r\n                    return original.apply(this, args);\r\n                };\r\n            });\r\n            handlers.push(restoreHandler);\r\n        }\r\n        catch (_a) {\r\n            const hookHandler = hookSetter(win.CanvasRenderingContext2D.prototype, prop, {\r\n                set(v) {\r\n                    cb(this.canvas, {\r\n                        type: CanvasContext['2D'],\r\n                        property: prop,\r\n                        args: [v],\r\n                        setter: true,\r\n                    });\r\n                },\r\n            });\r\n            handlers.push(hookHandler);\r\n        }\r\n    }\r\n    return () => {\r\n        handlers.forEach((h) => h());\r\n    };\r\n}\n\nexport { initCanvas2DMutationObserver as default };\n","import { patch, isBlocked } from '../../../utils.js';\n\nfunction initCanvasContextObserver(win, blockClass, blockSelector) {\r\n    const handlers = [];\r\n    try {\r\n        const restoreHandler = patch(win.HTMLCanvasElement.prototype, 'getContext', function (original) {\r\n            return function (contextType, ...args) {\r\n                if (!isBlocked(this, blockClass, blockSelector, true)) {\r\n                    if (!('__context' in this))\r\n                        this.__context = contextType;\r\n                }\r\n                return original.apply(this, [contextType, ...args]);\r\n            };\r\n        });\r\n        handlers.push(restoreHandler);\r\n    }\r\n    catch (_a) {\r\n        console.error('failed to patch HTMLCanvasElement.prototype.getContext');\r\n    }\r\n    return () => {\r\n        handlers.forEach((h) => h());\r\n    };\r\n}\n\nexport { initCanvasContextObserver as default };\n","import { CanvasContext } from '../../../../../types/dist/types.js';\nimport { patch, isBlocked, hookSetter } from '../../../utils.js';\nimport { saveWebGLVar, serializeArgs } from './serialize-args.js';\n\nfunction patchGLPrototype(prototype, type, cb, blockClass, blockSelector, mirror, win) {\r\n    const handlers = [];\r\n    const props = Object.getOwnPropertyNames(prototype);\r\n    for (const prop of props) {\r\n        if ([\r\n            'isContextLost',\r\n            'canvas',\r\n            'drawingBufferWidth',\r\n            'drawingBufferHeight',\r\n        ].includes(prop)) {\r\n            continue;\r\n        }\r\n        try {\r\n            if (typeof prototype[prop] !== 'function') {\r\n                continue;\r\n            }\r\n            const restoreHandler = patch(prototype, prop, function (original) {\r\n                return function (...args) {\r\n                    const result = original.apply(this, args);\r\n                    saveWebGLVar(result, win, this);\r\n                    if (!isBlocked(this.canvas, blockClass, blockSelector, true)) {\r\n                        const recordArgs = serializeArgs([...args], win, this);\r\n                        const mutation = {\r\n                            type,\r\n                            property: prop,\r\n                            args: recordArgs,\r\n                        };\r\n                        cb(this.canvas, mutation);\r\n                    }\r\n                    return result;\r\n                };\r\n            });\r\n            handlers.push(restoreHandler);\r\n        }\r\n        catch (_a) {\r\n            const hookHandler = hookSetter(prototype, prop, {\r\n                set(v) {\r\n                    cb(this.canvas, {\r\n                        type,\r\n                        property: prop,\r\n                        args: [v],\r\n                        setter: true,\r\n                    });\r\n                },\r\n            });\r\n            handlers.push(hookHandler);\r\n        }\r\n    }\r\n    return handlers;\r\n}\r\nfunction initCanvasWebGLMutationObserver(cb, win, blockClass, blockSelector, mirror) {\r\n    const handlers = [];\r\n    handlers.push(...patchGLPrototype(win.WebGLRenderingContext.prototype, CanvasContext.WebGL, cb, blockClass, blockSelector, mirror, win));\r\n    if (typeof win.WebGL2RenderingContext !== 'undefined') {\r\n        handlers.push(...patchGLPrototype(win.WebGL2RenderingContext.prototype, CanvasContext.WebGL2, cb, blockClass, blockSelector, mirror, win));\r\n    }\r\n    return () => {\r\n        handlers.forEach((h) => h());\r\n    };\r\n}\n\nexport { initCanvasWebGLMutationObserver as default };\n","var WorkerClass = null;\n\ntry {\n    var WorkerThreads =\n        typeof module !== 'undefined' && typeof module.require === 'function' && module.require('worker_threads') ||\n        typeof __non_webpack_require__ === 'function' && __non_webpack_require__('worker_threads') ||\n        typeof require === 'function' && require('worker_threads');\n    WorkerClass = WorkerThreads.Worker;\n} catch(e) {} // eslint-disable-line\n\nexport { WorkerClass };\n","import { WorkerClass } from './_rollup-plugin-web-worker-loader__helper__node__WorkerClass.js';\n\nfunction decodeBase64(base64, enableUnicode) {\n    return Buffer.from(base64, 'base64').toString(enableUnicode ? 'utf16' : 'utf8');\n}\n\nfunction createBase64WorkerFactory(base64, sourcemapArg, enableUnicodeArg) {\n    var sourcemap = sourcemapArg === undefined ? null : sourcemapArg;\n    var enableUnicode = enableUnicodeArg === undefined ? false : enableUnicodeArg;\n    var source = decodeBase64(base64, enableUnicode);\n    var start = source.indexOf('\\n', 10) + 1;\n    var body = source.substring(start) + (sourcemap ? '\\/\\/# sourceMappingURL=' + sourcemap : '');\n    return function WorkerFactory(options) {\n        return new WorkerClass(body, Object.assign({}, options, { eval: true }));\n    };\n}\n\nexport { createBase64WorkerFactory };\n","function decodeBase64(base64, enableUnicode) {\n    var binaryString = atob(base64);\n    if (enableUnicode) {\n        var binaryView = new Uint8Array(binaryString.length);\n        for (var i = 0, n = binaryString.length; i < n; ++i) {\n            binaryView[i] = binaryString.charCodeAt(i);\n        }\n        return String.fromCharCode.apply(null, new Uint16Array(binaryView.buffer));\n    }\n    return binaryString;\n}\n\nfunction createURL(base64, sourcemapArg, enableUnicodeArg) {\n    var sourcemap = sourcemapArg === undefined ? null : sourcemapArg;\n    var enableUnicode = enableUnicodeArg === undefined ? false : enableUnicodeArg;\n    var source = decodeBase64(base64, enableUnicode);\n    var start = source.indexOf('\\n', 10) + 1;\n    var body = source.substring(start) + (sourcemap ? '\\/\\/# sourceMappingURL=' + sourcemap : '');\n    var blob = new Blob([body], { type: 'application/javascript' });\n    return URL.createObjectURL(blob);\n}\n\nfunction createBase64WorkerFactory(base64, sourcemapArg, enableUnicodeArg) {\n    var url;\n    return function WorkerFactory(options) {\n        url = url || createURL(base64, sourcemapArg, enableUnicodeArg);\n        return new Worker(url, options);\n    };\n}\n\nexport { createBase64WorkerFactory };\n","var kIsNodeJS = Object.prototype.toString.call(typeof process !== 'undefined' ? process : 0) === '[object process]';\n\nfunction isNodeJS() {\n    return kIsNodeJS;\n}\n\nexport { isNodeJS };\n","import { createBase64WorkerFactory as createBase64WorkerFactory$1 } from './_rollup-plugin-web-worker-loader__helper__node__createBase64WorkerFactory.js';\nimport { createBase64WorkerFactory as createBase64WorkerFactory$2 } from './_rollup-plugin-web-worker-loader__helper__browser__createBase64WorkerFactory.js';\nimport { isNodeJS } from './_rollup-plugin-web-worker-loader__helper__auto__isNodeJS.js';\n\nfunction createBase64WorkerFactory(base64, sourcemapArg, enableUnicodeArg) {\n    if (isNodeJS()) {\n        return createBase64WorkerFactory$1(base64, sourcemapArg, enableUnicodeArg);\n    }\n    return createBase64WorkerFactory$2(base64, sourcemapArg, enableUnicodeArg);\n}\n\nexport { createBase64WorkerFactory };\n","import { createBase64WorkerFactory } from './_rollup-plugin-web-worker-loader__helper__auto__createBase64WorkerFactory.js';\n\nvar WorkerFactory = createBase64WorkerFactory('Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICAgJ3VzZSBzdHJpY3QnOwoKICAgIC8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KICAgIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLg0KDQogICAgUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55DQogICAgcHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLg0KDQogICAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEgNCiAgICBSRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkNCiAgICBBTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsDQogICAgSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NDQogICAgTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1INCiAgICBPVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SDQogICAgUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS4NCiAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqLw0KDQogICAgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikgew0KICAgICAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH0NCiAgICAgICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7DQogICAgICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvclsidGhyb3ciXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfQ0KICAgICAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpOw0KICAgICAgICB9KTsNCiAgICB9CgogICAgLyoKICAgICAqIGJhc2U2NC1hcnJheWJ1ZmZlciAxLjAuMSA8aHR0cHM6Ly9naXRodWIuY29tL25pa2xhc3ZoL2Jhc2U2NC1hcnJheWJ1ZmZlcj4KICAgICAqIENvcHlyaWdodCAoYykgMjAyMSBOaWtsYXMgdm9uIEhlcnR6ZW4gPGh0dHBzOi8vaGVydHplbi5jb20+CiAgICAgKiBSZWxlYXNlZCB1bmRlciBNSVQgTGljZW5zZQogICAgICovCiAgICB2YXIgY2hhcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyc7CiAgICAvLyBVc2UgYSBsb29rdXAgdGFibGUgdG8gZmluZCB0aGUgaW5kZXguCiAgICB2YXIgbG9va3VwID0gdHlwZW9mIFVpbnQ4QXJyYXkgPT09ICd1bmRlZmluZWQnID8gW10gOiBuZXcgVWludDhBcnJheSgyNTYpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGFycy5sZW5ndGg7IGkrKykgewogICAgICAgIGxvb2t1cFtjaGFycy5jaGFyQ29kZUF0KGkpXSA9IGk7CiAgICB9CiAgICB2YXIgZW5jb2RlID0gZnVuY3Rpb24gKGFycmF5YnVmZmVyKSB7CiAgICAgICAgdmFyIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlidWZmZXIpLCBpLCBsZW4gPSBieXRlcy5sZW5ndGgsIGJhc2U2NCA9ICcnOwogICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkgKz0gMykgewogICAgICAgICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaV0gPj4gMl07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1soKGJ5dGVzW2ldICYgMykgPDwgNCkgfCAoYnl0ZXNbaSArIDFdID4+IDQpXTsKICAgICAgICAgICAgYmFzZTY0ICs9IGNoYXJzWygoYnl0ZXNbaSArIDFdICYgMTUpIDw8IDIpIHwgKGJ5dGVzW2kgKyAyXSA+PiA2KV07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1tieXRlc1tpICsgMl0gJiA2M107CiAgICAgICAgfQogICAgICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgJz0nOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgJz09JzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGJhc2U2NDsKICAgIH07CgogICAgY29uc3QgbGFzdEJsb2JNYXAgPSBuZXcgTWFwKCk7DQogICAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gbmV3IE1hcCgpOw0KICAgIGZ1bmN0aW9uIGdldFRyYW5zcGFyZW50QmxvYkZvcih3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucykgew0KICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkgew0KICAgICAgICAgICAgY29uc3QgaWQgPSBgJHt3aWR0aH0tJHtoZWlnaHR9YDsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgaWYgKHRyYW5zcGFyZW50QmxvYk1hcC5oYXMoaWQpKQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNwYXJlbnRCbG9iTWFwLmdldChpZCk7DQogICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsNCiAgICAgICAgICAgICAgICBvZmZzY3JlZW4uZ2V0Q29udGV4dCgnMmQnKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0geWllbGQgYmxvYi5hcnJheUJ1ZmZlcigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7DQogICAgICAgICAgICAgICAgdHJhbnNwYXJlbnRCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICByZXR1cm4gYmFzZTY0Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgcmV0dXJuICcnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICB9DQogICAgY29uc3Qgd29ya2VyID0gc2VsZjsNCiAgICB3b3JrZXIub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHsNCiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgY29uc3QgeyBpZCwgYml0bWFwLCB3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucyB9ID0gZS5kYXRhOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zKTsNCiAgICAgICAgICAgICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IG9mZnNjcmVlbi5nZXRDb250ZXh0KCcyZCcpOw0KICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoYml0bWFwLCAwLCAwKTsNCiAgICAgICAgICAgICAgICBiaXRtYXAuY2xvc2UoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBibG9iLnR5cGU7DQogICAgICAgICAgICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSB5aWVsZCBibG9iLmFycmF5QnVmZmVyKCk7DQogICAgICAgICAgICAgICAgY29uc3QgYmFzZTY0ID0gZW5jb2RlKGFycmF5QnVmZmVyKTsNCiAgICAgICAgICAgICAgICBpZiAoIWxhc3RCbG9iTWFwLmhhcyhpZCkgJiYgKHlpZWxkIHRyYW5zcGFyZW50QmFzZTY0KSA9PT0gYmFzZTY0KSB7DQogICAgICAgICAgICAgICAgICAgIGxhc3RCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdvcmtlci5wb3N0TWVzc2FnZSh7IGlkIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7DQogICAgICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHsNCiAgICAgICAgICAgICAgICAgICAgaWQsDQogICAgICAgICAgICAgICAgICAgIHR5cGUsDQogICAgICAgICAgICAgICAgICAgIGJhc2U2NCwNCiAgICAgICAgICAgICAgICAgICAgd2lkdGgsDQogICAgICAgICAgICAgICAgICAgIGhlaWdodCwNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfTsKCn0pKCk7Cgo=', null, false);\n/* eslint-enable */\n\nexport { WorkerFactory as default };\n","import { __rest, __awaiter } from './../../../../../../ext/tslib/tslib.es6.js';\nimport { isBlocked } from '../../../utils.js';\nimport { CanvasContext } from '../../../../../types/dist/types.js';\nimport initCanvas2DMutationObserver from './2d.js';\nimport initCanvasContextObserver from './canvas.js';\nimport initCanvasWebGLMutationObserver from './webgl.js';\nimport WorkerFactory from '../../../../../../_virtual/image-bitmap-data-url-worker.js';\n\nclass CanvasManager {\r\n    constructor(options) {\r\n        this.pendingCanvasMutations = new Map();\r\n        this.rafStamps = { latestId: 0, invokeId: null };\r\n        this.frozen = false;\r\n        this.locked = false;\r\n        this.processMutation = (target, mutation) => {\r\n            const newFrame = this.rafStamps.invokeId &&\r\n                this.rafStamps.latestId !== this.rafStamps.invokeId;\r\n            if (newFrame || !this.rafStamps.invokeId)\r\n                this.rafStamps.invokeId = this.rafStamps.latestId;\r\n            if (!this.pendingCanvasMutations.has(target)) {\r\n                this.pendingCanvasMutations.set(target, []);\r\n            }\r\n            this.pendingCanvasMutations.get(target).push(mutation);\r\n        };\r\n        const { sampling = 'all', win, blockClass, blockSelector, recordCanvas, dataURLOptions, } = options;\r\n        this.mutationCb = options.mutationCb;\r\n        this.mirror = options.mirror;\r\n        if (recordCanvas && sampling === 'all')\r\n            this.initCanvasMutationObserver(win, blockClass, blockSelector);\r\n        if (recordCanvas && typeof sampling === 'number')\r\n            this.initCanvasFPSObserver(sampling, win, blockClass, blockSelector, {\r\n                dataURLOptions,\r\n            });\r\n    }\r\n    reset() {\r\n        this.pendingCanvasMutations.clear();\r\n        this.resetObservers && this.resetObservers();\r\n    }\r\n    freeze() {\r\n        this.frozen = true;\r\n    }\r\n    unfreeze() {\r\n        this.frozen = false;\r\n    }\r\n    lock() {\r\n        this.locked = true;\r\n    }\r\n    unlock() {\r\n        this.locked = false;\r\n    }\r\n    initCanvasFPSObserver(fps, win, blockClass, blockSelector, options) {\r\n        const canvasContextReset = initCanvasContextObserver(win, blockClass, blockSelector);\r\n        const snapshotInProgressMap = new Map();\r\n        const worker = new WorkerFactory();\r\n        worker.onmessage = (e) => {\r\n            const { id } = e.data;\r\n            snapshotInProgressMap.set(id, false);\r\n            if (!('base64' in e.data))\r\n                return;\r\n            const { base64, type, width, height } = e.data;\r\n            this.mutationCb({\r\n                id,\r\n                type: CanvasContext['2D'],\r\n                commands: [\r\n                    {\r\n                        property: 'clearRect',\r\n                        args: [0, 0, width, height],\r\n                    },\r\n                    {\r\n                        property: 'drawImage',\r\n                        args: [\r\n                            {\r\n                                rr_type: 'ImageBitmap',\r\n                                args: [\r\n                                    {\r\n                                        rr_type: 'Blob',\r\n                                        data: [{ rr_type: 'ArrayBuffer', base64 }],\r\n                                        type,\r\n                                    },\r\n                                ],\r\n                            },\r\n                            0,\r\n                            0,\r\n                        ],\r\n                    },\r\n                ],\r\n            });\r\n        };\r\n        const timeBetweenSnapshots = 1000 / fps;\r\n        let lastSnapshotTime = 0;\r\n        let rafId;\r\n        const getCanvas = () => {\r\n            const matchedCanvas = [];\r\n            win.document.querySelectorAll('canvas').forEach((canvas) => {\r\n                if (!isBlocked(canvas, blockClass, blockSelector, true)) {\r\n                    matchedCanvas.push(canvas);\r\n                }\r\n            });\r\n            return matchedCanvas;\r\n        };\r\n        const takeCanvasSnapshots = (timestamp) => {\r\n            if (lastSnapshotTime &&\r\n                timestamp - lastSnapshotTime < timeBetweenSnapshots) {\r\n                rafId = requestAnimationFrame(takeCanvasSnapshots);\r\n                return;\r\n            }\r\n            lastSnapshotTime = timestamp;\r\n            getCanvas()\r\n                .forEach((canvas) => __awaiter(this, void 0, void 0, function* () {\r\n                var _a;\r\n                const id = this.mirror.getId(canvas);\r\n                if (snapshotInProgressMap.get(id))\r\n                    return;\r\n                snapshotInProgressMap.set(id, true);\r\n                if (['webgl', 'webgl2'].includes(canvas.__context)) {\r\n                    const context = canvas.getContext(canvas.__context);\r\n                    if (((_a = context === null || context === void 0 ? void 0 : context.getContextAttributes()) === null || _a === void 0 ? void 0 : _a.preserveDrawingBuffer) === false) {\r\n                        context === null || context === void 0 ? void 0 : context.clear(context.COLOR_BUFFER_BIT);\r\n                    }\r\n                }\r\n                const bitmap = yield createImageBitmap(canvas);\r\n                worker.postMessage({\r\n                    id,\r\n                    bitmap,\r\n                    width: canvas.width,\r\n                    height: canvas.height,\r\n                    dataURLOptions: options.dataURLOptions,\r\n                }, [bitmap]);\r\n            }));\r\n            rafId = requestAnimationFrame(takeCanvasSnapshots);\r\n        };\r\n        rafId = requestAnimationFrame(takeCanvasSnapshots);\r\n        this.resetObservers = () => {\r\n            canvasContextReset();\r\n            cancelAnimationFrame(rafId);\r\n        };\r\n    }\r\n    initCanvasMutationObserver(win, blockClass, blockSelector) {\r\n        this.startRAFTimestamping();\r\n        this.startPendingCanvasMutationFlusher();\r\n        const canvasContextReset = initCanvasContextObserver(win, blockClass, blockSelector);\r\n        const canvas2DReset = initCanvas2DMutationObserver(this.processMutation.bind(this), win, blockClass, blockSelector);\r\n        const canvasWebGL1and2Reset = initCanvasWebGLMutationObserver(this.processMutation.bind(this), win, blockClass, blockSelector, this.mirror);\r\n        this.resetObservers = () => {\r\n            canvasContextReset();\r\n            canvas2DReset();\r\n            canvasWebGL1and2Reset();\r\n        };\r\n    }\r\n    startPendingCanvasMutationFlusher() {\r\n        requestAnimationFrame(() => this.flushPendingCanvasMutations());\r\n    }\r\n    startRAFTimestamping() {\r\n        const setLatestRAFTimestamp = (timestamp) => {\r\n            this.rafStamps.latestId = timestamp;\r\n            requestAnimationFrame(setLatestRAFTimestamp);\r\n        };\r\n        requestAnimationFrame(setLatestRAFTimestamp);\r\n    }\r\n    flushPendingCanvasMutations() {\r\n        this.pendingCanvasMutations.forEach((values, canvas) => {\r\n            const id = this.mirror.getId(canvas);\r\n            this.flushPendingCanvasMutationFor(canvas, id);\r\n        });\r\n        requestAnimationFrame(() => this.flushPendingCanvasMutations());\r\n    }\r\n    flushPendingCanvasMutationFor(canvas, id) {\r\n        if (this.frozen || this.locked) {\r\n            return;\r\n        }\r\n        const valuesWithType = this.pendingCanvasMutations.get(canvas);\r\n        if (!valuesWithType || id === -1)\r\n            return;\r\n        const values = valuesWithType.map((value) => {\r\n            const rest = __rest(value, [\"type\"]);\r\n            return rest;\r\n        });\r\n        const { type } = valuesWithType[0];\r\n        this.mutationCb({ id, type, commands: values });\r\n        this.pendingCanvasMutations.delete(canvas);\r\n    }\r\n}\n\nexport { CanvasManager };\n","import { getCssRuleString } from '../../../rrweb-snapshot/es/rrweb-snapshot.js';\nimport { StyleSheetMirror } from '../utils.js';\n\nclass StylesheetManager {\r\n    constructor(options) {\r\n        this.trackedLinkElements = new WeakSet();\r\n        this.styleMirror = new StyleSheetMirror();\r\n        this.mutationCb = options.mutationCb;\r\n        this.adoptedStyleSheetCb = options.adoptedStyleSheetCb;\r\n    }\r\n    attachLinkElement(linkEl, childSn) {\r\n        if ('_cssText' in childSn.attributes)\r\n            this.mutationCb({\r\n                adds: [],\r\n                removes: [],\r\n                texts: [],\r\n                attributes: [\r\n                    {\r\n                        id: childSn.id,\r\n                        attributes: childSn\r\n                            .attributes,\r\n                    },\r\n                ],\r\n            });\r\n        this.trackLinkElement(linkEl);\r\n    }\r\n    trackLinkElement(linkEl) {\r\n        if (this.trackedLinkElements.has(linkEl))\r\n            return;\r\n        this.trackedLinkElements.add(linkEl);\r\n        this.trackStylesheetInLinkElement(linkEl);\r\n    }\r\n    adoptStyleSheets(sheets, hostId) {\r\n        if (sheets.length === 0)\r\n            return;\r\n        const adoptedStyleSheetData = {\r\n            id: hostId,\r\n            styleIds: [],\r\n        };\r\n        const styles = [];\r\n        for (const sheet of sheets) {\r\n            let styleId;\r\n            if (!this.styleMirror.has(sheet)) {\r\n                styleId = this.styleMirror.add(sheet);\r\n                const rules = Array.from(sheet.rules || CSSRule);\r\n                styles.push({\r\n                    styleId,\r\n                    rules: rules.map((r, index) => {\r\n                        return {\r\n                            rule: getCssRuleString(r),\r\n                            index,\r\n                        };\r\n                    }),\r\n                });\r\n            }\r\n            else\r\n                styleId = this.styleMirror.getId(sheet);\r\n            adoptedStyleSheetData.styleIds.push(styleId);\r\n        }\r\n        if (styles.length > 0)\r\n            adoptedStyleSheetData.styles = styles;\r\n        this.adoptedStyleSheetCb(adoptedStyleSheetData);\r\n    }\r\n    reset() {\r\n        this.styleMirror.reset();\r\n        this.trackedLinkElements = new WeakSet();\r\n    }\r\n    trackStylesheetInLinkElement(linkEl) {\r\n    }\r\n}\n\nexport { StylesheetManager };\n","import { createMirror, snapshot } from '../../../rrweb-snapshot/es/rrweb-snapshot.js';\nimport { initObservers, mutationBuffers } from './observer.js';\nimport { polyfill, on, getWindowWidth, getWindowHeight, isSerializedIframe, isSerializedStylesheet, hasShadowRoot } from '../utils.js';\nimport { EventType, IncrementalSource } from '../../../types/dist/types.js';\nimport { IframeManager } from './iframe-manager.js';\nimport { ShadowDomManager } from './shadow-dom-manager.js';\nimport { CanvasManager } from './observers/canvas/canvas-manager.js';\nimport { StylesheetManager } from './stylesheet-manager.js';\n\nfunction wrapEvent(e) {\r\n    return Object.assign(Object.assign({}, e), { timestamp: Date.now() });\r\n}\r\nlet wrappedEmit;\r\nlet takeFullSnapshot;\r\nlet canvasManager;\r\nlet recording = false;\r\nconst mirror = createMirror();\r\nfunction record(options = {}) {\r\n    const { emit, checkoutEveryNms, checkoutEveryNth, blockClass = 'rr-block', blockSelector = null, ignoreClass = 'rr-ignore', maskTextClass = 'rr-mask', maskTextSelector = null, inlineStylesheet = true, maskAllInputs, maskInputOptions: _maskInputOptions, slimDOMOptions: _slimDOMOptions, maskInputFn, maskTextFn, hooks, packFn, sampling = {}, dataURLOptions = {}, mousemoveWait, recordCanvas = false, recordCrossOriginIframes = false, userTriggeredOnInput = false, collectFonts = false, inlineImages = false, plugins, keepIframeSrcFn = () => false, ignoreCSSAttributes = new Set([]), } = options;\r\n    const inEmittingFrame = recordCrossOriginIframes\r\n        ? window.parent === window\r\n        : true;\r\n    let passEmitsToParent = false;\r\n    if (!inEmittingFrame) {\r\n        try {\r\n            window.parent.document;\r\n            passEmitsToParent = false;\r\n        }\r\n        catch (e) {\r\n            passEmitsToParent = true;\r\n        }\r\n    }\r\n    if (inEmittingFrame && !emit) {\r\n        throw new Error('emit function is required');\r\n    }\r\n    if (mousemoveWait !== undefined && sampling.mousemove === undefined) {\r\n        sampling.mousemove = mousemoveWait;\r\n    }\r\n    mirror.reset();\r\n    const maskInputOptions = maskAllInputs === true\r\n        ? {\r\n            color: true,\r\n            date: true,\r\n            'datetime-local': true,\r\n            email: true,\r\n            month: true,\r\n            number: true,\r\n            range: true,\r\n            search: true,\r\n            tel: true,\r\n            text: true,\r\n            time: true,\r\n            url: true,\r\n            week: true,\r\n            textarea: true,\r\n            select: true,\r\n            password: true,\r\n        }\r\n        : _maskInputOptions !== undefined\r\n            ? _maskInputOptions\r\n            : { password: true };\r\n    const slimDOMOptions = _slimDOMOptions === true || _slimDOMOptions === 'all'\r\n        ? {\r\n            script: true,\r\n            comment: true,\r\n            headFavicon: true,\r\n            headWhitespace: true,\r\n            headMetaSocial: true,\r\n            headMetaRobots: true,\r\n            headMetaHttpEquiv: true,\r\n            headMetaVerification: true,\r\n            headMetaAuthorship: _slimDOMOptions === 'all',\r\n            headMetaDescKeywords: _slimDOMOptions === 'all',\r\n        }\r\n        : _slimDOMOptions\r\n            ? _slimDOMOptions\r\n            : {};\r\n    polyfill();\r\n    let lastFullSnapshotEvent;\r\n    let incrementalSnapshotCount = 0;\r\n    const eventProcessor = (e) => {\r\n        for (const plugin of plugins || []) {\r\n            if (plugin.eventProcessor) {\r\n                e = plugin.eventProcessor(e);\r\n            }\r\n        }\r\n        if (packFn) {\r\n            e = packFn(e);\r\n        }\r\n        return e;\r\n    };\r\n    wrappedEmit = (e, isCheckout) => {\r\n        var _a;\r\n        if (((_a = mutationBuffers[0]) === null || _a === void 0 ? void 0 : _a.isFrozen()) &&\r\n            e.type !== EventType.FullSnapshot &&\r\n            !(e.type === EventType.IncrementalSnapshot &&\r\n                e.data.source === IncrementalSource.Mutation)) {\r\n            mutationBuffers.forEach((buf) => buf.unfreeze());\r\n        }\r\n        if (inEmittingFrame) {\r\n            emit === null || emit === void 0 ? void 0 : emit(eventProcessor(e), isCheckout);\r\n        }\r\n        else if (passEmitsToParent) {\r\n            const message = {\r\n                type: 'rrweb',\r\n                event: eventProcessor(e),\r\n                isCheckout,\r\n            };\r\n            window.parent.postMessage(message, '*');\r\n        }\r\n        if (e.type === EventType.FullSnapshot) {\r\n            lastFullSnapshotEvent = e;\r\n            incrementalSnapshotCount = 0;\r\n        }\r\n        else if (e.type === EventType.IncrementalSnapshot) {\r\n            if (e.data.source === IncrementalSource.Mutation &&\r\n                e.data.isAttachIframe) {\r\n                return;\r\n            }\r\n            incrementalSnapshotCount++;\r\n            const exceedCount = checkoutEveryNth && incrementalSnapshotCount >= checkoutEveryNth;\r\n            const exceedTime = checkoutEveryNms &&\r\n                e.timestamp - lastFullSnapshotEvent.timestamp > checkoutEveryNms;\r\n            if (exceedCount || exceedTime) {\r\n                takeFullSnapshot(true);\r\n            }\r\n        }\r\n    };\r\n    const wrappedMutationEmit = (m) => {\r\n        wrappedEmit(wrapEvent({\r\n            type: EventType.IncrementalSnapshot,\r\n            data: Object.assign({ source: IncrementalSource.Mutation }, m),\r\n        }));\r\n    };\r\n    const wrappedScrollEmit = (p) => wrappedEmit(wrapEvent({\r\n        type: EventType.IncrementalSnapshot,\r\n        data: Object.assign({ source: IncrementalSource.Scroll }, p),\r\n    }));\r\n    const wrappedCanvasMutationEmit = (p) => wrappedEmit(wrapEvent({\r\n        type: EventType.IncrementalSnapshot,\r\n        data: Object.assign({ source: IncrementalSource.CanvasMutation }, p),\r\n    }));\r\n    const wrappedAdoptedStyleSheetEmit = (a) => wrappedEmit(wrapEvent({\r\n        type: EventType.IncrementalSnapshot,\r\n        data: Object.assign({ source: IncrementalSource.AdoptedStyleSheet }, a),\r\n    }));\r\n    const stylesheetManager = new StylesheetManager({\r\n        mutationCb: wrappedMutationEmit,\r\n        adoptedStyleSheetCb: wrappedAdoptedStyleSheetEmit,\r\n    });\r\n    const iframeManager = new IframeManager({\r\n        mirror,\r\n        mutationCb: wrappedMutationEmit,\r\n        stylesheetManager: stylesheetManager,\r\n        recordCrossOriginIframes,\r\n        wrappedEmit,\r\n    });\r\n    for (const plugin of plugins || []) {\r\n        if (plugin.getMirror)\r\n            plugin.getMirror({\r\n                nodeMirror: mirror,\r\n                crossOriginIframeMirror: iframeManager.crossOriginIframeMirror,\r\n                crossOriginIframeStyleMirror: iframeManager.crossOriginIframeStyleMirror,\r\n            });\r\n    }\r\n    canvasManager = new CanvasManager({\r\n        recordCanvas,\r\n        mutationCb: wrappedCanvasMutationEmit,\r\n        win: window,\r\n        blockClass,\r\n        blockSelector,\r\n        mirror,\r\n        sampling: sampling.canvas,\r\n        dataURLOptions,\r\n    });\r\n    const shadowDomManager = new ShadowDomManager({\r\n        mutationCb: wrappedMutationEmit,\r\n        scrollCb: wrappedScrollEmit,\r\n        bypassOptions: {\r\n            blockClass,\r\n            blockSelector,\r\n            maskTextClass,\r\n            maskTextSelector,\r\n            inlineStylesheet,\r\n            maskInputOptions,\r\n            dataURLOptions,\r\n            maskTextFn,\r\n            maskInputFn,\r\n            recordCanvas,\r\n            inlineImages,\r\n            sampling,\r\n            slimDOMOptions,\r\n            iframeManager,\r\n            stylesheetManager,\r\n            canvasManager,\r\n            keepIframeSrcFn,\r\n        },\r\n        mirror,\r\n    });\r\n    takeFullSnapshot = (isCheckout = false) => {\r\n        var _a, _b, _c, _d, _e, _f;\r\n        wrappedEmit(wrapEvent({\r\n            type: EventType.Meta,\r\n            data: {\r\n                href: window.location.href,\r\n                width: getWindowWidth(),\r\n                height: getWindowHeight(),\r\n            },\r\n        }), isCheckout);\r\n        stylesheetManager.reset();\r\n        mutationBuffers.forEach((buf) => buf.lock());\r\n        const node = snapshot(document, {\r\n            mirror,\r\n            blockClass,\r\n            blockSelector,\r\n            maskTextClass,\r\n            maskTextSelector,\r\n            inlineStylesheet,\r\n            maskAllInputs: maskInputOptions,\r\n            maskTextFn,\r\n            slimDOM: slimDOMOptions,\r\n            dataURLOptions,\r\n            recordCanvas,\r\n            inlineImages,\r\n            onSerialize: (n) => {\r\n                if (isSerializedIframe(n, mirror)) {\r\n                    iframeManager.addIframe(n);\r\n                }\r\n                if (isSerializedStylesheet(n, mirror)) {\r\n                    stylesheetManager.trackLinkElement(n);\r\n                }\r\n                if (hasShadowRoot(n)) {\r\n                    shadowDomManager.addShadowRoot(n.shadowRoot, document);\r\n                }\r\n            },\r\n            onIframeLoad: (iframe, childSn) => {\r\n                iframeManager.attachIframe(iframe, childSn);\r\n                shadowDomManager.observeAttachShadow(iframe);\r\n            },\r\n            onStylesheetLoad: (linkEl, childSn) => {\r\n                stylesheetManager.attachLinkElement(linkEl, childSn);\r\n            },\r\n            keepIframeSrcFn,\r\n        });\r\n        if (!node) {\r\n            return console.warn('Failed to snapshot the document');\r\n        }\r\n        wrappedEmit(wrapEvent({\r\n            type: EventType.FullSnapshot,\r\n            data: {\r\n                node,\r\n                initialOffset: {\r\n                    left: window.pageXOffset !== undefined\r\n                        ? window.pageXOffset\r\n                        : (document === null || document === void 0 ? void 0 : document.documentElement.scrollLeft) ||\r\n                            ((_b = (_a = document === null || document === void 0 ? void 0 : document.body) === null || _a === void 0 ? void 0 : _a.parentElement) === null || _b === void 0 ? void 0 : _b.scrollLeft) ||\r\n                            ((_c = document === null || document === void 0 ? void 0 : document.body) === null || _c === void 0 ? void 0 : _c.scrollLeft) ||\r\n                            0,\r\n                    top: window.pageYOffset !== undefined\r\n                        ? window.pageYOffset\r\n                        : (document === null || document === void 0 ? void 0 : document.documentElement.scrollTop) ||\r\n                            ((_e = (_d = document === null || document === void 0 ? void 0 : document.body) === null || _d === void 0 ? void 0 : _d.parentElement) === null || _e === void 0 ? void 0 : _e.scrollTop) ||\r\n                            ((_f = document === null || document === void 0 ? void 0 : document.body) === null || _f === void 0 ? void 0 : _f.scrollTop) ||\r\n                            0,\r\n                },\r\n            },\r\n        }));\r\n        mutationBuffers.forEach((buf) => buf.unlock());\r\n        if (document.adoptedStyleSheets && document.adoptedStyleSheets.length > 0)\r\n            stylesheetManager.adoptStyleSheets(document.adoptedStyleSheets, mirror.getId(document));\r\n    };\r\n    try {\r\n        const handlers = [];\r\n        handlers.push(on('DOMContentLoaded', () => {\r\n            wrappedEmit(wrapEvent({\r\n                type: EventType.DomContentLoaded,\r\n                data: {},\r\n            }));\r\n        }));\r\n        const observe = (doc) => {\r\n            var _a;\r\n            return initObservers({\r\n                mutationCb: wrappedMutationEmit,\r\n                mousemoveCb: (positions, source) => wrappedEmit(wrapEvent({\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: {\r\n                        source,\r\n                        positions,\r\n                    },\r\n                })),\r\n                mouseInteractionCb: (d) => wrappedEmit(wrapEvent({\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: Object.assign({ source: IncrementalSource.MouseInteraction }, d),\r\n                })),\r\n                scrollCb: wrappedScrollEmit,\r\n                viewportResizeCb: (d) => wrappedEmit(wrapEvent({\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: Object.assign({ source: IncrementalSource.ViewportResize }, d),\r\n                })),\r\n                inputCb: (v) => wrappedEmit(wrapEvent({\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: Object.assign({ source: IncrementalSource.Input }, v),\r\n                })),\r\n                mediaInteractionCb: (p) => wrappedEmit(wrapEvent({\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: Object.assign({ source: IncrementalSource.MediaInteraction }, p),\r\n                })),\r\n                styleSheetRuleCb: (r) => wrappedEmit(wrapEvent({\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: Object.assign({ source: IncrementalSource.StyleSheetRule }, r),\r\n                })),\r\n                styleDeclarationCb: (r) => wrappedEmit(wrapEvent({\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: Object.assign({ source: IncrementalSource.StyleDeclaration }, r),\r\n                })),\r\n                canvasMutationCb: wrappedCanvasMutationEmit,\r\n                fontCb: (p) => wrappedEmit(wrapEvent({\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: Object.assign({ source: IncrementalSource.Font }, p),\r\n                })),\r\n                selectionCb: (p) => {\r\n                    wrappedEmit(wrapEvent({\r\n                        type: EventType.IncrementalSnapshot,\r\n                        data: Object.assign({ source: IncrementalSource.Selection }, p),\r\n                    }));\r\n                },\r\n                blockClass,\r\n                ignoreClass,\r\n                maskTextClass,\r\n                maskTextSelector,\r\n                maskInputOptions,\r\n                inlineStylesheet,\r\n                sampling,\r\n                recordCanvas,\r\n                inlineImages,\r\n                userTriggeredOnInput,\r\n                collectFonts,\r\n                doc,\r\n                maskInputFn,\r\n                maskTextFn,\r\n                keepIframeSrcFn,\r\n                blockSelector,\r\n                slimDOMOptions,\r\n                dataURLOptions,\r\n                mirror,\r\n                iframeManager,\r\n                stylesheetManager,\r\n                shadowDomManager,\r\n                canvasManager,\r\n                ignoreCSSAttributes,\r\n                plugins: ((_a = plugins === null || plugins === void 0 ? void 0 : plugins.filter((p) => p.observer)) === null || _a === void 0 ? void 0 : _a.map((p) => ({\r\n                    observer: p.observer,\r\n                    options: p.options,\r\n                    callback: (payload) => wrappedEmit(wrapEvent({\r\n                        type: EventType.Plugin,\r\n                        data: {\r\n                            plugin: p.name,\r\n                            payload,\r\n                        },\r\n                    })),\r\n                }))) || [],\r\n            }, hooks);\r\n        };\r\n        iframeManager.addLoadListener((iframeEl) => {\r\n            handlers.push(observe(iframeEl.contentDocument));\r\n        });\r\n        const init = () => {\r\n            takeFullSnapshot();\r\n            handlers.push(observe(document));\r\n            recording = true;\r\n        };\r\n        if (document.readyState === 'interactive' ||\r\n            document.readyState === 'complete') {\r\n            init();\r\n        }\r\n        else {\r\n            handlers.push(on('load', () => {\r\n                wrappedEmit(wrapEvent({\r\n                    type: EventType.Load,\r\n                    data: {},\r\n                }));\r\n                init();\r\n            }, window));\r\n        }\r\n        return () => {\r\n            handlers.forEach((h) => h());\r\n            recording = false;\r\n        };\r\n    }\r\n    catch (error) {\r\n        console.warn(error);\r\n    }\r\n}\r\nrecord.addCustomEvent = (tag, payload) => {\r\n    if (!recording) {\r\n        throw new Error('please add custom event after start recording');\r\n    }\r\n    wrappedEmit(wrapEvent({\r\n        type: EventType.Custom,\r\n        data: {\r\n            tag,\r\n            payload,\r\n        },\r\n    }));\r\n};\r\nrecord.freezePage = () => {\r\n    mutationBuffers.forEach((buf) => buf.freeze());\r\n};\r\nrecord.takeFullSnapshot = (isCheckout) => {\r\n    if (!recording) {\r\n        throw new Error('please take full snapshot after start recording');\r\n    }\r\n    takeFullSnapshot(isCheckout);\r\n};\r\nrecord.mirror = mirror;\n\nexport { record as default };\n","// src/replay/replayIntegration.ts\nimport { EventType, record } from \"rrweb\";\nfunction parseDsn(dsn) {\n  try {\n    const url = new URL(dsn);\n    const parts = url.pathname.split(\"/\").filter(Boolean);\n    let appId;\n    let basePath;\n    const trackingIndex = parts.indexOf(\"tracking\");\n    if (trackingIndex !== -1) {\n      appId = parts[trackingIndex + 1];\n      basePath = \"/\" + parts.slice(0, trackingIndex).join(\"/\");\n    } else {\n      if (parts.length < 2) return null;\n      appId = parts[parts.length - 1];\n      basePath = \"/\" + parts.slice(0, parts.length - 2).join(\"/\");\n    }\n    if (!appId) return null;\n    return { appId, origin: url.origin, basePath };\n  } catch {\n    return null;\n  }\n}\nfunction nowMs() {\n  return Date.now();\n}\nvar Replay = class {\n  constructor(transport, dsn, options) {\n    this.transport = transport;\n    this.dsn = dsn;\n    this.beforeErrorMs = Math.max(0, options?.beforeErrorMs ?? 15e3);\n    this.afterErrorMs = Math.max(0, options?.afterErrorMs ?? 1e4);\n    const minBuffer = this.beforeErrorMs + this.afterErrorMs + 1e4;\n    this.bufferMs = Math.max(minBuffer, options?.bufferMs ?? 9e4);\n    this.maxEvents = Math.max(500, options?.maxEvents ?? 3e3);\n  }\n  enabled = false;\n  events = [];\n  bufferMs;\n  maxEvents;\n  beforeErrorMs;\n  afterErrorMs;\n  stopRecording = null;\n  pendingUpload = null;\n  init() {\n    void this.bootstrap();\n  }\n  async bootstrap() {\n    const parsed = parseDsn(this.dsn);\n    if (!parsed) return;\n    const configUrl = new URL(`${parsed.origin}${parsed.basePath}/app-config`);\n    configUrl.searchParams.set(\"appId\", parsed.appId);\n    let replayEnabled = false;\n    try {\n      const res = await fetch(configUrl.toString(), { method: \"GET\" });\n      if (res.ok) {\n        const json = await res.json();\n        replayEnabled = Boolean(json?.data?.replayEnabled);\n      }\n    } catch {\n      replayEnabled = false;\n    }\n    if (!replayEnabled) return;\n    this.enabled = true;\n    this.patchTransport(parsed);\n    this.startRecording();\n    window.addEventListener(\n      \"pagehide\",\n      () => {\n        void this.flushPending();\n      },\n      { capture: true }\n    );\n  }\n  patchTransport(parsed) {\n    const originalSend = this.transport.send.bind(this.transport);\n    const replayUploadUrl = new URL(`${parsed.origin}${parsed.basePath}/replay/${parsed.appId}`).toString();\n    this.transport.send = (data) => {\n      if (!this.enabled) return originalSend(data);\n      if (data.event_type === \"error\") {\n        if (this.pendingUpload) {\n          return originalSend({ ...data, replayId: this.pendingUpload.replayId });\n        }\n        if (!this.pendingUpload) {\n          const replayId = `replay_${Date.now().toString(36)}_${Math.random().toString(36).slice(2, 8)}`;\n          const errorAtMs = nowMs();\n          const windowStartMs = Math.max(0, errorAtMs - this.beforeErrorMs);\n          const windowEndMs = errorAtMs + this.afterErrorMs;\n          const timerId = window.setTimeout(() => {\n            void this.flushPending();\n          }, this.afterErrorMs);\n          this.pendingUpload = { replayId, errorAtMs, windowStartMs, windowEndMs, timerId, replayUploadUrl };\n          return originalSend({ ...data, replayId });\n        }\n      }\n      return originalSend(data);\n    };\n  }\n  startRecording() {\n    if (!this.enabled) return;\n    if (this.stopRecording) return;\n    this.stopRecording = record({\n      emit: (event) => this.push(event),\n      checkoutEveryNms: 1e4,\n      // privacy defaults\n      maskAllInputs: true,\n      maskTextClass: \"condev-replay-mask\",\n      // perf defaults\n      recordCanvas: false,\n      inlineImages: true,\n      collectFonts: true,\n      mousemoveWait: 50\n    }) ?? null;\n  }\n  push(event) {\n    const cutoff = event.timestamp - this.bufferMs;\n    this.events.push(event);\n    while (this.events.length > this.maxEvents) this.events.shift();\n    while (this.events.length && (this.events[0]?.timestamp ?? 0) < cutoff) this.events.shift();\n  }\n  findMetaEvent(beforeTimestamp) {\n    for (let i = this.events.length - 1; i >= 0; i -= 1) {\n      const e = this.events[i];\n      if (!e) continue;\n      if (e.type === EventType.Meta && e.timestamp <= beforeTimestamp) return e;\n    }\n    for (let i = this.events.length - 1; i >= 0; i -= 1) {\n      const e = this.events[i];\n      if (!e) continue;\n      if (e.type === EventType.Meta) return e;\n    }\n    return null;\n  }\n  withMetaFirst(events, headTimestamp) {\n    if (events.length === 0) return events;\n    if (events[0]?.type === EventType.Meta) return events;\n    const meta = this.findMetaEvent(headTimestamp);\n    if (!meta) return events;\n    const adjustedTimestamp = Math.min(meta.timestamp, headTimestamp - 1);\n    const metaEvent = adjustedTimestamp === meta.timestamp ? meta : { ...meta, timestamp: adjustedTimestamp };\n    return [metaEvent, ...events];\n  }\n  pickEvents(windowStartMs, windowEndMs) {\n    const fullSnapshotIndex = (() => {\n      for (let i = this.events.length - 1; i >= 0; i -= 1) {\n        const e = this.events[i];\n        if (!e) continue;\n        if (e.type === EventType.FullSnapshot && e.timestamp <= windowStartMs) return i;\n      }\n      for (let i = 0; i < this.events.length; i += 1) {\n        const e = this.events[i];\n        if (e?.type === EventType.FullSnapshot) return i;\n      }\n      return 0;\n    })();\n    const baseStartMs = this.events[fullSnapshotIndex]?.timestamp ?? windowStartMs;\n    const base = this.events.filter((e) => e.timestamp >= baseStartMs && e.timestamp <= windowEndMs);\n    const firstFullSnapshotIdx = base.findIndex((e) => e.type === EventType.FullSnapshot);\n    if (firstFullSnapshotIdx === -1) {\n      const picked2 = base.slice(-this.maxEvents);\n      const startedAtMs = picked2[0]?.timestamp ?? baseStartMs;\n      const normalized2 = this.withMetaFirst(picked2, startedAtMs);\n      return { startedAtMs: normalized2[0]?.timestamp ?? startedAtMs, events: normalized2 };\n    }\n    const head = base[firstFullSnapshotIdx];\n    const tail = base.slice(firstFullSnapshotIdx + 1);\n    const trimmed = tail.length > this.maxEvents - 1 ? tail.slice(-(this.maxEvents - 1)) : tail;\n    const picked = [head, ...trimmed];\n    const normalized = this.withMetaFirst(picked, head.timestamp);\n    return { startedAtMs: normalized[0]?.timestamp ?? head.timestamp, events: normalized };\n  }\n  async flushPending() {\n    if (!this.pendingUpload) return;\n    const pending = this.pendingUpload;\n    this.pendingUpload = null;\n    if (pending.timerId) window.clearTimeout(pending.timerId);\n    const { startedAtMs, events } = this.pickEvents(pending.windowStartMs, pending.windowEndMs);\n    const endedAtMs = Math.min(nowMs(), pending.windowEndMs);\n    try {\n      await fetch(pending.replayUploadUrl, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          replayId: pending.replayId,\n          startedAt: new Date(startedAtMs).toISOString(),\n          endedAt: new Date(endedAtMs).toISOString(),\n          errorAt: new Date(pending.errorAtMs).toISOString(),\n          url: location.href,\n          path: location.pathname,\n          userAgent: navigator.userAgent,\n          events\n        })\n      });\n    } catch {\n    }\n  }\n  stop() {\n    if (this.pendingUpload?.timerId) window.clearTimeout(this.pendingUpload.timerId);\n    this.pendingUpload = null;\n    if (this.stopRecording) this.stopRecording();\n    this.stopRecording = null;\n    this.events = [];\n    this.enabled = false;\n  }\n};\n\nexport {\n  Replay\n};\n","// src/metrics/lib/doubleRAF.ts\nvar doubleRAF = (cb) => {\n  requestAnimationFrame(() => requestAnimationFrame(() => cb()));\n};\n\nexport {\n  doubleRAF\n};\n","// src/metrics/lib/bfcache.ts\nvar bfcacheRestoreTime = -1;\nvar getBFCacheRestoreTime = () => bfcacheRestoreTime;\nvar onBFCacheRestore = (cb) => {\n  addEventListener(\n    \"pageshow\",\n    (event) => {\n      if (event.persisted) {\n        bfcacheRestoreTime = event.timeStamp;\n        cb(event);\n      }\n    },\n    true\n  );\n};\n\nexport {\n  getBFCacheRestoreTime,\n  onBFCacheRestore\n};\n","import {\n  onBFCacheRestore\n} from \"./chunk-XOEXM75D.mjs\";\n\n// src/metrics/lib/getVisibilityWatcher.ts\nvar firstHiddenTime = -1;\nvar initHiddenTime = () => {\n  return document.visibilityState === \"hidden\" && !document.prerendering ? 0 : Infinity;\n};\nvar onVisibilityUpdate = (event) => {\n  if (document.visibilityState === \"hidden\" && firstHiddenTime > -1) {\n    firstHiddenTime = event.type === \"visibilitychange\" ? event.timeStamp : 0;\n    removeChangeListeners();\n  }\n};\nvar addChangeListeners = () => {\n  addEventListener(\"visibilitychange\", onVisibilityUpdate, true);\n  addEventListener(\"prerenderingchange\", onVisibilityUpdate, true);\n};\nvar removeChangeListeners = () => {\n  removeEventListener(\"visibilitychange\", onVisibilityUpdate, true);\n  removeEventListener(\"prerenderingchange\", onVisibilityUpdate, true);\n};\nvar getVisibilityWatcher = () => {\n  if (firstHiddenTime < 0) {\n    firstHiddenTime = initHiddenTime();\n    addChangeListeners();\n    onBFCacheRestore(() => {\n      setTimeout(() => {\n        firstHiddenTime = initHiddenTime();\n        addChangeListeners();\n      }, 0);\n    });\n  }\n  return {\n    get firstHiddenTime() {\n      return firstHiddenTime;\n    }\n  };\n};\n\nexport {\n  getVisibilityWatcher\n};\n","// src/metrics/lib/runOnce.ts\nvar runOnce = (cb) => {\n  let called = false;\n  return () => {\n    if (!called) {\n      cb();\n      called = true;\n    }\n  };\n};\n\nexport {\n  runOnce\n};\n","// src/metrics/lib/onHidden.ts\nvar onHidden = (cb) => {\n  document.addEventListener(\"visibilitychange\", () => {\n    if (document.visibilityState === \"hidden\") {\n      cb();\n    }\n  });\n};\n\nexport {\n  onHidden\n};\n","import {\n  runOnce\n} from \"./chunk-GHMYG4WD.mjs\";\nimport {\n  onHidden\n} from \"./chunk-GQCNY4BU.mjs\";\n\n// src/metrics/lib/whenIdle.ts\nvar whenIdle = (cb) => {\n  const rIC = self.requestIdleCallback || self.setTimeout;\n  let handle = -1;\n  cb = runOnce(cb);\n  if (document.visibilityState === \"hidden\") {\n    cb();\n  } else {\n    handle = rIC(cb);\n    onHidden(cb);\n  }\n  return handle;\n};\n\nexport {\n  whenIdle\n};\n","// src/metrics/lib/observe.ts\nvar observe = (type, callback, opts) => {\n  try {\n    if (PerformanceObserver.supportedEntryTypes.includes(type)) {\n      const po = new PerformanceObserver((list) => {\n        Promise.resolve().then(() => {\n          callback(list.getEntries());\n        });\n      });\n      po.observe(\n        Object.assign(\n          {\n            type,\n            buffered: true\n          },\n          opts || {}\n        )\n      );\n      return po;\n    }\n  } catch (e) {\n  }\n  return;\n};\n\nexport {\n  observe\n};\n","// src/metrics/lib/whenActivated.ts\nvar whenActivated = (callback) => {\n  if (document.prerendering) {\n    addEventListener(\"prerenderingchange\", () => callback(), true);\n  } else {\n    callback();\n  }\n};\n\nexport {\n  whenActivated\n};\n","// src/metrics/lib/generateUniqueID.ts\nvar generateUniqueID = () => {\n  return `v4-${Date.now()}-${Math.floor(Math.random() * (9e12 - 1)) + 1e12}`;\n};\n\nexport {\n  generateUniqueID\n};\n","// src/metrics/lib/getNavigationEntry.ts\nvar getNavigationEntry = () => {\n  const navigationEntry = self.performance && performance.getEntriesByType && performance.getEntriesByType(\"navigation\")[0];\n  if (navigationEntry && navigationEntry.responseStart > 0 && navigationEntry.responseStart < performance.now()) {\n    return navigationEntry;\n  }\n};\n\nexport {\n  getNavigationEntry\n};\n","import {\n  getNavigationEntry\n} from \"./chunk-XYO6SENQ.mjs\";\n\n// src/metrics/lib/getActivationStart.ts\nvar getActivationStart = () => {\n  const navEntry = getNavigationEntry();\n  return navEntry && navEntry.activationStart || 0;\n};\n\nexport {\n  getActivationStart\n};\n","import {\n  getBFCacheRestoreTime\n} from \"./chunk-XOEXM75D.mjs\";\nimport {\n  generateUniqueID\n} from \"./chunk-7HQPBJGL.mjs\";\nimport {\n  getActivationStart\n} from \"./chunk-OXFI2VSH.mjs\";\nimport {\n  getNavigationEntry\n} from \"./chunk-XYO6SENQ.mjs\";\n\n// src/metrics/lib/initMetric.ts\nvar initMetric = (name, value) => {\n  const navEntry = getNavigationEntry();\n  let navigationType = \"navigate\";\n  if (getBFCacheRestoreTime() >= 0) {\n    navigationType = \"back-forward-cache\";\n  } else if (navEntry) {\n    if (document.prerendering || getActivationStart() > 0) {\n      navigationType = \"prerender\";\n    } else if (document.wasDiscarded) {\n      navigationType = \"restore\";\n    } else if (navEntry.type) {\n      navigationType = navEntry.type.replace(/_/g, \"-\");\n    }\n  }\n  const entries = [];\n  return {\n    name,\n    value: typeof value === \"undefined\" ? -1 : value,\n    rating: \"good\",\n    // If needed, will be updated when reported. `const` to keep the type from widening to `string`.\n    delta: 0,\n    entries,\n    id: generateUniqueID(),\n    navigationType\n  };\n};\n\nexport {\n  initMetric\n};\n","// src/metrics/lib/bindReporter.ts\nvar getRating = (value, thresholds) => {\n  if (value > thresholds[1]) {\n    return \"poor\";\n  }\n  if (value > thresholds[0]) {\n    return \"needs-improvement\";\n  }\n  return \"good\";\n};\nvar bindReporter = (callback, metric, thresholds, reportAllChanges) => {\n  let prevValue;\n  let delta;\n  return (forceReport) => {\n    if (metric.value >= 0) {\n      if (forceReport || reportAllChanges) {\n        delta = metric.value - (prevValue || 0);\n        if (delta || prevValue === void 0) {\n          prevValue = metric.value;\n          metric.delta = delta;\n          metric.rating = getRating(metric.value, thresholds);\n          callback(metric);\n        }\n      }\n    }\n  };\n};\n\nexport {\n  bindReporter\n};\n","import {\n  doubleRAF\n} from \"./chunk-ASE4CFBL.mjs\";\nimport {\n  getVisibilityWatcher\n} from \"./chunk-JKQBMT52.mjs\";\nimport {\n  whenIdle\n} from \"./chunk-KWQIWTLW.mjs\";\nimport {\n  runOnce\n} from \"./chunk-GHMYG4WD.mjs\";\nimport {\n  onHidden\n} from \"./chunk-GQCNY4BU.mjs\";\nimport {\n  observe\n} from \"./chunk-JGRV4XZF.mjs\";\nimport {\n  whenActivated\n} from \"./chunk-JVISIACI.mjs\";\nimport {\n  initMetric\n} from \"./chunk-YCQ4E4LR.mjs\";\nimport {\n  onBFCacheRestore\n} from \"./chunk-XOEXM75D.mjs\";\nimport {\n  bindReporter\n} from \"./chunk-SC6CGYC4.mjs\";\nimport {\n  getActivationStart\n} from \"./chunk-OXFI2VSH.mjs\";\n\n// src/metrics/onLCP.ts\nvar LCPThresholds = [2500, 4e3];\nvar reportedMetricIDs = {};\nvar onLCP = (onReport, opts) => {\n  opts = opts || {};\n  whenActivated(() => {\n    const visibilityWatcher = getVisibilityWatcher();\n    let metric = initMetric(\"LCP\");\n    let report;\n    const handleEntries = (entries) => {\n      if (!opts.reportAllChanges) {\n        entries = entries.slice(-1);\n      }\n      entries.forEach((entry) => {\n        if (entry.startTime < visibilityWatcher.firstHiddenTime) {\n          metric.value = Math.max(entry.startTime - getActivationStart(), 0);\n          metric.entries = [entry];\n          report();\n        }\n      });\n    };\n    const po = observe(\"largest-contentful-paint\", handleEntries);\n    if (po) {\n      report = bindReporter(onReport, metric, LCPThresholds, opts.reportAllChanges);\n      const stopListening = runOnce(() => {\n        if (!reportedMetricIDs[metric.id]) {\n          handleEntries(po.takeRecords());\n          po.disconnect();\n          reportedMetricIDs[metric.id] = true;\n          report(true);\n        }\n      });\n      [\"keydown\", \"click\"].forEach((type) => {\n        addEventListener(type, () => whenIdle(stopListening), true);\n      });\n      onHidden(stopListening);\n      onBFCacheRestore((event) => {\n        metric = initMetric(\"LCP\");\n        report = bindReporter(onReport, metric, LCPThresholds, opts.reportAllChanges);\n        doubleRAF(() => {\n          metric.value = performance.now() - event.timeStamp;\n          reportedMetricIDs[metric.id] = true;\n          report(true);\n        });\n      });\n    }\n  });\n};\n\nexport {\n  LCPThresholds,\n  onLCP\n};\n","import {\n  whenActivated\n} from \"./chunk-JVISIACI.mjs\";\nimport {\n  initMetric\n} from \"./chunk-YCQ4E4LR.mjs\";\nimport {\n  onBFCacheRestore\n} from \"./chunk-XOEXM75D.mjs\";\nimport {\n  bindReporter\n} from \"./chunk-SC6CGYC4.mjs\";\nimport {\n  getActivationStart\n} from \"./chunk-OXFI2VSH.mjs\";\nimport {\n  getNavigationEntry\n} from \"./chunk-XYO6SENQ.mjs\";\n\n// src/metrics/onTTFB.ts\nvar TTFBThresholds = [800, 1800];\nvar whenReady = (callback) => {\n  if (document.prerendering) {\n    whenActivated(() => whenReady(callback));\n  } else if (document.readyState !== \"complete\") {\n    addEventListener(\"load\", () => whenReady(callback), true);\n  } else {\n    setTimeout(callback, 0);\n  }\n};\nvar onTTFB = (onReport, opts) => {\n  opts = opts || {};\n  let metric = initMetric(\"TTFB\");\n  let report = bindReporter(onReport, metric, TTFBThresholds, opts.reportAllChanges);\n  whenReady(() => {\n    const navigationEntry = getNavigationEntry();\n    if (navigationEntry) {\n      metric.value = Math.max(navigationEntry.responseStart - getActivationStart(), 0);\n      metric.entries = [navigationEntry];\n      report(true);\n      onBFCacheRestore(() => {\n        metric = initMetric(\"TTFB\", 0);\n        report = bindReporter(onReport, metric, TTFBThresholds, opts.reportAllChanges);\n        report(true);\n      });\n    }\n  });\n};\n\nexport {\n  TTFBThresholds,\n  onTTFB\n};\n","import {\n  doubleRAF\n} from \"./chunk-ASE4CFBL.mjs\";\nimport {\n  getVisibilityWatcher\n} from \"./chunk-JKQBMT52.mjs\";\nimport {\n  observe\n} from \"./chunk-JGRV4XZF.mjs\";\nimport {\n  whenActivated\n} from \"./chunk-JVISIACI.mjs\";\nimport {\n  initMetric\n} from \"./chunk-YCQ4E4LR.mjs\";\nimport {\n  onBFCacheRestore\n} from \"./chunk-XOEXM75D.mjs\";\nimport {\n  bindReporter\n} from \"./chunk-SC6CGYC4.mjs\";\nimport {\n  getActivationStart\n} from \"./chunk-OXFI2VSH.mjs\";\n\n// src/metrics/onFCP.ts\nvar FCPThresholds = [1800, 3e3];\nvar onFCP = (onReport, opts) => {\n  opts = opts || {};\n  whenActivated(() => {\n    const visibilityWatcher = getVisibilityWatcher();\n    let metric = initMetric(\"FCP\");\n    let report;\n    const handleEntries = (entries) => {\n      entries.forEach((entry) => {\n        if (entry.name === \"first-contentful-paint\") {\n          po.disconnect();\n          if (entry.startTime < visibilityWatcher.firstHiddenTime) {\n            metric.value = Math.max(entry.startTime - getActivationStart(), 0);\n            metric.entries.push(entry);\n            report(true);\n          }\n        }\n      });\n    };\n    const po = observe(\"paint\", handleEntries);\n    if (po) {\n      report = bindReporter(onReport, metric, FCPThresholds, opts.reportAllChanges);\n      onBFCacheRestore((event) => {\n        metric = initMetric(\"FCP\");\n        report = bindReporter(onReport, metric, FCPThresholds, opts.reportAllChanges);\n        doubleRAF(() => {\n          metric.value = performance.now() - event.timeStamp;\n          report(true);\n        });\n      });\n    }\n  });\n};\n\nexport {\n  FCPThresholds,\n  onFCP\n};\n","import {\n  onFCP\n} from \"./chunk-2VNXWO72.mjs\";\nimport {\n  doubleRAF\n} from \"./chunk-ASE4CFBL.mjs\";\nimport {\n  runOnce\n} from \"./chunk-GHMYG4WD.mjs\";\nimport {\n  onHidden\n} from \"./chunk-GQCNY4BU.mjs\";\nimport {\n  observe\n} from \"./chunk-JGRV4XZF.mjs\";\nimport {\n  initMetric\n} from \"./chunk-YCQ4E4LR.mjs\";\nimport {\n  onBFCacheRestore\n} from \"./chunk-XOEXM75D.mjs\";\nimport {\n  bindReporter\n} from \"./chunk-SC6CGYC4.mjs\";\n\n// src/metrics/onCLS.ts\nvar CLSThresholds = [0.1, 0.25];\nvar onCLS = (onReport, opts) => {\n  opts = opts || {};\n  onFCP(\n    runOnce(() => {\n      let metric = initMetric(\"CLS\", 0);\n      let report;\n      let sessionValue = 0;\n      let sessionEntries = [];\n      const handleEntries = (entries) => {\n        entries.forEach((entry) => {\n          if (!entry.hadRecentInput) {\n            const firstSessionEntry = sessionEntries[0];\n            const lastSessionEntry = sessionEntries[sessionEntries.length - 1];\n            if (sessionValue && entry.startTime - (lastSessionEntry?.startTime ?? 0) < 1e3 && entry.startTime - (firstSessionEntry?.startTime ?? 0) < 5e3) {\n              sessionValue += entry.value;\n              sessionEntries.push(entry);\n            } else {\n              sessionValue = entry.value;\n              sessionEntries = [entry];\n            }\n          }\n        });\n        if (sessionValue > metric.value) {\n          metric.value = sessionValue;\n          metric.entries = sessionEntries;\n          report();\n        }\n      };\n      const po = observe(\"layout-shift\", handleEntries);\n      if (po) {\n        report = bindReporter(onReport, metric, CLSThresholds, opts.reportAllChanges);\n        onHidden(() => {\n          handleEntries(po.takeRecords());\n          report(true);\n        });\n        onBFCacheRestore(() => {\n          sessionValue = 0;\n          metric = initMetric(\"CLS\", 0);\n          report = bindReporter(onReport, metric, CLSThresholds, opts.reportAllChanges);\n          doubleRAF(() => report());\n        });\n        setTimeout(report, 0);\n      }\n    })\n  );\n};\n\nexport {\n  CLSThresholds,\n  onCLS\n};\n","import {\n  observe\n} from \"./chunk-JGRV4XZF.mjs\";\n\n// src/metrics/lib/polyfills/interactionCountPolyfill.ts\nvar interactionCountEstimate = 0;\nvar minKnownInteractionId = Infinity;\nvar maxKnownInteractionId = 0;\nvar updateEstimate = (entries) => {\n  entries.forEach((e) => {\n    if (e.interactionId) {\n      minKnownInteractionId = Math.min(minKnownInteractionId, e.interactionId);\n      maxKnownInteractionId = Math.max(maxKnownInteractionId, e.interactionId);\n      interactionCountEstimate = maxKnownInteractionId ? (maxKnownInteractionId - minKnownInteractionId) / 7 + 1 : 0;\n    }\n  });\n};\nvar po;\nvar getInteractionCount = () => {\n  return po ? interactionCountEstimate : performance.interactionCount || 0;\n};\nvar initInteractionCountPolyfill = () => {\n  if (\"interactionCount\" in performance || po) return;\n  po = observe(\"event\", updateEstimate, {\n    type: \"event\",\n    buffered: true,\n    durationThreshold: 0\n  });\n};\n\nexport {\n  getInteractionCount,\n  initInteractionCountPolyfill\n};\n","import {\n  getInteractionCount\n} from \"./chunk-QB4OYEKQ.mjs\";\n\n// src/metrics/lib/interactions.ts\nvar longestInteractionList = [];\nvar longestInteractionMap = /* @__PURE__ */ new Map();\nvar DEFAULT_DURATION_THRESHOLD = 40;\nvar prevInteractionCount = 0;\nvar getInteractionCountForNavigation = () => {\n  return getInteractionCount() - prevInteractionCount;\n};\nvar resetInteractions = () => {\n  prevInteractionCount = getInteractionCount();\n  longestInteractionList.length = 0;\n  longestInteractionMap.clear();\n};\nvar estimateP98LongestInteraction = () => {\n  const candidateInteractionIndex = Math.min(longestInteractionList.length - 1, Math.floor(getInteractionCountForNavigation() / 50));\n  return longestInteractionList[candidateInteractionIndex];\n};\nvar MAX_INTERACTIONS_TO_CONSIDER = 10;\nvar entryPreProcessingCallbacks = [];\nvar processInteractionEntry = (entry) => {\n  entryPreProcessingCallbacks.forEach((cb) => cb(entry));\n  if (!(entry.interactionId || entry.entryType === \"first-input\")) return;\n  const minLongestInteraction = longestInteractionList[longestInteractionList.length - 1];\n  const existingInteraction = longestInteractionMap.get(entry.interactionId);\n  if (existingInteraction || longestInteractionList.length < MAX_INTERACTIONS_TO_CONSIDER || entry.duration > (minLongestInteraction?.latency ?? 0)) {\n    if (existingInteraction) {\n      if (entry.duration > existingInteraction.latency) {\n        existingInteraction.entries = [entry];\n        existingInteraction.latency = entry.duration;\n      } else if (entry.duration === existingInteraction.latency && entry.startTime === existingInteraction.entries[0]?.startTime) {\n        existingInteraction.entries.push(entry);\n      }\n    } else {\n      const interaction = {\n        id: entry.interactionId,\n        latency: entry.duration,\n        entries: [entry]\n      };\n      longestInteractionMap.set(interaction.id, interaction);\n      longestInteractionList.push(interaction);\n    }\n    longestInteractionList.sort((a, b) => b.latency - a.latency);\n    if (longestInteractionList.length > MAX_INTERACTIONS_TO_CONSIDER) {\n      longestInteractionList.splice(MAX_INTERACTIONS_TO_CONSIDER).forEach((i) => longestInteractionMap.delete(i.id));\n    }\n  }\n};\n\nexport {\n  longestInteractionList,\n  longestInteractionMap,\n  DEFAULT_DURATION_THRESHOLD,\n  resetInteractions,\n  estimateP98LongestInteraction,\n  entryPreProcessingCallbacks,\n  processInteractionEntry\n};\n","import {\n  DEFAULT_DURATION_THRESHOLD,\n  estimateP98LongestInteraction,\n  processInteractionEntry,\n  resetInteractions\n} from \"./chunk-OPSLPDZU.mjs\";\nimport {\n  initInteractionCountPolyfill\n} from \"./chunk-QB4OYEKQ.mjs\";\nimport {\n  whenIdle\n} from \"./chunk-KWQIWTLW.mjs\";\nimport {\n  onHidden\n} from \"./chunk-GQCNY4BU.mjs\";\nimport {\n  observe\n} from \"./chunk-JGRV4XZF.mjs\";\nimport {\n  whenActivated\n} from \"./chunk-JVISIACI.mjs\";\nimport {\n  initMetric\n} from \"./chunk-YCQ4E4LR.mjs\";\nimport {\n  onBFCacheRestore\n} from \"./chunk-XOEXM75D.mjs\";\nimport {\n  bindReporter\n} from \"./chunk-SC6CGYC4.mjs\";\n\n// src/metrics/onINP.ts\nvar INPThresholds = [200, 500];\nvar onINP = (onReport, opts) => {\n  if (!(\"PerformanceEventTiming\" in self && \"interactionId\" in PerformanceEventTiming.prototype)) {\n    return;\n  }\n  opts = opts || {};\n  whenActivated(() => {\n    initInteractionCountPolyfill();\n    let metric = initMetric(\"INP\");\n    let report;\n    const handleEntries = (entries) => {\n      whenIdle(() => {\n        entries.forEach(processInteractionEntry);\n        const inp = estimateP98LongestInteraction();\n        if (inp && inp.latency !== metric.value) {\n          metric.value = inp.latency;\n          metric.entries = inp.entries;\n          report();\n        }\n      });\n    };\n    const po = observe(\"event\", handleEntries, {\n      // Event Timing entries have their durations rounded to the nearest 8ms,\n      // so a duration of 40ms would be any event that spans 2.5 or more frames\n      // at 60Hz. This threshold is chosen to strike a balance between usefulness\n      // and performance. Running this callback for any interaction that spans\n      // just one or two frames is likely not worth the insight that could be\n      // gained.\n      durationThreshold: opts.durationThreshold ?? DEFAULT_DURATION_THRESHOLD\n    });\n    report = bindReporter(onReport, metric, INPThresholds, opts.reportAllChanges);\n    if (po) {\n      po.observe({ type: \"first-input\", buffered: true });\n      onHidden(() => {\n        handleEntries(po.takeRecords());\n        report(true);\n      });\n      onBFCacheRestore(() => {\n        resetInteractions();\n        metric = initMetric(\"INP\");\n        report = bindReporter(onReport, metric, INPThresholds, opts.reportAllChanges);\n      });\n    }\n  });\n};\n\nexport {\n  INPThresholds,\n  onINP\n};\n","import {\n  onLCP\n} from \"./chunk-YXQGTOBI.mjs\";\nimport {\n  onTTFB\n} from \"./chunk-5R5MTCJL.mjs\";\nimport {\n  onCLS\n} from \"./chunk-5EDMF7CO.mjs\";\nimport {\n  onFCP\n} from \"./chunk-2VNXWO72.mjs\";\nimport {\n  onINP\n} from \"./chunk-PXUW2JF7.mjs\";\n\n// src/integrations/metrics.ts\nvar onLoad = (callback) => {\n  const report = () => {\n    const navigationEntries = performance.getEntriesByType(\"navigation\");\n    if (navigationEntries.length > 0) {\n      const entry = navigationEntries[0];\n      let loadTime = entry ? entry.loadEventEnd - entry.startTime : 0;\n      if (loadTime <= 0) {\n        loadTime = performance.now();\n      }\n      callback({ name: \"LOAD\", value: loadTime });\n      return;\n    }\n    callback({ name: \"LOAD\", value: performance.now() });\n  };\n  if (document.readyState === \"complete\") {\n    report();\n    return;\n  }\n  window.addEventListener(\"load\", report, { once: true });\n};\nvar Metrics = class {\n  constructor(transport) {\n    this.transport = transport;\n  }\n  init() {\n    ;\n    [onCLS, onFCP, onINP, onLCP, onTTFB].forEach((metricFn) => {\n      metricFn((metric) => {\n        this.transport.send({\n          event_type: \"performance\",\n          type: \"webVital\",\n          name: metric.name,\n          value: metric.value,\n          path: window.location.pathname\n        });\n      });\n    });\n    onLoad((metric) => {\n      this.transport.send({\n        event_type: \"performance\",\n        type: \"webVital\",\n        name: metric.name,\n        value: metric.value,\n        path: window.location.pathname\n      });\n    });\n  }\n};\n\nexport {\n  onLoad,\n  Metrics\n};\n","import {\n  Metrics\n} from \"./chunk-HEZ3VS73.mjs\";\nimport \"./chunk-5KAKDGJC.mjs\";\nimport \"./chunk-YXQGTOBI.mjs\";\nimport \"./chunk-5R5MTCJL.mjs\";\nimport \"./chunk-AG6LTEQW.mjs\";\nimport \"./chunk-XHJ4ODLW.mjs\";\nimport \"./chunk-P3STCOIC.mjs\";\nimport \"./chunk-4OJPEDH3.mjs\";\nimport \"./chunk-H7BY6T5G.mjs\";\nimport \"./chunk-UUIWOEWL.mjs\";\nimport \"./chunk-RA4OQEBE.mjs\";\nimport \"./chunk-YFE7AGSY.mjs\";\nimport \"./chunk-2BN3OYOJ.mjs\";\nimport \"./chunk-Q74CEQA2.mjs\";\nimport \"./chunk-5EDMF7CO.mjs\";\nimport \"./chunk-2VNXWO72.mjs\";\nimport \"./chunk-ASE4CFBL.mjs\";\nimport \"./chunk-MTZ3MOJW.mjs\";\nimport \"./chunk-H6FXOUCS.mjs\";\nimport \"./chunk-JKQBMT52.mjs\";\nimport \"./chunk-PXUW2JF7.mjs\";\nimport \"./chunk-OPSLPDZU.mjs\";\nimport \"./chunk-QB4OYEKQ.mjs\";\nimport \"./chunk-KWQIWTLW.mjs\";\nimport \"./chunk-GHMYG4WD.mjs\";\nimport \"./chunk-GQCNY4BU.mjs\";\nimport \"./chunk-JGRV4XZF.mjs\";\nimport \"./chunk-JVISIACI.mjs\";\nimport \"./chunk-YCQ4E4LR.mjs\";\nimport \"./chunk-XOEXM75D.mjs\";\nimport \"./chunk-SC6CGYC4.mjs\";\nimport \"./chunk-7HQPBJGL.mjs\";\nimport \"./chunk-OXFI2VSH.mjs\";\nimport \"./chunk-XYO6SENQ.mjs\";\n\n// src/index.ts\nfunction getBrowserInfo() {\n  return {\n    userAgent: navigator.userAgent,\n    language: navigator.language,\n    platform: navigator.platform,\n    rederrer: document.referrer,\n    path: location.pathname\n  };\n}\nexport {\n  Metrics,\n  getBrowserInfo\n};\n","// src/transport/index.ts\nimport { getBrowserInfo } from \"@condev-monitor/monitor-sdk-browser-utils\";\nvar BrowserTransport = class {\n  constructor(dsn, context) {\n    this.dsn = dsn;\n    this.context = context;\n  }\n  send(data) {\n    const browserInfo = getBrowserInfo();\n    const rawMessage = data?.message;\n    const message = typeof rawMessage === \"string\" ? rawMessage : \"\";\n    const payload = {\n      ...data,\n      message,\n      browserInfo,\n      release: this.context?.release,\n      dist: this.context?.dist\n    };\n    fetch(this.dsn, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(payload)\n    }).catch((err) => console.error(\"Failed to send data\", err));\n  }\n};\n\nexport {\n  BrowserTransport\n};\n","// src/tracing/errorsIntegration.ts\nvar Errors = class {\n  transport;\n  constructor(transport) {\n    this.transport = transport;\n  }\n  init() {\n    const onError = (event) => {\n      const target = event.target;\n      if (target && target !== window && target instanceof HTMLElement) {\n        const resourceTarget = target;\n        const url = resourceTarget.currentSrc || resourceTarget.src || resourceTarget.href;\n        if (!url) return;\n        this.transport.send({\n          event_type: \"error\",\n          type: \"resource\",\n          message: `Failed to load resource: ${url}`,\n          tagName: resourceTarget.tagName?.toLowerCase?.() ?? \"\",\n          url,\n          path: window.location.pathname\n        });\n        return;\n      }\n      const errorEvent = event;\n      this.transport.send({\n        event_type: \"error\",\n        type: errorEvent.error?.name ?? \"Error\",\n        stack: errorEvent.error?.stack,\n        message: errorEvent.message ?? \"Script error.\",\n        filename: errorEvent.filename,\n        lineno: errorEvent.lineno,\n        colno: errorEvent.colno,\n        path: window.location.pathname\n      });\n    };\n    window.addEventListener(\"error\", onError, true);\n    window.addEventListener(\"unhandledrejection\", (event) => {\n      const reason = event.reason;\n      const stack = typeof reason === \"object\" && reason !== null ? reason.stack : void 0;\n      const message = typeof reason === \"object\" && reason !== null ? reason.message : typeof reason === \"string\" ? reason : \"Unhandled promise rejection\";\n      this.transport.send({\n        event_type: \"error\",\n        type: \"unhandledrejection\",\n        stack,\n        message,\n        path: window.location.pathname\n      });\n    });\n  }\n};\n\nexport {\n  Errors\n};\n","// src/tracing/runtimePerformanceIntegration.ts\nvar DEFAULT_RUNTIME_PERFORMANCE_OPTIONS = {\n  longTask: true,\n  longTaskThresholdMs: 50,\n  jank: true,\n  jankSampleIntervalMs: 50,\n  jankThresholdMs: 100,\n  jankReportIntervalMs: 5e3,\n  fps: true,\n  lowFpsThreshold: 45,\n  lowFpsConsecutive: 2\n};\nvar RuntimePerformance = class {\n  constructor(transport, options = {}) {\n    this.transport = transport;\n    this.options = options;\n  }\n  longTaskObserver = null;\n  jankSampleTimer = null;\n  jankReportTimer = null;\n  lastJankSampleAt = 0;\n  jankCount = 0;\n  jankLagSum = 0;\n  jankLagMax = 0;\n  fpsRafId = null;\n  fpsFrameCount = 0;\n  fpsWindowStart = 0;\n  lowFpsConsecutiveCount = 0;\n  init() {\n    this.initLongTask();\n    this.initJank();\n    this.initFps();\n    document.addEventListener(\"visibilitychange\", () => {\n      if (document.visibilityState === \"hidden\") {\n        this.pause();\n      } else {\n        this.resume();\n      }\n    });\n  }\n  pause() {\n    this.stopJank();\n    this.stopFps();\n  }\n  resume() {\n    if (this.options.jank !== false) this.initJank();\n    if (this.options.fps !== false) this.initFps();\n  }\n  initLongTask() {\n    if (this.options.longTask === false) return;\n    if (typeof PerformanceObserver === \"undefined\") return;\n    const supported = PerformanceObserver.supportedEntryTypes;\n    if (supported && !supported.includes(\"longtask\")) return;\n    const threshold = this.options.longTaskThresholdMs ?? DEFAULT_RUNTIME_PERFORMANCE_OPTIONS.longTaskThresholdMs;\n    const observer = new PerformanceObserver((list) => {\n      for (const entry of list.getEntries()) {\n        if (entry.duration < threshold) continue;\n        this.transport.send({\n          event_type: \"performance\",\n          type: \"longTask\",\n          duration: entry.duration,\n          startTime: entry.startTime,\n          name: entry.name,\n          entryType: entry.entryType,\n          attribution: entry.attribution,\n          path: window.location.pathname,\n          at: Date.now()\n        });\n      }\n    });\n    this.longTaskObserver = observer;\n    try {\n      ;\n      observer.observe({\n        type: \"longtask\",\n        buffered: true\n      });\n    } catch {\n      try {\n        observer.observe({ entryTypes: [\"longtask\"] });\n      } catch {\n      }\n    }\n  }\n  initJank() {\n    if (this.options.jank === false) return;\n    if (document.visibilityState === \"hidden\") return;\n    if (this.jankSampleTimer !== null) return;\n    const interval = this.options.jankSampleIntervalMs ?? DEFAULT_RUNTIME_PERFORMANCE_OPTIONS.jankSampleIntervalMs;\n    const threshold = this.options.jankThresholdMs ?? DEFAULT_RUNTIME_PERFORMANCE_OPTIONS.jankThresholdMs;\n    const reportInterval = this.options.jankReportIntervalMs ?? DEFAULT_RUNTIME_PERFORMANCE_OPTIONS.jankReportIntervalMs;\n    this.lastJankSampleAt = performance.now();\n    this.jankSampleTimer = window.setInterval(() => {\n      const now = performance.now();\n      const drift = now - this.lastJankSampleAt - interval;\n      this.lastJankSampleAt = now;\n      if (drift >= threshold) {\n        this.jankCount += 1;\n        this.jankLagSum += drift;\n        this.jankLagMax = Math.max(this.jankLagMax, drift);\n      }\n    }, interval);\n    this.jankReportTimer = window.setInterval(() => {\n      if (this.jankCount <= 0) return;\n      this.transport.send({\n        event_type: \"performance\",\n        type: \"jank\",\n        count: this.jankCount,\n        lagAvg: this.jankLagSum / this.jankCount,\n        lagMax: this.jankLagMax,\n        threshold,\n        sampleInterval: interval,\n        reportInterval,\n        path: window.location.pathname,\n        at: Date.now()\n      });\n      this.jankCount = 0;\n      this.jankLagSum = 0;\n      this.jankLagMax = 0;\n    }, reportInterval);\n  }\n  stopJank() {\n    if (this.jankSampleTimer !== null) {\n      window.clearInterval(this.jankSampleTimer);\n      this.jankSampleTimer = null;\n    }\n    if (this.jankReportTimer !== null) {\n      window.clearInterval(this.jankReportTimer);\n      this.jankReportTimer = null;\n    }\n    this.jankCount = 0;\n    this.jankLagSum = 0;\n    this.jankLagMax = 0;\n  }\n  initFps() {\n    if (this.options.fps === false) return;\n    if (document.visibilityState === \"hidden\") return;\n    if (this.fpsRafId !== null) return;\n    const lowFpsThreshold = this.options.lowFpsThreshold ?? DEFAULT_RUNTIME_PERFORMANCE_OPTIONS.lowFpsThreshold;\n    const lowFpsConsecutive = this.options.lowFpsConsecutive ?? DEFAULT_RUNTIME_PERFORMANCE_OPTIONS.lowFpsConsecutive;\n    this.fpsFrameCount = 0;\n    this.fpsWindowStart = performance.now();\n    this.lowFpsConsecutiveCount = 0;\n    const loop = () => {\n      this.fpsFrameCount += 1;\n      const now = performance.now();\n      const elapsed = now - this.fpsWindowStart;\n      if (elapsed >= 1e3) {\n        const fps = this.fpsFrameCount * 1e3 / elapsed;\n        this.fpsFrameCount = 0;\n        this.fpsWindowStart = now;\n        if (fps < lowFpsThreshold) {\n          this.lowFpsConsecutiveCount += 1;\n          if (this.lowFpsConsecutiveCount === lowFpsConsecutive) {\n            this.transport.send({\n              event_type: \"performance\",\n              type: \"lowFps\",\n              fps,\n              threshold: lowFpsThreshold,\n              consecutive: this.lowFpsConsecutiveCount,\n              path: window.location.pathname,\n              at: Date.now()\n            });\n          }\n        } else {\n          this.lowFpsConsecutiveCount = 0;\n        }\n      }\n      this.fpsRafId = window.requestAnimationFrame(loop);\n    };\n    this.fpsRafId = window.requestAnimationFrame(loop);\n  }\n  stopFps() {\n    if (this.fpsRafId !== null) {\n      window.cancelAnimationFrame(this.fpsRafId);\n      this.fpsRafId = null;\n    }\n    this.fpsFrameCount = 0;\n    this.lowFpsConsecutiveCount = 0;\n  }\n};\n\nexport {\n  DEFAULT_RUNTIME_PERFORMANCE_OPTIONS,\n  RuntimePerformance\n};\n","// src/tracing/whiteScreenIntegration.ts\nvar DEFAULT_POINTS = [\n  [0.5, 0.5],\n  [0.1, 0.1],\n  [0.9, 0.1],\n  [0.1, 0.9],\n  [0.9, 0.9],\n  [0.5, 0.1],\n  [0.5, 0.9],\n  [0.1, 0.5],\n  [0.9, 0.5]\n];\nvar DEFAULT_WHITE_SCREEN_OPTIONS = {\n  wrapperSelectors: [\"html\", \"body\", \"#app\", \"#root\"],\n  checkDelayMs: 1e3,\n  maxChecks: 3,\n  checkIntervalMs: 1e3,\n  points: DEFAULT_POINTS,\n  runtimeWatch: false,\n  watchDurationMs: 1e4,\n  debounceMs: 200\n};\nfunction toSimpleSelector(el) {\n  const tag = el.tagName.toLowerCase();\n  const id = el.id ? `#${el.id}` : \"\";\n  const className = el.className;\n  const classes = typeof className === \"string\" && className.trim() ? `.${className.trim().split(/\\s+/).slice(0, 3).join(\".\")}` : \"\";\n  return `${tag}${id}${classes}`;\n}\nfunction pickWrapperElements(selectors) {\n  const els = [];\n  for (const selector of selectors) {\n    try {\n      const el = document.querySelector(selector);\n      if (el) els.push(el);\n    } catch {\n    }\n  }\n  return els;\n}\nvar WhiteScreen = class {\n  constructor(transport, options = {}) {\n    this.transport = transport;\n    this.options = options;\n  }\n  hasReported = false;\n  checkCount = 0;\n  timer = null;\n  mutationObserver = null;\n  mutationDebounceTimer = null;\n  armedUntil = 0;\n  armReason = null;\n  armTimer = null;\n  init() {\n    const startAuto = () => {\n      const delay = this.options.checkDelayMs ?? DEFAULT_WHITE_SCREEN_OPTIONS.checkDelayMs;\n      window.setTimeout(() => this.startPolling(\"auto\"), delay);\n      if (this.options.runtimeWatch) {\n        const duration = this.options.watchDurationMs ?? DEFAULT_WHITE_SCREEN_OPTIONS.watchDurationMs;\n        this.armRuntimeWatch(\"load\", duration);\n        this.initRuntimeWatch();\n      }\n    };\n    if (document.readyState === \"complete\") {\n      startAuto();\n    } else {\n      window.addEventListener(\"load\", startAuto, { once: true });\n    }\n  }\n  trigger(reason = \"manual\") {\n    if (this.options.runtimeWatch) {\n      const duration = this.options.watchDurationMs ?? DEFAULT_WHITE_SCREEN_OPTIONS.watchDurationMs;\n      this.armRuntimeWatch(reason, duration);\n    }\n    this.checkAndReport(reason);\n  }\n  startPolling(reason) {\n    this.stopPolling();\n    this.checkCount = 0;\n    const interval = this.options.checkIntervalMs ?? DEFAULT_WHITE_SCREEN_OPTIONS.checkIntervalMs;\n    const maxChecks = this.options.maxChecks ?? DEFAULT_WHITE_SCREEN_OPTIONS.maxChecks;\n    const tick = () => {\n      this.checkCount += 1;\n      this.checkAndReport(reason);\n      if (this.hasReported || this.checkCount >= maxChecks) {\n        this.stopPolling();\n        return;\n      }\n      this.timer = window.setTimeout(tick, interval);\n    };\n    tick();\n  }\n  stopPolling() {\n    if (this.timer !== null) {\n      window.clearTimeout(this.timer);\n      this.timer = null;\n    }\n  }\n  checkAndReport(reason) {\n    if (this.hasReported) return;\n    const result = this.check();\n    if (!result.isWhiteScreen) return;\n    this.hasReported = true;\n    this.teardownRuntimeWatch();\n    this.transport.send({\n      event_type: \"error\",\n      type: \"whiteScreen\",\n      reason,\n      result,\n      path: window.location.pathname,\n      at: Date.now()\n    });\n  }\n  initRuntimeWatch() {\n    if (this.mutationObserver) return;\n    const observeRoot = this.pickWatchRoot();\n    if (!observeRoot) return;\n    const debounceMs = this.options.debounceMs ?? DEFAULT_WHITE_SCREEN_OPTIONS.debounceMs;\n    this.mutationObserver = new MutationObserver(() => {\n      if (!this.isRuntimeArmed() || this.hasReported) return;\n      if (this.mutationDebounceTimer !== null) {\n        window.clearTimeout(this.mutationDebounceTimer);\n      }\n      this.mutationDebounceTimer = window.setTimeout(() => {\n        const reason = this.armReason ? `mutation:${this.armReason}` : \"mutation\";\n        this.checkAndReport(reason);\n      }, debounceMs);\n    });\n    this.mutationObserver.observe(observeRoot, {\n      childList: true,\n      subtree: true,\n      attributes: true,\n      characterData: true\n    });\n    this.bindRuntimeArmEvents();\n  }\n  pickWatchRoot() {\n    const selector = this.options.watchRootSelector;\n    if (selector) {\n      try {\n        return document.querySelector(selector);\n      } catch {\n        return null;\n      }\n    }\n    return document.documentElement;\n  }\n  bindRuntimeArmEvents() {\n    const duration = this.options.watchDurationMs ?? DEFAULT_WHITE_SCREEN_OPTIONS.watchDurationMs;\n    window.addEventListener(\n      \"click\",\n      () => {\n        this.armRuntimeWatch(\"click\", duration);\n      },\n      true\n    );\n    window.addEventListener(\"popstate\", () => this.armRuntimeWatch(\"popstate\", duration));\n    window.addEventListener(\"hashchange\", () => this.armRuntimeWatch(\"hashchange\", duration));\n    const history = window.history;\n    const pushState = history.pushState;\n    const replaceState = history.replaceState;\n    if (!pushState.__condev_monitor_patched__) {\n      const wrappedPushState = (...args) => {\n        const ret = pushState.apply(history, args);\n        window.dispatchEvent(new Event(\"__condev_monitor_history_change__\"));\n        return ret;\n      };\n      wrappedPushState.__condev_monitor_patched__ = true;\n      history.pushState = wrappedPushState;\n    }\n    if (!replaceState.__condev_monitor_patched__) {\n      const wrappedReplaceState = (...args) => {\n        const ret = replaceState.apply(history, args);\n        window.dispatchEvent(new Event(\"__condev_monitor_history_change__\"));\n        return ret;\n      };\n      wrappedReplaceState.__condev_monitor_patched__ = true;\n      history.replaceState = wrappedReplaceState;\n    }\n    window.addEventListener(\"__condev_monitor_history_change__\", () => this.armRuntimeWatch(\"history\", duration));\n  }\n  armRuntimeWatch(reason, durationMs) {\n    const now = Date.now();\n    this.armedUntil = now + Math.max(0, durationMs);\n    this.armReason = reason;\n    if (this.armTimer !== null) window.clearTimeout(this.armTimer);\n    this.armTimer = window.setTimeout(() => {\n      if (Date.now() >= this.armedUntil) {\n        this.armReason = null;\n      }\n    }, durationMs);\n  }\n  isRuntimeArmed() {\n    return Date.now() < this.armedUntil;\n  }\n  teardownRuntimeWatch() {\n    if (this.mutationDebounceTimer !== null) {\n      window.clearTimeout(this.mutationDebounceTimer);\n      this.mutationDebounceTimer = null;\n    }\n    if (this.armTimer !== null) {\n      window.clearTimeout(this.armTimer);\n      this.armTimer = null;\n    }\n    this.mutationObserver?.disconnect();\n    this.mutationObserver = null;\n  }\n  check() {\n    const points = this.options.points ?? DEFAULT_WHITE_SCREEN_OPTIONS.points;\n    const wrapperSelectors = this.options.wrapperSelectors ?? DEFAULT_WHITE_SCREEN_OPTIONS.wrapperSelectors;\n    const wrappers = pickWrapperElements(wrapperSelectors);\n    const width = window.innerWidth || document.documentElement.clientWidth || 0;\n    const height = window.innerHeight || document.documentElement.clientHeight || 0;\n    const pointResults = points.map(([rx, ry]) => {\n      const x = Math.max(0, Math.min(width - 1, Math.floor(width * rx)));\n      const y = Math.max(0, Math.min(height - 1, Math.floor(height * ry)));\n      const el = document.elementFromPoint(x, y);\n      const isWrapper = !el || el === document.documentElement || el === document.body || wrappers.some((w) => w === el);\n      return {\n        x,\n        y,\n        element: el ? toSimpleSelector(el) : null,\n        isWrapper\n      };\n    });\n    const isWhiteScreen = pointResults.length > 0 && pointResults.every((p) => p.isWrapper);\n    return { isWhiteScreen, points: pointResults };\n  }\n};\n\nexport {\n  DEFAULT_WHITE_SCREEN_OPTIONS,\n  WhiteScreen\n};\n","// src/baseClient.ts\nvar getTransport = () => null;\nvar Monitoring = class {\n  constructor(options) {\n    this.options = options;\n  }\n  transport = null;\n  init(transport) {\n    this.transport = transport;\n    getTransport = () => transport;\n    this.options.integrations?.forEach((integration) => {\n      integration.init(transport);\n    });\n  }\n  // reportMessage(message: string) {\n  //     this.transport?.send({ type: 'message', message })\n  // }\n  // reportEvent(event: unknown) {\n  //     this.transport?.send({ type: 'event', event })\n  // }\n};\n\nexport {\n  getTransport,\n  Monitoring\n};\n","import {\n  getTransport\n} from \"./chunk-YPGWPUPD.mjs\";\n\n// src/captures.ts\nfunction captureException(exception) {\n  getTransport()?.send({ event_type: \"custom\", type: \"customError\", exception });\n}\nfunction captureMessage(message) {\n  getTransport()?.send({ event_type: \"custom\", type: \"customMessage\", message });\n}\nfunction captureEvent(eventData) {\n  getTransport()?.send({ event_type: \"custom\", type: \"customEvent\", eventData });\n}\n\nexport {\n  captureException,\n  captureMessage,\n  captureEvent\n};\n","import {\n  Replay\n} from \"./chunk-PIWADR7D.mjs\";\nimport {\n  BrowserTransport\n} from \"./chunk-VZRKOJJ7.mjs\";\nimport {\n  Errors\n} from \"./chunk-K5NW3E3Y.mjs\";\nimport {\n  DEFAULT_RUNTIME_PERFORMANCE_OPTIONS,\n  RuntimePerformance\n} from \"./chunk-6IDWWMXA.mjs\";\nimport {\n  DEFAULT_WHITE_SCREEN_OPTIONS,\n  WhiteScreen\n} from \"./chunk-OFSDVTR3.mjs\";\n\n// src/index.ts\nimport { Monitoring } from \"@condev-monitor/monitor-sdk-core\";\nimport { Metrics } from \"@condev-monitor/monitor-sdk-browser-utils\";\nvar whiteScreen = null;\nvar triggerWhiteScreenCheck = (reason) => {\n  whiteScreen?.trigger(reason);\n};\nvar init = (options) => {\n  const monitoring = new Monitoring({\n    dsn: options.dsn,\n    integrations: options?.integrations\n  });\n  const transport = new BrowserTransport(options.dsn, {\n    release: options.release,\n    dist: options.dist\n  });\n  monitoring.init(transport);\n  new Errors(transport).init();\n  new Metrics(transport).init();\n  if (options.replay) {\n    new Replay(transport, options.dsn).init();\n  }\n  if (options.performance !== false) {\n    const perfOptions = typeof options.performance === \"object\" ? options.performance : {};\n    new RuntimePerformance(transport, { ...DEFAULT_RUNTIME_PERFORMANCE_OPTIONS, ...perfOptions }).init();\n  }\n  if (options.whiteScreen !== false) {\n    const whiteScreenOptions = typeof options.whiteScreen === \"object\" ? options.whiteScreen : {};\n    whiteScreen = new WhiteScreen(transport, { ...DEFAULT_WHITE_SCREEN_OPTIONS, ...whiteScreenOptions });\n    whiteScreen.init();\n  }\n  return monitoring;\n};\nexport {\n  DEFAULT_RUNTIME_PERFORMANCE_OPTIONS,\n  DEFAULT_WHITE_SCREEN_OPTIONS,\n  init,\n  triggerWhiteScreenCheck\n};\n","export default \"__VITE_PUBLIC_ASSET__d6945b69__\"","export function setupCounter(element: HTMLButtonElement) {\n    let counter = 0\n    const setCounter = (count: number) => {\n        counter = count\n        element.innerHTML = `count is ${counter}`\n    }\n    element.addEventListener('click', () => setCounter(counter + 1))\n    setCounter(0)\n}\n","export default \"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20aria-hidden='true'%20role='img'%20class='iconify%20iconify--logos'%20width='32'%20height='32'%20preserveAspectRatio='xMidYMid%20meet'%20viewBox='0%200%20256%20256'%3e%3cpath%20fill='%23007ACC'%20d='M0%20128v128h256V0H0z'%3e%3c/path%3e%3cpath%20fill='%23FFF'%20d='m56.612%20128.85l-.081%2010.483h33.32v94.68h23.568v-94.68h33.321v-10.28c0-5.69-.122-10.444-.284-10.566c-.122-.162-20.4-.244-44.983-.203l-44.74.122l-.121%2010.443Zm149.955-10.742c6.501%201.625%2011.459%204.51%2016.01%209.224c2.357%202.52%205.851%207.111%206.136%208.208c.08.325-11.053%207.802-17.798%2011.988c-.244.162-1.22-.894-2.317-2.52c-3.291-4.795-6.745-6.867-12.028-7.233c-7.76-.528-12.759%203.535-12.718%2010.321c0%201.992.284%203.17%201.097%204.795c1.707%203.536%204.876%205.649%2014.832%209.956c18.326%207.883%2026.168%2013.084%2031.045%2020.48c5.445%208.249%206.664%2021.415%202.966%2031.208c-4.063%2010.646-14.14%2017.879-28.323%2020.276c-4.388.772-14.79.65-19.504-.203c-10.28-1.828-20.033-6.908-26.047-13.572c-2.357-2.6-6.949-9.387-6.664-9.874c.122-.163%201.178-.813%202.356-1.504c1.138-.65%205.446-3.129%209.509-5.485l7.355-4.267l1.544%202.276c2.154%203.29%206.867%207.801%209.712%209.305c8.167%204.307%2019.383%203.698%2024.909-1.26c2.357-2.153%203.332-4.388%203.332-7.68c0-2.966-.366-4.266-1.91-6.501c-1.99-2.845-6.054-5.242-17.595-10.24c-13.206-5.69-18.895-9.224-24.096-14.832c-3.007-3.25-5.852-8.452-7.03-12.8c-.975-3.617-1.22-12.678-.447-16.335c2.723-12.76%2012.353-21.659%2026.25-24.3c4.51-.853%2014.994-.528%2019.424.569Z'%3e%3c/path%3e%3c/svg%3e\"","import './style.css'\n\nimport { init, triggerWhiteScreenCheck } from '@condev-monitor/monitor-sdk-browser'\nimport { captureEvent, captureException, captureMessage } from '@condev-monitor/monitor-sdk-core'\n\nimport viteLogo from '/vite.svg'\n\nimport { setupCounter } from './counter.ts'\nimport typescriptLogo from './typescript.svg'\n\nconst release = (import.meta as { env?: Record<string, string | undefined> }).env?.VITE_MONITOR_RELEASE\nconst dist = (import.meta as { env?: Record<string, string | undefined> }).env?.VITE_MONITOR_DIST\n\ninit({\n    // target ip\n    // target ip\n    // dsn: 'https://monitor.condevtools.com/dsn-api/tracking/vanillaVLiV45',\n    dsn: 'http://localhost:8082/dsn-api/tracking/vanilla3XGJsf',\n    release,\n    dist,\n    whiteScreen: {\n        runtimeWatch: true,\n    },\n    performance: {\n        lowFpsThreshold: 55,\n        lowFpsConsecutive: 1,\n    },\n    replay: true,\n})\n\nfunction myFn() {\n    throw new Error('This is a test error triggered by button click')\n}\n\nfunction blockMainThread(durationMs: number) {\n    const start = performance.now()\n    while (performance.now() - start < durationMs) {\n        // busy loop\n    }\n}\n\nlet fpsStressRafId: number | null = null\nfunction toggleFpsStress() {\n    if (fpsStressRafId !== null) {\n        cancelAnimationFrame(fpsStressRafId)\n        fpsStressRafId = null\n        return\n    }\n\n    const loop = () => {\n        // Do some work each frame to intentionally drop FPS.\n        blockMainThread(35)\n        fpsStressRafId = requestAnimationFrame(loop)\n    }\n    fpsStressRafId = requestAnimationFrame(loop)\n}\n\ndocument.querySelector<HTMLDivElement>('#app')!.innerHTML = `\n  <div>\n    <a href=\"https://vite.dev\" target=\"_blank\">\n      <img src=\"${viteLogo}\" class=\"logo\" alt=\"Vite logo\" />\n    </a>\n    <a href=\"https://www.typescriptlang.org/\" target=\"_blank\">\n      <img src=\"${typescriptLogo}\" class=\"logo vanilla\" alt=\"TypeScript logo\" />\n    </a>\n    <h1>Vite + TypeScript</h1>\n    <div class=\"card\">\n      <button id=\"counter\" type=\"button\"></button>\n      <button id=\"uncaught-error-btn\" type=\"button\" style=\"margin-left: 10px; background-color: #f44336;\">Uncaught Error</button>\n      <button id=\"uncaught-typeerror-btn\" type=\"button\" style=\"margin-left: 10px; background-color: #f44336;\">Uncaught TypeError</button>\n      <button id=\"uncaught-referenceerror-btn\" type=\"button\" style=\"margin-left: 10px; background-color: #f44336;\">Uncaught ReferenceError</button>\n    </div>\n    <div class=\"card\" style=\"padding-top: 0;\">\n      <button id=\"unhandledrejection-btn\" type=\"button\" style=\"background-color: #ff9800;\">Unhandled Rejection</button>\n      <button id=\"resource-error-btn\" type=\"button\" style=\"margin-left: 10px; background-color: #03a9f4;\">Resource Load Error</button>\n      <button id=\"caught-error-manual-btn\" type=\"button\" style=\"margin-left: 10px; background-color: #9c27b0;\">Caught Error (manual)</button>\n      <button id=\"custom-message-btn\" type=\"button\" style=\"margin-left: 10px; background-color: #607d8b;\">Custom Message</button>\n      <button id=\"custom-event-btn\" type=\"button\" style=\"margin-left: 10px; background-color: #4caf50;\">Custom Event</button>\n      <button id=\"white-screen-btn\" type=\"button\" style=\"margin-left: 10px; background-color: #ffffff; color: #111;\">White Screen</button>\n    </div>\n    <div class=\"card\" style=\"padding-top: 0;\">\n      <button id=\"route-change-btn\" type=\"button\" style=\"background-color: #2196f3;\">Route: pushState</button>\n      <button id=\"route-change-white-screen-btn\" type=\"button\" style=\"margin-left: 10px; background-color: #e91e63;\">Route: pushState + White Screen</button>\n    </div>\n    <div class=\"card\" style=\"padding-top: 0;\">\n      <button id=\"longtask-btn\" type=\"button\" style=\"background-color: #ff5722;\">Long Task (200ms)</button>\n      <button id=\"jank-btn\" type=\"button\" style=\"margin-left: 10px; background-color: #795548;\">Jank (5s)</button>\n      <button id=\"fps-btn\" type=\"button\" style=\"margin-left: 10px; background-color: #00bcd4;\">Toggle FPS Stress</button>\n    </div>\n    <p class=\"read-the-docs\">\n      Click on the Vite and TypeScript logos to learn more\n    </p>\n  </div>\n`\n\nsetupCounter(document.querySelector<HTMLButtonElement>('#counter')!)\n\ndocument.querySelector<HTMLButtonElement>('#uncaught-error-btn')!.addEventListener('click', () => {\n    myFn()\n})\n\ndocument.querySelector<HTMLButtonElement>('#uncaught-typeerror-btn')!.addEventListener('click', () => {\n    ;(null as unknown as { call(): void }).call()\n})\n\ndocument.querySelector<HTMLButtonElement>('#uncaught-referenceerror-btn')!.addEventListener('click', () => {\n    new Function('return notDeclaredVariable')()\n})\n\ndocument.querySelector<HTMLButtonElement>('#unhandledrejection-btn')!.addEventListener('click', () => {\n    Promise.reject(new Error('Unhandled promise rejection from button click'))\n})\n\ndocument.querySelector<HTMLButtonElement>('#resource-error-btn')!.addEventListener('click', () => {\n    const img = new Image()\n    img.alt = 'broken image (for resource error test)'\n    img.style.width = '64px'\n    img.style.height = '64px'\n    img.style.marginLeft = '10px'\n    img.src = `/__condev_monitor_resource_error_test__.png?t=${Date.now()}`\n    document.querySelector<HTMLDivElement>('#app')!.appendChild(img)\n})\n\ndocument.querySelector<HTMLButtonElement>('#caught-error-manual-btn')!.addEventListener('click', () => {\n    try {\n        throw new Error('Caught error (will not trigger window.onerror)')\n    } catch (error) {\n        captureException(error instanceof Error ? error : new Error(String(error)))\n    }\n})\n\ndocument.querySelector<HTMLButtonElement>('#custom-message-btn')!.addEventListener('click', () => {\n    captureMessage('Custom message from vanilla button click')\n})\n\ndocument.querySelector<HTMLButtonElement>('#custom-event-btn')!.addEventListener('click', () => {\n    captureEvent({\n        eventType: 'button_click',\n        data: {\n            source: 'vanilla',\n            at: Date.now(),\n            path: window.location.pathname,\n        },\n    })\n})\n\ndocument.querySelector<HTMLButtonElement>('#white-screen-btn')!.addEventListener('click', () => {\n    const app = document.querySelector<HTMLDivElement>('#app')\n    if (app) {\n        app.innerHTML = ''\n        app.style.minHeight = '100vh'\n        app.style.width = '100vw'\n        app.style.padding = '0'\n    }\n    document.documentElement.style.backgroundColor = '#ffffff'\n    document.body.style.backgroundColor = '#ffffff'\n    document.body.style.color = '#111111'\n\n    triggerWhiteScreenCheck('vanilla-button')\n})\n\ndocument.querySelector<HTMLButtonElement>('#route-change-btn')!.addEventListener('click', () => {\n    history.pushState({}, '', `/route-test-${Date.now()}`)\n\n    // Create a small visible DOM mutation so MutationObserver path can run a non-white-screen check.\n    const status = document.createElement('div')\n    status.style.marginTop = '12px'\n    status.style.fontSize = '12px'\n    status.style.opacity = '0.7'\n    status.textContent = `route changed to: ${window.location.pathname}`\n    document.querySelector<HTMLDivElement>('#app')!.appendChild(status)\n})\n\ndocument.querySelector<HTMLButtonElement>('#route-change-white-screen-btn')!.addEventListener('click', () => {\n    history.pushState({}, '', `/route-white-screen-${Date.now()}`)\n\n    // Simulate route-render failure: DOM becomes blank after route change.\n    const app = document.querySelector<HTMLDivElement>('#app')\n    if (app) {\n        app.innerHTML = ''\n        app.style.minHeight = '100vh'\n        app.style.width = '100vw'\n        app.style.padding = '0'\n    }\n    document.documentElement.style.backgroundColor = '#ffffff'\n    document.body.style.backgroundColor = '#ffffff'\n    document.body.style.color = '#111111'\n})\n\ndocument.querySelector<HTMLButtonElement>('#longtask-btn')!.addEventListener('click', () => {\n    blockMainThread(200)\n})\n\ndocument.querySelector<HTMLButtonElement>('#jank-btn')!.addEventListener('click', () => {\n    const startedAt = Date.now()\n    const timer = window.setInterval(() => {\n        blockMainThread(150)\n        if (Date.now() - startedAt > 5000) {\n            window.clearInterval(timer)\n        }\n    }, 500)\n})\n\ndocument.querySelector<HTMLButtonElement>('#fps-btn')!.addEventListener('click', () => {\n    toggleFpsStress()\n})\n"],"names":["NodeType","isElement","n","isShadowRoot","host","isNativeShadowDom","shadowRoot","fixBrowserCompatibilityIssuesInCSS","cssText","getCssRulesString","s","rules","getCssRuleString","rule","cssStringified","isCSSImportRule","Mirror","_a","id","_this","childNode","node","meta","oldNode","createMirror","maskInputValue","maskInputOptions","tagName","type","value","maskInputFn","text","ORIGINAL_ATTRIBUTE_NAME","is2DCanvasBlank","canvas","ctx","chunkSize","x","y","getImageData","originalGetImageData","pixelBuffer","pixel","_id","tagNameRegex","IGNORED_NODE","genId","getValidTagName","element","processedTagName","stringifyStyleSheet","sheet","extractOrigin","url","origin","canvasService","canvasCtx","URL_IN_CSS_REF","RELATIVE_PATH","DATA_URI","absoluteToStylesheet","href","quote1","path1","quote2","path2","path3","filePath","maybeQuote","stack","parts","_i","parts_1","part","SRCSET_NOT_SPACES","SRCSET_COMMAS_OR_SPACES","getAbsoluteSrcsetString","doc","attributeValue","pos","collectCharacters","regEx","chars","match","output","absoluteToDoc","descriptorsStr","inParens","a","isSVGElement","el","getHref","transformAttribute","name","_isBlockedElement","blockClass","blockSelector","eIndex","className","classMatchesRegex","regex","checkAncestors","needMaskingText","maskTextClass","maskTextSelector","onceIframeLoaded","iframeEl","listener","iframeLoadTimeout","win","fired","readyState","timer_1","blankUrl","onceStylesheetLoaded","link","styleSheetLoadTimeout","styleSheetLoaded","timer","serializeNode","options","mirror","inlineStylesheet","maskTextFn","_b","dataURLOptions","inlineImages","recordCanvas","keepIframeSrcFn","_c","newlyAddedElement","rootId","getRootId","serializeElementNode","serializeTextNode","docId","parentTagName","textContent","isStyle","isScript","err","needBlock","attributes","len","i","attr","stylesheet","checked","canvasDataURL","blankCanvas","blankCanvasDataURL","image_1","oldValue_1","recordInlineImage","_d","width","height","lowerIfExists","maybeAttr","slimDOMExcluded","sn","slimDOMOptions","serializeNodeWithId","skipChild","_e","_f","onSerialize","onIframeLoad","_g","onStylesheetLoad","_h","stylesheetLoadTimeout","_j","_k","_l","preserveWhiteSpace","_serializedNode","serializedNode","recordChild","bypassOptions","_m","childN","serializedChildNode","_o","_p","iframeDoc","serializedIframeNode","serializedLinkNode","snapshot","maskAllInputs","slimDOM","on","fn","target","DEPARTED_MIRROR_ACCESS_WARNING","_mirror","prop","receiver","throttle","func","wait","timeout","previous","args","now","remaining","context","hookSetter","key","d","isRevoked","original","patch","source","replacement","wrapped","getWindowHeight","getWindowWidth","isBlocked","isSerialized","isIgnored","isAncestorRemoved","isTouchEvent","event","polyfill","isSerializedIframe","isSerializedStylesheet","hasShadowRoot","StyleSheetMirror","newId","EventType","EventType2","IncrementalSource","IncrementalSource2","MouseInteractions","MouseInteractions2","CanvasContext","CanvasContext2","isNodeInLinkedList","DoubleLinkedList","position","current","index","moveKey","parentId","MutationBuffer","mutations","adds","addList","getNextId","ns","nextId","pushAdd","shadowHost","rootShadowHost","notInDoc","currentN","iframe","childSn","isParentRemoved","isAncestorInSet","candidate","_node","unhandledNode","payload","attribute","m","item","old","styleObj","pname","newValue","newPriority","nodeId","deepDelete","targetId","addsSet","removes","_isParentRemoved","parentNode","r","set","_isAncestorInSet","mutationBuffers","isCSSGroupingRuleSupported","isCSSMediaRuleSupported","isCSSSupportsRuleSupported","isCSSConditionRuleSupported","getEventTarget","path","initMutationObserver","rootEl","mutationBuffer","mutationObserverCtor","angularZoneSymbol","observer","initMoveObserver","mousemoveCb","sampling","threshold","callbackThreshold","positions","timeBaseline","wrappedCb","totalOffset","p","updatePosition","evt","clientX","clientY","handlers","h","initMouseInteractionObserver","mouseInteractionCb","disableMap","getHandler","eventKey","e","eventName","handler","initScrollObserver","scrollCb","scrollEl","initViewportResizeObserver","viewportResizeCb","lastH","lastW","updateDimension","wrapEventWithUserTriggeredFlag","v","enable","INPUT_TAGS","lastInputValueMap","initInputObserver","inputCb","ignoreClass","userTriggeredOnInput","eventHandler","userTriggered","isChecked","cbWithDedup","lastInputValue","currentWindow","propertyDescriptor","hookProperties","getNestedCSSRulePositions","recurse","childRule","getIdAndStyleId","styleMirror","styleId","initStyleSheetObserver","styleSheetRuleCb","stylesheetManager","insertRule","deleteRule","replace","replaceSync","supportedNestedCSSRuleTypes","unmodifiedFunctions","typeKey","initAdoptedStyleSheetObserver","hostId","patchTarget","originalPropertyDescriptor","sheets","result","initStyleDeclarationObserver","styleDeclarationCb","ignoreCSSAttributes","setProperty","property","priority","removeProperty","initMediaInteractionObserver","mediaInteractionCb","currentTime","volume","muted","playbackRate","initFontObserver","fontCb","fontMap","originalFontFace","family","descriptors","fontFace","restoreHandler","initSelectionObserver","param","selectionCb","collapsed","updateSelection","selection","ranges","count","range","startContainer","startOffset","endContainer","endOffset","mergeHooks","o","hooks","mutationCb","canvasMutationCb","initObservers","mutationObserver","mousemoveHandler","mouseInteractionHandler","scrollHandler","viewportResizeHandler","inputHandler","mediaInteractionHandler","styleSheetObserver","adoptedStyleSheetObserver","styleDeclarationObserver","fontObserver","selectionObserver","pluginHandlers","plugin","CrossOriginIframeMirror","generateIdFn","remoteId","idToRemoteMap","remoteToIdMap","idToRemoteIdMap","remoteIdToIdMap","map","ids","IframeManager","cb","message","transformedEvent","style","iframeMirror","obj","keys","child","ShadowDomManager","manager","option","iframeElement","restorePatch","__rest","t","__awaiter","thisArg","_arguments","P","generator","adopt","resolve","reject","fulfilled","step","rejected","lookup","encode","arraybuffer","bytes","base64","canvasVarMap","variableListFor","ctor","contextMap","saveWebGLVar","isInstanceOfWebGLObject","list","serializeArg","arg","src","serializeArgs","initCanvas2DMutationObserver","props2D","recordArgs","hookHandler","initCanvasContextObserver","contextType","patchGLPrototype","prototype","props","mutation","initCanvasWebGLMutationObserver","WorkerClass","WorkerThreads","module","decodeBase64","enableUnicode","createBase64WorkerFactory","sourcemapArg","enableUnicodeArg","start","body","binaryString","createURL","blob","kIsNodeJS","isNodeJS","createBase64WorkerFactory$1","createBase64WorkerFactory$2","WorkerFactory","CanvasManager","fps","canvasContextReset","snapshotInProgressMap","worker","timeBetweenSnapshots","lastSnapshotTime","rafId","getCanvas","matchedCanvas","takeCanvasSnapshots","timestamp","bitmap","canvas2DReset","canvasWebGL1and2Reset","setLatestRAFTimestamp","values","valuesWithType","StylesheetManager","linkEl","adoptedStyleSheetData","styles","wrapEvent","wrappedEmit","takeFullSnapshot","canvasManager","recording","record","emit","checkoutEveryNms","checkoutEveryNth","_maskInputOptions","_slimDOMOptions","packFn","mousemoveWait","recordCrossOriginIframes","collectFonts","plugins","inEmittingFrame","passEmitsToParent","lastFullSnapshotEvent","incrementalSnapshotCount","eventProcessor","isCheckout","buf","exceedCount","exceedTime","wrappedMutationEmit","wrappedScrollEmit","wrappedCanvasMutationEmit","wrappedAdoptedStyleSheetEmit","iframeManager","shadowDomManager","observe","init","error","tag","parseDsn","dsn","appId","basePath","trackingIndex","nowMs","Replay","transport","minBuffer","parsed","configUrl","replayEnabled","res","originalSend","replayUploadUrl","data","replayId","errorAtMs","windowStartMs","windowEndMs","timerId","cutoff","beforeTimestamp","events","headTimestamp","adjustedTimestamp","fullSnapshotIndex","baseStartMs","base","firstFullSnapshotIdx","picked2","startedAtMs","normalized2","head","tail","trimmed","picked","normalized","pending","endedAtMs","doubleRAF","bfcacheRestoreTime","getBFCacheRestoreTime","onBFCacheRestore","firstHiddenTime","initHiddenTime","onVisibilityUpdate","removeChangeListeners","addChangeListeners","getVisibilityWatcher","runOnce","called","onHidden","whenIdle","rIC","handle","callback","opts","po","whenActivated","generateUniqueID","getNavigationEntry","navigationEntry","getActivationStart","navEntry","initMetric","navigationType","getRating","thresholds","bindReporter","metric","reportAllChanges","prevValue","delta","forceReport","LCPThresholds","reportedMetricIDs","onLCP","onReport","visibilityWatcher","report","handleEntries","entries","entry","stopListening","TTFBThresholds","whenReady","onTTFB","FCPThresholds","onFCP","CLSThresholds","onCLS","sessionValue","sessionEntries","firstSessionEntry","lastSessionEntry","interactionCountEstimate","minKnownInteractionId","maxKnownInteractionId","updateEstimate","getInteractionCount","initInteractionCountPolyfill","longestInteractionList","longestInteractionMap","DEFAULT_DURATION_THRESHOLD","prevInteractionCount","getInteractionCountForNavigation","resetInteractions","estimateP98LongestInteraction","candidateInteractionIndex","MAX_INTERACTIONS_TO_CONSIDER","entryPreProcessingCallbacks","processInteractionEntry","minLongestInteraction","existingInteraction","interaction","b","INPThresholds","onINP","inp","onLoad","navigationEntries","loadTime","Metrics","metricFn","getBrowserInfo","BrowserTransport","browserInfo","rawMessage","Errors","onError","resourceTarget","errorEvent","reason","DEFAULT_RUNTIME_PERFORMANCE_OPTIONS","RuntimePerformance","supported","interval","reportInterval","drift","lowFpsThreshold","lowFpsConsecutive","loop","elapsed","DEFAULT_POINTS","DEFAULT_WHITE_SCREEN_OPTIONS","toSimpleSelector","classes","pickWrapperElements","selectors","els","selector","WhiteScreen","startAuto","delay","duration","maxChecks","tick","observeRoot","debounceMs","history","pushState","replaceState","wrappedPushState","ret","wrappedReplaceState","durationMs","points","wrapperSelectors","wrappers","pointResults","rx","ry","isWrapper","w","getTransport","Monitoring","integration","captureException","exception","captureMessage","captureEvent","eventData","whiteScreen","triggerWhiteScreenCheck","monitoring","perfOptions","whiteScreenOptions","viteLogo","setupCounter","counter","setCounter","typescriptLogo","release","dist","myFn","blockMainThread","fpsStressRafId","toggleFpsStress","img","app","status","startedAt"],"mappings":"yxBAAA,IAAIA,GACH,SAAUA,EAAU,CACjBA,EAASA,EAAS,SAAc,CAAC,EAAI,WACrCA,EAASA,EAAS,aAAkB,CAAC,EAAI,eACzCA,EAASA,EAAS,QAAa,CAAC,EAAI,UACpCA,EAASA,EAAS,KAAU,CAAC,EAAI,OACjCA,EAASA,EAAS,MAAW,CAAC,EAAI,QAClCA,EAASA,EAAS,QAAa,CAAC,EAAI,SACxC,GAAGA,IAAaA,EAAW,CAAA,EAAG,EAE9B,SAASC,GAAUC,EAAG,CAClB,OAAOA,EAAE,WAAaA,EAAE,YAC5B,CACA,SAASC,GAAaD,EAAG,CACrB,IAAIE,EAA6CF,GAAE,KACnD,OAA4DE,GAAK,aAAgBF,CACrF,CACA,SAASG,GAAkBC,EAAY,CACnC,OAAO,OAAO,UAAU,SAAS,KAAKA,CAAU,IAAM,qBAC1D,CACA,SAASC,GAAmCC,EAAS,CACjD,OAAIA,EAAQ,SAAS,yBAAyB,GAC1C,CAACA,EAAQ,SAAS,iCAAiC,IACnDA,EAAUA,EAAQ,QAAQ,0BAA2B,wDAAwD,GAE1GA,CACX,CACA,SAASC,GAAkBC,EAAG,CAC1B,GAAI,CACA,IAAIC,EAAQD,EAAE,OAASA,EAAE,SACzB,OAAOC,EACDJ,GAAmC,MAAM,KAAKI,CAAK,EAAE,IAAIC,EAAgB,EAAE,KAAK,EAAE,CAAC,EACnF,IACV,MACc,CACV,OAAO,IACX,CACJ,CACA,SAASA,GAAiBC,EAAM,CAC5B,IAAIC,EAAiBD,EAAK,QAC1B,GAAIE,GAAgBF,CAAI,EACpB,GAAI,CACAC,EAAiBL,GAAkBI,EAAK,UAAU,GAAKC,CAC3D,MACW,CACX,CAEJ,OAAOA,CACX,CACA,SAASC,GAAgBF,EAAM,CAC3B,MAAO,eAAgBA,CAC3B,CACA,IAAIG,IAAU,UAAY,CACtB,SAASA,GAAS,CACd,KAAK,UAAY,IAAI,IACrB,KAAK,YAAc,IAAI,OAC3B,CACA,OAAAA,EAAO,UAAU,MAAQ,SAAUd,EAAG,CAClC,IAAIe,EACJ,GAAI,CAACf,EACD,MAAO,GACX,IAAIgB,GAAMD,EAAK,KAAK,QAAQf,CAAC,KAAO,MAAQe,IAAO,OAAS,OAASA,EAAG,GACxE,OAAOC,GAAoC,EAC/C,EACAF,EAAO,UAAU,QAAU,SAAUE,EAAI,CACrC,OAAO,KAAK,UAAU,IAAIA,CAAE,GAAK,IACrC,EACAF,EAAO,UAAU,OAAS,UAAY,CAClC,OAAO,MAAM,KAAK,KAAK,UAAU,KAAI,CAAE,CAC3C,EACAA,EAAO,UAAU,QAAU,SAAUd,EAAG,CACpC,OAAO,KAAK,YAAY,IAAIA,CAAC,GAAK,IACtC,EACAc,EAAO,UAAU,kBAAoB,SAAUd,EAAG,CAC9C,IAAIiB,EAAQ,KACRD,EAAK,KAAK,MAAMhB,CAAC,EACrB,KAAK,UAAU,OAAUgB,CAAE,EACvBhB,EAAE,YACFA,EAAE,WAAW,QAAQ,SAAUkB,EAAW,CACtC,OAAOD,EAAM,kBAAkBC,CAAS,CAC5C,CAAC,CAET,EACAJ,EAAO,UAAU,IAAM,SAAUE,EAAI,CACjC,OAAO,KAAK,UAAU,IAAIA,CAAE,CAChC,EACAF,EAAO,UAAU,QAAU,SAAUK,EAAM,CACvC,OAAO,KAAK,YAAY,IAAIA,CAAI,CACpC,EACAL,EAAO,UAAU,IAAM,SAAUd,EAAGoB,EAAM,CACtC,IAAIJ,EAAKI,EAAK,GACd,KAAK,UAAU,IAAIJ,EAAIhB,CAAC,EACxB,KAAK,YAAY,IAAIA,EAAGoB,CAAI,CAChC,EACAN,EAAO,UAAU,QAAU,SAAUE,EAAIhB,EAAG,CACxC,IAAIqB,EAAU,KAAK,QAAQL,CAAE,EAC7B,GAAIK,EAAS,CACT,IAAID,EAAO,KAAK,YAAY,IAAIC,CAAO,EACnCD,GACA,KAAK,YAAY,IAAIpB,EAAGoB,CAAI,CACpC,CACA,KAAK,UAAU,IAAIJ,EAAIhB,CAAC,CAC5B,EACAc,EAAO,UAAU,MAAQ,UAAY,CACjC,KAAK,UAAY,IAAI,IACrB,KAAK,YAAc,IAAI,OAC3B,EACOA,CACX,GAAC,EACD,SAASQ,IAAe,CACpB,OAAO,IAAIR,EACf,CACA,SAASS,GAAeR,EAAI,CACxB,IAAIS,EAAmBT,EAAG,iBAAkBU,EAAUV,EAAG,QAASW,EAAOX,EAAG,KAAMY,EAAQZ,EAAG,MAAOa,EAAcb,EAAG,YACjHc,EAAOF,GAAS,GACpB,OAAIH,EAAiBC,EAAQ,aAAa,GACtCD,EAAiBE,CAAI,KACjBE,EACAC,EAAOD,EAAYC,CAAI,EAGvBA,EAAO,IAAI,OAAOA,EAAK,MAAM,GAG9BA,CACX,CACA,IAAIC,GAA0B,qBAC9B,SAASC,GAAgBC,EAAQ,CAC7B,IAAIC,EAAMD,EAAO,WAAW,IAAI,EAChC,GAAI,CAACC,EACD,MAAO,GAEX,QADIC,EAAY,GACPC,EAAI,EAAGA,EAAIH,EAAO,MAAOG,GAAKD,EACnC,QAASE,EAAI,EAAGA,EAAIJ,EAAO,OAAQI,GAAKF,EAAW,CAC/C,IAAIG,EAAeJ,EAAI,aACnBK,EAAuBR,MAA2BO,EAChDA,EAAaP,EAAuB,EACpCO,EACFE,EAAc,IAAI,YAAYD,EAAqB,KAAKL,EAAKE,EAAGC,EAAG,KAAK,IAAIF,EAAWF,EAAO,MAAQG,CAAC,EAAG,KAAK,IAAID,EAAWF,EAAO,OAASI,CAAC,CAAC,EAAE,KAAK,MAAM,EACjK,GAAIG,EAAY,KAAK,SAAUC,EAAO,CAAE,OAAOA,IAAU,CAAG,CAAC,EACzD,MAAO,EACf,CAEJ,MAAO,EACX,CAEA,IAAIC,GAAM,EACNC,GAAe,IAAI,OAAO,cAAc,EACxCC,GAAe,GACnB,SAASC,IAAQ,CACb,OAAOH,IACX,CACA,SAASI,GAAgBC,EAAS,CAC9B,GAAIA,aAAmB,gBACnB,MAAO,OAEX,IAAIC,EAAmBD,EAAQ,QAAQ,YAAW,EAAG,KAAI,EACzD,OAAIJ,GAAa,KAAKK,CAAgB,EAC3B,MAEJA,CACX,CACA,SAASC,GAAoBC,EAAO,CAChC,OAAOA,EAAM,SACP,MAAM,KAAKA,EAAM,QAAQ,EACtB,IAAI,SAAUtC,EAAM,CAAE,OAAOA,EAAK,SAAW,EAAI,CAAC,EAClD,KAAK,EAAE,EACV,EACV,CACA,SAASuC,GAAcC,EAAK,CACxB,IAAIC,EAAS,GACb,OAAID,EAAI,QAAQ,IAAI,EAAI,GACpBC,EAASD,EAAI,MAAM,GAAG,EAAE,MAAM,EAAG,CAAC,EAAE,KAAK,GAAG,EAG5CC,EAASD,EAAI,MAAM,GAAG,EAAE,CAAC,EAE7BC,EAASA,EAAO,MAAM,GAAG,EAAE,CAAC,EACrBA,CACX,CACA,IAAIC,GACAC,GACAC,GAAiB,6CACjBC,GAAgB,sDAChBC,GAAW,wBACf,SAASC,GAAqBpD,EAASqD,EAAM,CACzC,OAAQrD,GAAW,IAAI,QAAQiD,GAAgB,SAAUH,EAAQQ,EAAQC,EAAOC,EAAQC,EAAOC,EAAO,CAClG,IAAIC,EAAWJ,GAASE,GAASC,EAC7BE,EAAaN,GAAUE,GAAU,GACrC,GAAI,CAACG,EACD,OAAOb,EAKX,GAHI,CAACI,GAAc,KAAKS,CAAQ,GAG5BR,GAAS,KAAKQ,CAAQ,EACtB,MAAO,OAAO,OAAOC,CAAU,EAAE,OAAOD,CAAQ,EAAE,OAAOC,EAAY,GAAG,EAE5E,GAAID,EAAS,CAAC,IAAM,IAChB,MAAO,OAAO,OAAOC,CAAU,EAAE,OAAOhB,GAAcS,CAAI,EAAIM,CAAQ,EAAE,OAAOC,EAAY,GAAG,EAElG,IAAIC,EAAQR,EAAK,MAAM,GAAG,EACtBS,EAAQH,EAAS,MAAM,GAAG,EAC9BE,EAAM,IAAG,EACT,QAASE,EAAK,EAAGC,EAAUF,EAAOC,EAAKC,EAAQ,OAAQD,IAAM,CACzD,IAAIE,EAAOD,EAAQD,CAAE,EACjBE,IAAS,MAGJA,IAAS,KACdJ,EAAM,IAAG,EAGTA,EAAM,KAAKI,CAAI,EAEvB,CACA,MAAO,OAAO,OAAOL,CAAU,EAAE,OAAOC,EAAM,KAAK,GAAG,CAAC,EAAE,OAAOD,EAAY,GAAG,CACnF,CAAC,CACL,CACA,IAAIM,GAAoB,qBACpBC,GAA0B,qBAC9B,SAASC,GAAwBC,EAAKC,EAAgB,CAClD,GAAIA,EAAe,KAAI,IAAO,GAC1B,OAAOA,EAEX,IAAIC,EAAM,EACV,SAASC,EAAkBC,EAAO,CAC9B,IAAIC,EACAC,EAAQF,EAAM,KAAKH,EAAe,UAAUC,CAAG,CAAC,EACpD,OAAII,GACAD,EAAQC,EAAM,CAAC,EACfJ,GAAOG,EAAM,OACNA,GAEJ,EACX,CAEA,QADIE,EAAS,CAAA,EAETJ,EAAkBL,EAAuB,EACrC,EAAAI,GAAOD,EAAe,SAFjB,CAKT,IAAIzB,EAAM2B,EAAkBN,EAAiB,EAC7C,GAAIrB,EAAI,MAAM,EAAE,IAAM,IAClBA,EAAMgC,GAAcR,EAAKxB,EAAI,UAAU,EAAGA,EAAI,OAAS,CAAC,CAAC,EACzD+B,EAAO,KAAK/B,CAAG,MAEd,CACD,IAAIiC,EAAiB,GACrBjC,EAAMgC,GAAcR,EAAKxB,CAAG,EAE5B,QADIkC,EAAW,KACF,CACT,IAAI,EAAIT,EAAe,OAAOC,CAAG,EACjC,GAAI,IAAM,GAAI,CACVK,EAAO,MAAM/B,EAAMiC,GAAgB,KAAI,CAAE,EACzC,KACJ,SACUC,EAWF,IAAM,MACNA,EAAW,YAXX,IAAM,IAAK,CACXR,GAAO,EACPK,EAAO,MAAM/B,EAAMiC,GAAgB,KAAI,CAAE,EACzC,KACJ,MACS,IAAM,MACXC,EAAW,IAQnBD,GAAkB,EAClBP,GAAO,CACX,CACJ,CACJ,CACA,OAAOK,EAAO,KAAK,IAAI,CAC3B,CACA,SAASC,GAAcR,EAAKC,EAAgB,CACxC,GAAI,CAACA,GAAkBA,EAAe,KAAI,IAAO,GAC7C,OAAOA,EAEX,IAAIU,EAAIX,EAAI,cAAc,GAAG,EAC7B,OAAAW,EAAE,KAAOV,EACFU,EAAE,IACb,CACA,SAASC,GAAaC,EAAI,CACtB,MAAO,GAAQA,EAAG,UAAY,OAASA,EAAG,gBAC9C,CACA,SAASC,IAAU,CACf,IAAIH,EAAI,SAAS,cAAc,GAAG,EAClC,OAAAA,EAAE,KAAO,GACFA,EAAE,IACb,CACA,SAASI,GAAmBf,EAAKlD,EAASkE,EAAMhE,EAAO,CACnD,OAAIgE,IAAS,OACRA,IAAS,QAAUhE,GAAS,EAAEF,IAAY,OAASE,EAAM,CAAC,IAAM,MAG5DgE,IAAS,cAAgBhE,GAASA,EAAM,CAAC,IAAM,KAG/CgE,IAAS,cACdhE,IACCF,IAAY,SAAWA,IAAY,MAAQA,IAAY,MAPjD0D,GAAcR,EAAKhD,CAAK,EAU1BgE,IAAS,UAAYhE,EACnB+C,GAAwBC,EAAKhD,CAAK,EAEpCgE,IAAS,SAAWhE,EAClB+B,GAAqB/B,EAAO8D,GAAO,CAAE,EAEvChE,IAAY,UAAYkE,IAAS,QAAUhE,EACzCwD,GAAcR,EAAKhD,CAAK,EAGxBA,CAEf,CACA,SAASiE,GAAkB9C,EAAS+C,EAAYC,EAAe,CAC3D,GAAI,OAAOD,GAAe,UACtB,GAAI/C,EAAQ,UAAU,SAAS+C,CAAU,EACrC,MAAO,OAIX,SAASE,EAASjD,EAAQ,UAAU,OAAQiD,KAAW,CACnD,IAAIC,EAAYlD,EAAQ,UAAUiD,CAAM,EACxC,GAAIF,EAAW,KAAKG,CAAS,EACzB,MAAO,EAEf,CAEJ,OAAIF,EACOhD,EAAQ,QAAQgD,CAAa,EAEjC,EACX,CACA,SAASG,GAAkB9E,EAAM+E,EAAOC,EAAgB,CACpD,GAAI,CAAChF,EACD,MAAO,GACX,GAAIA,EAAK,WAAaA,EAAK,aACvB,OAAKgF,EAEEF,GAAkB9E,EAAK,WAAY+E,EAAOC,CAAc,EADpD,GAGf,QAASJ,EAAS5E,EAAK,UAAU,OAAQ4E,KAAW,CAChD,IAAIC,EAAY7E,EAAK,UAAU4E,CAAM,EACrC,GAAIG,EAAM,KAAKF,CAAS,EACpB,MAAO,EAEf,CACA,OAAKG,EAEEF,GAAkB9E,EAAK,WAAY+E,EAAOC,CAAc,EADpD,EAEf,CACA,SAASC,GAAgBjF,EAAMkF,EAAeC,EAAkB,CAC5D,IAAId,EAAKrE,EAAK,WAAaA,EAAK,aAC1BA,EACAA,EAAK,cACX,GAAIqE,IAAO,KACP,MAAO,GACX,GAAI,OAAOa,GAAkB,UAGzB,GAFIb,EAAG,UAAU,SAASa,CAAa,GAEnCb,EAAG,QAAQ,IAAI,OAAOa,CAAa,CAAC,EACpC,MAAO,WAGPJ,GAAkBT,EAAIa,EAAe,EAAI,EACzC,MAAO,GAEf,MAAI,GAAAC,IACId,EAAG,QAAQc,CAAgB,GAE3Bd,EAAG,QAAQc,CAAgB,GAIvC,CACA,SAASC,GAAiBC,EAAUC,EAAUC,EAAmB,CAC7D,IAAIC,EAAMH,EAAS,cACnB,GAAKG,EAGL,KAAIC,EAAQ,GACRC,EACJ,GAAI,CACAA,EAAaF,EAAI,SAAS,UAC9B,MACc,CACV,MACJ,CACA,GAAIE,IAAe,WAAY,CAC3B,IAAIC,EAAU,WAAW,UAAY,CAC5BF,IACDH,IACAG,EAAQ,GAEhB,EAAGF,CAAiB,EACpBF,EAAS,iBAAiB,OAAQ,UAAY,CAC1C,aAAaM,CAAO,EACpBF,EAAQ,GACRH,GACJ,CAAC,EACD,MACJ,CACA,IAAIM,EAAW,cACf,GAAIJ,EAAI,SAAS,OAASI,GACtBP,EAAS,MAAQO,GACjBP,EAAS,MAAQ,GACjB,kBAAWC,EAAU,CAAC,EACfD,EAAS,iBAAiB,OAAQC,CAAQ,EAErDD,EAAS,iBAAiB,OAAQC,CAAQ,EAC9C,CACA,SAASO,GAAqBC,EAAMR,EAAUS,EAAuB,CACjE,IAAIN,EAAQ,GACRO,EACJ,GAAI,CACAA,EAAmBF,EAAK,KAC5B,MACc,CACV,MACJ,CACA,GAAI,CAAAE,EAEJ,KAAIC,EAAQ,WAAW,UAAY,CAC1BR,IACDH,IACAG,EAAQ,GAEhB,EAAGM,CAAqB,EACxBD,EAAK,iBAAiB,OAAQ,UAAY,CACtC,aAAaG,CAAK,EAClBR,EAAQ,GACRH,GACJ,CAAC,EACL,CACA,SAASY,GAAcrH,EAAGsH,EAAS,CAC/B,IAAI3C,EAAM2C,EAAQ,IAAKC,EAASD,EAAQ,OAAQzB,EAAayB,EAAQ,WAAYxB,EAAgBwB,EAAQ,cAAejB,EAAgBiB,EAAQ,cAAehB,EAAmBgB,EAAQ,iBAAkBE,EAAmBF,EAAQ,iBAAkBvG,EAAKuG,EAAQ,iBAAkB9F,EAAmBT,IAAO,OAAS,CAAA,EAAKA,EAAI0G,EAAaH,EAAQ,WAAY1F,EAAc0F,EAAQ,YAAaI,EAAKJ,EAAQ,eAAgBK,EAAiBD,IAAO,OAAS,CAAA,EAAKA,EAAIE,EAAeN,EAAQ,aAAcO,EAAeP,EAAQ,aAAcQ,EAAkBR,EAAQ,gBAAiBS,EAAKT,EAAQ,kBAAmBU,EAAoBD,IAAO,OAAS,GAAQA,EAC5oBE,EAASC,GAAUvD,EAAK4C,CAAM,EAClC,OAAQvH,EAAE,SAAQ,CACd,KAAKA,EAAE,cACH,OAAIA,EAAE,aAAe,aACV,CACH,KAAMF,EAAS,SACf,WAAY,CAAA,EACZ,WAAYE,EAAE,UAClC,EAGuB,CACH,KAAMF,EAAS,SACf,WAAY,CAAA,CAChC,EAEQ,KAAKE,EAAE,mBACH,MAAO,CACH,KAAMF,EAAS,aACf,KAAME,EAAE,KACR,SAAUA,EAAE,SACZ,SAAUA,EAAE,SACZ,OAAQiI,CACxB,EACQ,KAAKjI,EAAE,aACH,OAAOmI,GAAqBnI,EAAG,CAC3B,IAAK2E,EACL,WAAYkB,EACZ,cAAeC,EACf,iBAAkB0B,EAClB,iBAAkBhG,EAClB,YAAaI,EACb,eAAgB+F,EAChB,aAAcC,EACd,aAAcC,EACd,gBAAiBC,EACjB,kBAAmBE,EACnB,OAAQC,CACxB,CAAa,EACL,KAAKjI,EAAE,UACH,OAAOoI,GAAkBpI,EAAG,CACxB,cAAeqG,EACf,iBAAkBC,EAClB,WAAYmB,EACZ,OAAQQ,CACxB,CAAa,EACL,KAAKjI,EAAE,mBACH,MAAO,CACH,KAAMF,EAAS,MACf,YAAa,GACb,OAAQmI,CACxB,EACQ,KAAKjI,EAAE,aACH,MAAO,CACH,KAAMF,EAAS,QACf,YAAaE,EAAE,aAAe,GAC9B,OAAQiI,CACxB,EACQ,QACI,MAAO,EACnB,CACA,CACA,SAASC,GAAUvD,EAAK4C,EAAQ,CAC5B,GAAKA,EAAO,QAAQ5C,CAAG,EAEvB,KAAI0D,EAAQd,EAAO,MAAM5C,CAAG,EAC5B,OAAO0D,IAAU,EAAI,OAAYA,EACrC,CACA,SAASD,GAAkBpI,EAAGsH,EAAS,CACnC,IAAIvG,EACAsF,EAAgBiB,EAAQ,cAAehB,EAAmBgB,EAAQ,iBAAkBG,EAAaH,EAAQ,WAAYW,EAASX,EAAQ,OACtIgB,EAAgBtI,EAAE,YAAcA,EAAE,WAAW,QAC7CuI,EAAcvI,EAAE,YAChBwI,EAAUF,IAAkB,QAAU,GAAO,OAC7CG,EAAWH,IAAkB,SAAW,GAAO,OACnD,GAAIE,GAAWD,EAAa,CACxB,GAAI,CACIvI,EAAE,aAAeA,EAAE,iBAEb,GAAAe,EAAKf,EAAE,WAAW,SAAW,MAAQe,IAAO,SAAkBA,EAAG,WACvEwH,EAAcvF,GAAoBhD,EAAE,WAAW,KAAK,EAE5D,OACO0I,EAAK,CACR,QAAQ,KAAK,wDAAwD,OAAOA,CAAG,EAAG1I,CAAC,CACvF,CACAuI,EAAc7E,GAAqB6E,EAAa9C,GAAO,CAAE,CAC7D,CACA,OAAIgD,IACAF,EAAc,sBAEd,CAACC,GACD,CAACC,GACDF,GACAnC,GAAgBpG,EAAGqG,EAAeC,CAAgB,IAClDiC,EAAcd,EACRA,EAAWc,CAAW,EACtBA,EAAY,QAAQ,QAAS,GAAG,GAEnC,CACH,KAAMzI,EAAS,KACf,YAAayI,GAAe,GAC5B,QAASC,EACT,OAAQP,CAChB,CACA,CACA,SAASE,GAAqBnI,EAAGsH,EAAS,CAMtC,QALI3C,EAAM2C,EAAQ,IAAKzB,EAAayB,EAAQ,WAAYxB,EAAgBwB,EAAQ,cAAeE,EAAmBF,EAAQ,iBAAkBvG,EAAKuG,EAAQ,iBAAkB9F,EAAmBT,IAAO,OAAS,GAAKA,EAAIa,EAAc0F,EAAQ,YAAaI,EAAKJ,EAAQ,eAAgBK,EAAiBD,IAAO,OAAS,CAAA,EAAKA,EAAIE,EAAeN,EAAQ,aAAcO,EAAeP,EAAQ,aAAcQ,EAAkBR,EAAQ,gBAAiBS,EAAKT,EAAQ,kBAAmBU,EAAoBD,IAAO,OAAS,GAAQA,EAAIE,EAASX,EAAQ,OACnhBqB,EAAY/C,GAAkB5F,EAAG6F,EAAYC,CAAa,EAC1DrE,EAAUoB,GAAgB7C,CAAC,EAC3B4I,EAAa,CAAA,EACbC,EAAM7I,EAAE,WAAW,OACd8I,EAAI,EAAGA,EAAID,EAAKC,IAAK,CAC1B,IAAIC,EAAO/I,EAAE,WAAW8I,CAAC,EACzBF,EAAWG,EAAK,IAAI,EAAIrD,GAAmBf,EAAKlD,EAASsH,EAAK,KAAMA,EAAK,KAAK,CAClF,CACA,GAAItH,IAAY,QAAU+F,EAAkB,CACxC,IAAIwB,EAAa,MAAM,KAAKrE,EAAI,WAAW,EAAE,KAAK,SAAUnE,EAAG,CAC3D,OAAOA,EAAE,OAASR,EAAE,IACxB,CAAC,EACGM,EAAU,KACV0I,IACA1I,EAAUC,GAAkByI,CAAU,GAEtC1I,IACA,OAAOsI,EAAW,IAClB,OAAOA,EAAW,KAClBA,EAAW,SAAWlF,GAAqBpD,EAAS0I,EAAW,IAAI,EAE3E,CACA,GAAIvH,IAAY,SACZzB,EAAE,OACF,EAAEA,EAAE,WAAaA,EAAE,aAAe,IAAI,KAAI,EAAG,OAAQ,CACrD,IAAIM,EAAUC,GAAkBP,EAAE,KAAK,EACnCM,IACAsI,EAAW,SAAWlF,GAAqBpD,EAASmF,GAAO,CAAE,EAErE,CACA,GAAIhE,IAAY,SAAWA,IAAY,YAAcA,IAAY,SAAU,CACvE,IAAIE,EAAQ3B,EAAE,MACViJ,EAAUjJ,EAAE,QACZ4I,EAAW,OAAS,SACpBA,EAAW,OAAS,YACpBA,EAAW,OAAS,UACpBA,EAAW,OAAS,UACpBjH,EACAiH,EAAW,MAAQrH,GAAe,CAC9B,KAAMqH,EAAW,KACjB,QAASnH,EACT,MAAOE,EACP,iBAAkBH,EAClB,YAAaI,CAC7B,CAAa,EAEIqH,IACLL,EAAW,QAAUK,EAE7B,CASA,GARIxH,IAAY,WACRzB,EAAE,UAAY,CAACwB,EAAiB,OAChCoH,EAAW,SAAW,GAGtB,OAAOA,EAAW,UAGtBnH,IAAY,UAAYoG,GACxB,GAAI7H,EAAE,YAAc,KACX+B,GAAgB/B,CAAC,IAClB4I,EAAW,WAAa5I,EAAE,UAAU2H,EAAe,KAAMA,EAAe,OAAO,WAG9E,EAAE,cAAe3H,GAAI,CAC1B,IAAIkJ,EAAgBlJ,EAAE,UAAU2H,EAAe,KAAMA,EAAe,OAAO,EACvEwB,EAAc,SAAS,cAAc,QAAQ,EACjDA,EAAY,MAAQnJ,EAAE,MACtBmJ,EAAY,OAASnJ,EAAE,OACvB,IAAIoJ,EAAqBD,EAAY,UAAUxB,EAAe,KAAMA,EAAe,OAAO,EACtFuB,IAAkBE,IAClBR,EAAW,WAAaM,EAEhC,EAEJ,GAAIzH,IAAY,OAASmG,EAAc,CAC9BvE,KACDA,GAAgBsB,EAAI,cAAc,QAAQ,EAC1CrB,GAAYD,GAAc,WAAW,IAAI,GAE7C,IAAIgG,EAAUrJ,EACVsJ,EAAaD,EAAQ,YACzBA,EAAQ,YAAc,YACtB,IAAIE,EAAoB,UAAY,CAChC,GAAI,CACAlG,GAAc,MAAQgG,EAAQ,aAC9BhG,GAAc,OAASgG,EAAQ,cAC/B/F,GAAU,UAAU+F,EAAS,EAAG,CAAC,EACjCT,EAAW,WAAavF,GAAc,UAAUsE,EAAe,KAAMA,EAAe,OAAO,CAC/F,OACOe,EAAK,CACR,QAAQ,KAAK,yBAAyB,OAAOW,EAAQ,WAAY,WAAW,EAAE,OAAOX,CAAG,CAAC,CAC7F,CACAY,EACOV,EAAW,YAAcU,EAC1BD,EAAQ,gBAAgB,aAAa,CAC/C,EACIA,EAAQ,UAAYA,EAAQ,eAAiB,EAC7CE,IAEAF,EAAQ,OAASE,CACzB,CAeA,IAdI9H,IAAY,SAAWA,IAAY,WACnCmH,EAAW,cAAgB5I,EAAE,OACvB,SACA,SACN4I,EAAW,oBAAsB5I,EAAE,aAElCgI,IACGhI,EAAE,aACF4I,EAAW,cAAgB5I,EAAE,YAE7BA,EAAE,YACF4I,EAAW,aAAe5I,EAAE,YAGhC2I,EAAW,CACX,IAAIa,GAAKxJ,EAAE,wBAAyByJ,GAAQD,GAAG,MAAOE,EAASF,GAAG,OAClEZ,EAAa,CACT,MAASA,EAAW,MACpB,SAAU,GAAG,OAAOa,GAAO,IAAI,EAC/B,UAAW,GAAG,OAAOC,EAAQ,IAAI,CAC7C,CACI,CACA,OAAIjI,IAAY,UAAY,CAACqG,EAAgBc,EAAW,GAAG,IAClD5I,EAAE,kBACH4I,EAAW,OAASA,EAAW,KAEnC,OAAOA,EAAW,KAEf,CACH,KAAM9I,EAAS,QACf,QAAS2B,EACT,WAAYmH,EACZ,WAAY,CAAA,EACZ,MAAOrD,GAAavF,CAAC,GAAK,OAC1B,UAAW2I,EACX,OAAQV,CAChB,CACA,CACA,SAAS0B,EAAcC,EAAW,CAC9B,OAAIA,IAAc,OACP,GAGAA,EAAU,aAEzB,CACA,SAASC,GAAgBC,EAAIC,EAAgB,CACzC,GAAIA,EAAe,SAAWD,EAAG,OAAShK,EAAS,QAC/C,MAAO,GAEN,GAAIgK,EAAG,OAAShK,EAAS,QAAS,CACnC,GAAIiK,EAAe,SACdD,EAAG,UAAY,UACXA,EAAG,UAAY,QACZA,EAAG,WAAW,MAAQ,WACtBA,EAAG,WAAW,KAAO,UACxBA,EAAG,UAAY,QACZA,EAAG,WAAW,MAAQ,YACtB,OAAOA,EAAG,WAAW,MAAS,UAC9BA,EAAG,WAAW,KAAK,SAAS,KAAK,GACzC,MAAO,GAEN,GAAIC,EAAe,cAClBD,EAAG,UAAY,QAAUA,EAAG,WAAW,MAAQ,iBAC5CA,EAAG,UAAY,SACXH,EAAcG,EAAG,WAAW,IAAI,EAAE,MAAM,mCAAmC,GACxEH,EAAcG,EAAG,WAAW,IAAI,IAAM,oBACtCH,EAAcG,EAAG,WAAW,GAAG,IAAM,QACrCH,EAAcG,EAAG,WAAW,GAAG,IAAM,oBACrCH,EAAcG,EAAG,WAAW,GAAG,IAAM,kBACjD,MAAO,GAEN,GAAIA,EAAG,UAAY,OAAQ,CAC5B,GAAIC,EAAe,sBACfJ,EAAcG,EAAG,WAAW,IAAI,EAAE,MAAM,wBAAwB,EAChE,MAAO,GAEN,GAAIC,EAAe,iBACnBJ,EAAcG,EAAG,WAAW,QAAQ,EAAE,MAAM,mBAAmB,GAC5DH,EAAcG,EAAG,WAAW,IAAI,EAAE,MAAM,gBAAgB,GACxDH,EAAcG,EAAG,WAAW,IAAI,IAAM,aAC1C,MAAO,GAEN,GAAIC,EAAe,iBACnBJ,EAAcG,EAAG,WAAW,IAAI,IAAM,UACnCH,EAAcG,EAAG,WAAW,IAAI,IAAM,aACtCH,EAAcG,EAAG,WAAW,IAAI,IAAM,WAC1C,MAAO,GAEN,GAAIC,EAAe,mBACpBD,EAAG,WAAW,YAAY,IAAM,OAChC,MAAO,GAEN,GAAIC,EAAe,qBACnBJ,EAAcG,EAAG,WAAW,IAAI,IAAM,UACnCH,EAAcG,EAAG,WAAW,IAAI,IAAM,aACtCH,EAAcG,EAAG,WAAW,IAAI,IAAM,aACtCH,EAAcG,EAAG,WAAW,IAAI,IAAM,aACtCH,EAAcG,EAAG,WAAW,IAAI,IAAM,UACtCH,EAAcG,EAAG,WAAW,QAAQ,EAAE,MAAM,WAAW,GACvDH,EAAcG,EAAG,WAAW,QAAQ,EAAE,MAAM,WAAW,GAC3D,MAAO,GAEN,GAAIC,EAAe,uBACnBJ,EAAcG,EAAG,WAAW,IAAI,IAAM,4BACnCH,EAAcG,EAAG,WAAW,IAAI,IAAM,uBACtCH,EAAcG,EAAG,WAAW,IAAI,IAAM,cACtCH,EAAcG,EAAG,WAAW,IAAI,IAAM,mBACtCH,EAAcG,EAAG,WAAW,IAAI,IAAM,aACtCH,EAAcG,EAAG,WAAW,IAAI,IAAM,gBACtCH,EAAcG,EAAG,WAAW,IAAI,IAAM,8BAC1C,MAAO,EAEf,CACJ,CACA,MAAO,EACX,CACA,SAASE,GAAoBhK,EAAGsH,EAAS,CACrC,IAAI3C,EAAM2C,EAAQ,IAAKC,EAASD,EAAQ,OAAQzB,EAAayB,EAAQ,WAAYxB,EAAgBwB,EAAQ,cAAejB,EAAgBiB,EAAQ,cAAehB,EAAmBgB,EAAQ,iBAAkBvG,EAAKuG,EAAQ,UAAW2C,EAAYlJ,IAAO,OAAS,GAAQA,EAAI2G,EAAKJ,EAAQ,iBAAkBE,EAAmBE,IAAO,OAAS,GAAOA,EAAIK,EAAKT,EAAQ,iBAAkB9F,EAAmBuG,IAAO,OAAS,CAAA,EAAKA,EAAIN,EAAaH,EAAQ,WAAY1F,EAAc0F,EAAQ,YAAayC,EAAiBzC,EAAQ,eAAgBkC,EAAKlC,EAAQ,eAAgBK,EAAiB6B,IAAO,OAAS,CAAA,EAAKA,EAAIU,EAAK5C,EAAQ,aAAcM,EAAesC,IAAO,OAAS,GAAQA,EAAIC,EAAK7C,EAAQ,aAAcO,EAAesC,IAAO,OAAS,GAAQA,EAAIC,EAAc9C,EAAQ,YAAa+C,EAAe/C,EAAQ,aAAcgD,EAAKhD,EAAQ,kBAAmBZ,EAAoB4D,IAAO,OAAS,IAAOA,EAAIC,EAAmBjD,EAAQ,iBAAkBkD,EAAKlD,EAAQ,sBAAuBmD,EAAwBD,IAAO,OAAS,IAAOA,EAAIE,EAAKpD,EAAQ,gBAAiBQ,EAAkB4C,IAAO,OAAS,UAAY,CAAE,MAAO,EAAO,EAAIA,EAAIC,EAAKrD,EAAQ,kBAAmBU,GAAoB2C,IAAO,OAAS,GAAQA,EAC3qCC,GAAKtD,EAAQ,mBAAoBuD,EAAqBD,KAAO,OAAS,GAAOA,GAC7EE,EAAkBzD,GAAcrH,EAAG,CACnC,IAAK2E,EACL,OAAQ4C,EACR,WAAY1B,EACZ,cAAeC,EACf,cAAeO,EACf,iBAAkBC,EAClB,iBAAkBkB,EAClB,iBAAkBhG,EAClB,WAAYiG,EACZ,YAAa7F,EACb,eAAgB+F,EAChB,aAAcC,EACd,aAAcC,EACd,gBAAiBC,EACjB,kBAAmBE,EAC3B,CAAK,EACD,GAAI,CAAC8C,EACD,eAAQ,KAAK9K,EAAG,gBAAgB,EACzB,KAEX,IAAIgB,GACAuG,EAAO,QAAQvH,CAAC,EAChBgB,GAAKuG,EAAO,MAAMvH,CAAC,EAEd6J,GAAgBiB,EAAiBf,CAAc,GACnD,CAACc,GACEC,EAAgB,OAAShL,EAAS,MAClC,CAACgL,EAAgB,SACjB,CAACA,EAAgB,YAAY,QAAQ,cAAe,EAAE,EAAE,OAC5D9J,GAAK2B,GAGL3B,GAAK4B,GAAK,EAEd,IAAImI,EAAiB,OAAO,OAAOD,EAAiB,CAAE,GAAI9J,EAAE,CAAE,EAE9D,GADAuG,EAAO,IAAIvH,EAAG+K,CAAc,EACxB/J,KAAO2B,GACP,OAAO,KAEPyH,GACAA,EAAYpK,CAAC,EAEjB,IAAIgL,EAAc,CAACf,EACnB,GAAIc,EAAe,OAASjL,EAAS,QAAS,CAC1CkL,EAAcA,GAAe,CAACD,EAAe,UAC7C,OAAOA,EAAe,UACtB,IAAI3K,GAAaJ,EAAE,WACfI,IAAcD,GAAkBC,EAAU,IAC1C2K,EAAe,aAAe,GACtC,CACA,IAAKA,EAAe,OAASjL,EAAS,UAClCiL,EAAe,OAASjL,EAAS,UACjCkL,EAAa,CACTjB,EAAe,gBACfgB,EAAe,OAASjL,EAAS,SACjCiL,EAAe,UAAY,SAC3BF,EAAqB,IA0BzB,QAxBII,GAAgB,CAChB,IAAKtG,EACL,OAAQ4C,EACR,WAAY1B,EACZ,cAAeC,EACf,cAAeO,EACf,iBAAkBC,EAClB,UAAW2D,EACX,iBAAkBzC,EAClB,iBAAkBhG,EAClB,WAAYiG,EACZ,YAAa7F,EACb,eAAgBmI,EAChB,eAAgBpC,EAChB,aAAcC,EACd,aAAcC,EACd,mBAAoBgD,EACpB,YAAaT,EACb,aAAcC,EACd,kBAAmB3D,EACnB,iBAAkB6D,EAClB,sBAAuBE,EACvB,gBAAiB3C,CAC7B,EACiBzD,EAAK,EAAG6G,EAAK,MAAM,KAAKlL,EAAE,UAAU,EAAGqE,EAAK6G,EAAG,OAAQ7G,IAAM,CAClE,IAAI8G,EAASD,EAAG7G,CAAE,EACd+G,EAAsBpB,GAAoBmB,EAAQF,EAAa,EAC/DG,GACAL,EAAe,WAAW,KAAKK,CAAmB,CAE1D,CACA,GAAIrL,GAAUC,CAAC,GAAKA,EAAE,WAClB,QAASqL,EAAK,EAAGC,EAAK,MAAM,KAAKtL,EAAE,WAAW,UAAU,EAAGqL,EAAKC,EAAG,OAAQD,IAAM,CAC7E,IAAIF,EAASG,EAAGD,CAAE,EACdD,EAAsBpB,GAAoBmB,EAAQF,EAAa,EAC/DG,IACAjL,GAAkBH,EAAE,UAAU,IACzBoL,EAAoB,SAAW,IACpCL,EAAe,WAAW,KAAKK,CAAmB,EAE1D,CAER,CACA,OAAIpL,EAAE,YACFC,GAAaD,EAAE,UAAU,GACzBG,GAAkBH,EAAE,UAAU,IAC9B+K,EAAe,SAAW,IAE1BA,EAAe,OAASjL,EAAS,SACjCiL,EAAe,UAAY,UAC3BxE,GAAiBvG,EAAG,UAAY,CAC5B,IAAIuL,EAAYvL,EAAE,gBAClB,GAAIuL,GAAalB,EAAc,CAC3B,IAAImB,GAAuBxB,GAAoBuB,EAAW,CACtD,IAAKA,EACL,OAAQhE,EACR,WAAY1B,EACZ,cAAeC,EACf,cAAeO,EACf,iBAAkBC,EAClB,UAAW,GACX,iBAAkBkB,EAClB,iBAAkBhG,EAClB,WAAYiG,EACZ,YAAa7F,EACb,eAAgBmI,EAChB,eAAgBpC,EAChB,aAAcC,EACd,aAAcC,EACd,mBAAoBgD,EACpB,YAAaT,EACb,aAAcC,EACd,kBAAmB3D,EACnB,iBAAkB6D,EAClB,sBAAuBE,EACvB,gBAAiB3C,CACrC,CAAiB,EACG0D,IACAnB,EAAarK,EAAGwL,EAAoB,CAE5C,CACJ,EAAG9E,CAAiB,EAEpBqE,EAAe,OAASjL,EAAS,SACjCiL,EAAe,UAAY,QAC3BA,EAAe,WAAW,MAAQ,cAClC/D,GAAqBhH,EAAG,UAAY,CAChC,GAAIuK,EAAkB,CAClB,IAAIkB,EAAqBzB,GAAoBhK,EAAG,CAC5C,IAAK2E,EACL,OAAQ4C,EACR,WAAY1B,EACZ,cAAeC,EACf,cAAeO,EACf,iBAAkBC,EAClB,UAAW,GACX,iBAAkBkB,EAClB,iBAAkBhG,EAClB,WAAYiG,EACZ,YAAa7F,EACb,eAAgBmI,EAChB,eAAgBpC,EAChB,aAAcC,EACd,aAAcC,EACd,mBAAoBgD,EACpB,YAAaT,EACb,aAAcC,EACd,kBAAmB3D,EACnB,iBAAkB6D,EAClB,sBAAuBE,EACvB,gBAAiB3C,CACrC,CAAiB,EACG2D,GACAlB,EAAiBvK,EAAGyL,CAAkB,CAE9C,CACJ,EAAGhB,CAAqB,EAErBM,CACX,CACA,SAASW,GAAS1L,EAAGsH,EAAS,CAC1B,IAAIvG,EAAKuG,GAAW,CAAA,EAAII,EAAK3G,EAAG,OAAQwG,EAASG,IAAO,OAAS,IAAI5G,GAAW4G,EAAIK,EAAKhH,EAAG,WAAY8E,EAAakC,IAAO,OAAS,WAAaA,EAAIyB,EAAKzI,EAAG,cAAe+E,EAAgB0D,IAAO,OAAS,KAAOA,EAAIU,EAAKnJ,EAAG,cAAesF,EAAgB6D,IAAO,OAAS,UAAYA,EAAIC,EAAKpJ,EAAG,iBAAkBuF,EAAmB6D,IAAO,OAAS,KAAOA,EAAIG,EAAKvJ,EAAG,iBAAkByG,EAAmB8C,IAAO,OAAS,GAAOA,EAAIE,EAAKzJ,EAAG,aAAc6G,EAAe4C,IAAO,OAAS,GAAQA,EAAIE,EAAK3J,EAAG,aAAc8G,EAAe6C,IAAO,OAAS,GAAQA,EAAIC,EAAK5J,EAAG,cAAe4K,EAAgBhB,IAAO,OAAS,GAAQA,EAAIlD,EAAa1G,EAAG,WAAYa,EAAcb,EAAG,YAAa6J,EAAK7J,EAAG,QAAS6K,EAAUhB,IAAO,OAAS,GAAQA,EAAIjD,EAAiB5G,EAAG,eAAgB8J,EAAqB9J,EAAG,mBAAoBqJ,EAAcrJ,EAAG,YAAasJ,EAAetJ,EAAG,aAAc2F,EAAoB3F,EAAG,kBAAmBwJ,EAAmBxJ,EAAG,iBAAkB0J,EAAwB1J,EAAG,sBAAuBmK,EAAKnK,EAAG,gBAAiB+G,GAAkBoD,IAAO,OAAS,UAAY,CAAE,MAAO,EAAO,EAAIA,EAC9kC1J,GAAmBmK,IAAkB,GACnC,CACE,MAAO,GACP,KAAM,GACN,iBAAkB,GAClB,MAAO,GACP,MAAO,GACP,OAAQ,GACR,MAAO,GACP,OAAQ,GACR,IAAK,GACL,KAAM,GACN,KAAM,GACN,IAAK,GACL,KAAM,GACN,SAAU,GACV,OAAQ,GACR,SAAU,EACtB,EACUA,IAAkB,GACd,CACE,SAAU,EAC1B,EACcA,EACN5B,EAAiB6B,IAAY,IAAQA,IAAY,MAE7C,CACI,OAAQ,GACR,QAAS,GACT,YAAa,GACb,eAAgB,GAChB,qBAAsBA,IAAY,MAClC,eAAgB,GAChB,eAAgB,GAChB,kBAAmB,GACnB,mBAAoB,GACpB,qBAAsB,EACtC,EACUA,IAAY,GACR,CAAA,EACAA,EACV,OAAO5B,GAAoBhK,EAAG,CAC1B,IAAKA,EACL,OAAQuH,EACR,WAAY1B,EACZ,cAAeC,EACf,cAAeO,EACf,iBAAkBC,EAClB,UAAW,GACX,iBAAkBkB,EAClB,iBAAkBhG,GAClB,WAAYiG,EACZ,YAAa7F,EACb,eAAgBmI,EAChB,eAAgBpC,EAChB,aAAcC,EACd,aAAcC,EACd,mBAAoBgD,EACpB,YAAaT,EACb,aAAcC,EACd,kBAAmB3D,EACnB,iBAAkB6D,EAClB,sBAAuBE,EACvB,gBAAiB3C,GACjB,kBAAmB,EAC3B,CAAK,CACL,CC1/BA,SAAS+D,EAAGnK,EAAMoK,EAAIC,EAAS,SAAU,CACrC,MAAMzE,EAAU,CAAE,QAAS,GAAM,QAAS,EAAI,EAC9C,OAAAyE,EAAO,iBAAiBrK,EAAMoK,EAAIxE,CAAO,EAClC,IAAMyE,EAAO,oBAAoBrK,EAAMoK,EAAIxE,CAAO,CAC7D,CACA,MAAM0E,GAAiC;AAAA;AAAA,8EAKvC,IAAIC,GAAU,CACV,IAAK,CAAA,EACL,OAAQ,CACJ,eAAQ,MAAMD,EAA8B,EACrC,EACX,EACA,SAAU,CACN,eAAQ,MAAMA,EAA8B,EACrC,IACX,EACA,mBAAoB,CAChB,QAAQ,MAAMA,EAA8B,CAChD,EACA,KAAM,CACF,eAAQ,MAAMA,EAA8B,EACrC,EACX,EACA,OAAQ,CACJ,QAAQ,MAAMA,EAA8B,CAChD,CACJ,EACI,OAAO,OAAW,KAAe,OAAO,OAAS,OAAO,UACxDC,GAAU,IAAI,MAAMA,GAAS,CACzB,IAAIF,EAAQG,EAAMC,EAAU,CACxB,OAAID,IAAS,OACT,QAAQ,MAAMF,EAA8B,EAEzC,QAAQ,IAAID,EAAQG,EAAMC,CAAQ,CAC7C,CACR,CAAK,GAEL,SAASC,GAASC,EAAMC,EAAMhF,EAAU,CAAA,EAAI,CACxC,IAAIiF,EAAU,KACVC,EAAW,EACf,OAAO,YAAaC,EAAM,CACtB,MAAMC,EAAM,KAAK,MACb,CAACF,GAAYlF,EAAQ,UAAY,KACjCkF,EAAWE,GAEf,MAAMC,EAAYL,GAAQI,EAAMF,GAC1BI,EAAU,KACZD,GAAa,GAAKA,EAAYL,GAC1BC,IACA,aAAaA,CAAO,EACpBA,EAAU,MAEdC,EAAWE,EACXL,EAAK,MAAMO,EAASH,CAAI,GAEnB,CAACF,GAAWjF,EAAQ,WAAa,KACtCiF,EAAU,WAAW,IAAM,CACvBC,EAAWlF,EAAQ,UAAY,GAAQ,EAAI,KAAK,MAChDiF,EAAU,KACVF,EAAK,MAAMO,EAASH,CAAI,CAC5B,EAAGE,CAAS,EAEpB,CACJ,CACA,SAASE,GAAWd,EAAQe,EAAKC,EAAGC,EAAWrG,EAAM,OAAQ,CACzD,MAAMsG,EAAWtG,EAAI,OAAO,yBAAyBoF,EAAQe,CAAG,EAChE,OAAAnG,EAAI,OAAO,eAAeoF,EAAQe,EAAKE,EACjCD,EACA,CACE,IAAIpL,EAAO,CACP,WAAW,IAAM,CACboL,EAAE,IAAI,KAAK,KAAMpL,CAAK,CAC1B,EAAG,CAAC,EACAsL,GAAYA,EAAS,KACrBA,EAAS,IAAI,KAAK,KAAMtL,CAAK,CAErC,CACZ,CAAS,EACE,IAAMkL,GAAWd,EAAQe,EAAKG,GAAY,CAAA,EAAI,EAAI,CAC7D,CACA,SAASC,GAAMC,EAAQxH,EAAMyH,EAAa,CACtC,GAAI,CACA,GAAI,EAAEzH,KAAQwH,GACV,MAAO,IAAM,CACb,EAEJ,MAAMF,EAAWE,EAAOxH,CAAI,EACtB0H,EAAUD,EAAYH,CAAQ,EACpC,OAAI,OAAOI,GAAY,aACnBA,EAAQ,UAAYA,EAAQ,WAAa,CAAA,EACzC,OAAO,iBAAiBA,EAAS,CAC7B,mBAAoB,CAChB,WAAY,GACZ,MAAOJ,CAC3B,CACA,CAAa,GAELE,EAAOxH,CAAI,EAAI0H,EACR,IAAM,CACTF,EAAOxH,CAAI,EAAIsH,CACnB,CACJ,MACW,CACP,MAAO,IAAM,CACb,CACJ,CACJ,CACA,SAASK,IAAkB,CACvB,OAAQ,OAAO,aACV,SAAS,iBAAmB,SAAS,gBAAgB,cACrD,SAAS,MAAQ,SAAS,KAAK,YACxC,CACA,SAASC,IAAiB,CACtB,OAAQ,OAAO,YACV,SAAS,iBAAmB,SAAS,gBAAgB,aACrD,SAAS,MAAQ,SAAS,KAAK,WACxC,CACA,SAASC,EAAUrM,EAAM0E,EAAYC,EAAeK,EAAgB,CAChE,GAAI,CAAChF,EACD,MAAO,GAEX,MAAMqE,EAAKrE,EAAK,WAAaA,EAAK,aAC5BA,EACAA,EAAK,cACX,GAAI,CAACqE,EACD,MAAO,GACX,GAAI,OAAOK,GAAe,UAGtB,GAFIL,EAAG,UAAU,SAASK,CAAU,GAEhCM,GAAkBX,EAAG,QAAQ,IAAMK,CAAU,IAAM,KACnD,MAAO,WAGPI,GAAkBT,EAAIK,EAAYM,CAAc,EAChD,MAAO,GAEf,MAAI,GAAAL,IACI3E,EAAK,QAAQ2E,CAAa,GAE1BK,GAAkBX,EAAG,QAAQM,CAAa,IAAM,MAI5D,CACA,SAAS2H,GAAazN,EAAGuH,EAAQ,CAC7B,OAAOA,EAAO,MAAMvH,CAAC,IAAM,EAC/B,CACA,SAAS0N,GAAU1N,EAAGuH,EAAQ,CAC1B,OAAOA,EAAO,MAAMvH,CAAC,IAAM2C,EAC/B,CACA,SAASgL,GAAkB5B,EAAQxE,EAAQ,CACvC,GAAItH,GAAa8L,CAAM,EACnB,MAAO,GAEX,MAAM/K,EAAKuG,EAAO,MAAMwE,CAAM,EAC9B,OAAKxE,EAAO,IAAIvG,CAAE,EAGd+K,EAAO,YACPA,EAAO,WAAW,WAAaA,EAAO,cAC/B,GAENA,EAAO,WAGL4B,GAAkB5B,EAAO,WAAYxE,CAAM,EAFvC,GAPA,EAUf,CACA,SAASqG,GAAaC,EAAO,CACzB,MAAO,EAAQA,EAAM,cACzB,CACA,SAASC,GAASnH,EAAM,OAAQ,CACxB,aAAcA,GAAO,CAACA,EAAI,SAAS,UAAU,UAC7CA,EAAI,SAAS,UAAU,QAAU,MAAM,UAClC,SAEL,iBAAkBA,GAAO,CAACA,EAAI,aAAa,UAAU,UACrDA,EAAI,aAAa,UAAU,QAAU,MAAM,UACtC,SAEJ,KAAK,UAAU,WAChB,KAAK,UAAU,SAAW,IAAI8F,IAAS,CACnC,IAAItL,EAAOsL,EAAK,CAAC,EACjB,GAAI,EAAE,KAAKA,GACP,MAAM,IAAI,UAAU,wBAAwB,EAEhD,EACI,IAAI,OAAStL,EACT,MAAO,SAELA,EAAOA,GAAQA,EAAK,YAC9B,MAAO,EACX,EAER,CA0CA,SAAS4M,GAAmB/N,EAAGuH,EAAQ,CACnC,MAAO,GAAQvH,EAAE,WAAa,UAAYuH,EAAO,QAAQvH,CAAC,EAC9D,CACA,SAASgO,GAAuBhO,EAAGuH,EAAQ,CACvC,MAAO,GAAQvH,EAAE,WAAa,QAC1BA,EAAE,WAAaA,EAAE,cACjBA,EAAE,cACFA,EAAE,aAAa,KAAK,IAAM,cAC1BuH,EAAO,QAAQvH,CAAC,EACxB,CAwBA,SAASiO,GAAcjO,EAAG,CACtB,MAAO,EAA8CA,GAAE,UAC3D,CA2BA,MAAMkO,EAAiB,CACnB,aAAc,CACV,KAAK,GAAK,EACV,KAAK,WAAa,IAAI,QACtB,KAAK,WAAa,IAAI,GAC1B,CACA,MAAMlF,EAAY,CACd,IAAIjI,EACJ,OAAQA,EAAK,KAAK,WAAW,IAAIiI,CAAU,KAAO,MAAQjI,IAAO,OAASA,EAAK,EACnF,CACA,IAAIiI,EAAY,CACZ,OAAO,KAAK,WAAW,IAAIA,CAAU,CACzC,CACA,IAAIA,EAAYhI,EAAI,CAChB,GAAI,KAAK,IAAIgI,CAAU,EACnB,OAAO,KAAK,MAAMA,CAAU,EAChC,IAAImF,EACJ,OAAInN,IAAO,OACPmN,EAAQ,KAAK,KAGbA,EAAQnN,EACZ,KAAK,WAAW,IAAIgI,EAAYmF,CAAK,EACrC,KAAK,WAAW,IAAIA,EAAOnF,CAAU,EAC9BmF,CACX,CACA,SAASnN,EAAI,CACT,OAAO,KAAK,WAAW,IAAIA,CAAE,GAAK,IACtC,CACA,OAAQ,CACJ,KAAK,WAAa,IAAI,QACtB,KAAK,WAAa,IAAI,IACtB,KAAK,GAAK,CACd,CACA,YAAa,CACT,OAAO,KAAK,IAChB,CACJ,CCpVA,IAAIoN,GAA8BC,IAChCA,EAAWA,EAAW,iBAAsB,CAAC,EAAI,mBACjDA,EAAWA,EAAW,KAAU,CAAC,EAAI,OACrCA,EAAWA,EAAW,aAAkB,CAAC,EAAI,eAC7CA,EAAWA,EAAW,oBAAyB,CAAC,EAAI,sBACpDA,EAAWA,EAAW,KAAU,CAAC,EAAI,OACrCA,EAAWA,EAAW,OAAY,CAAC,EAAI,SACvCA,EAAWA,EAAW,OAAY,CAAC,EAAI,SAChCA,IACND,GAAa,CAAA,CAAE,EACdE,GAAsCC,IACxCA,EAAmBA,EAAmB,SAAc,CAAC,EAAI,WACzDA,EAAmBA,EAAmB,UAAe,CAAC,EAAI,YAC1DA,EAAmBA,EAAmB,iBAAsB,CAAC,EAAI,mBACjEA,EAAmBA,EAAmB,OAAY,CAAC,EAAI,SACvDA,EAAmBA,EAAmB,eAAoB,CAAC,EAAI,iBAC/DA,EAAmBA,EAAmB,MAAW,CAAC,EAAI,QACtDA,EAAmBA,EAAmB,UAAe,CAAC,EAAI,YAC1DA,EAAmBA,EAAmB,iBAAsB,CAAC,EAAI,mBACjEA,EAAmBA,EAAmB,eAAoB,CAAC,EAAI,iBAC/DA,EAAmBA,EAAmB,eAAoB,CAAC,EAAI,iBAC/DA,EAAmBA,EAAmB,KAAU,EAAE,EAAI,OACtDA,EAAmBA,EAAmB,IAAS,EAAE,EAAI,MACrDA,EAAmBA,EAAmB,KAAU,EAAE,EAAI,OACtDA,EAAmBA,EAAmB,iBAAsB,EAAE,EAAI,mBAClEA,EAAmBA,EAAmB,UAAe,EAAE,EAAI,YAC3DA,EAAmBA,EAAmB,kBAAuB,EAAE,EAAI,oBAC5DA,IACND,GAAqB,CAAA,CAAE,EACtBE,IAAsCC,IACxCA,EAAmBA,EAAmB,QAAa,CAAC,EAAI,UACxDA,EAAmBA,EAAmB,UAAe,CAAC,EAAI,YAC1DA,EAAmBA,EAAmB,MAAW,CAAC,EAAI,QACtDA,EAAmBA,EAAmB,YAAiB,CAAC,EAAI,cAC5DA,EAAmBA,EAAmB,SAAc,CAAC,EAAI,WACzDA,EAAmBA,EAAmB,MAAW,CAAC,EAAI,QACtDA,EAAmBA,EAAmB,KAAU,CAAC,EAAI,OACrDA,EAAmBA,EAAmB,WAAgB,CAAC,EAAI,aAC3DA,EAAmBA,EAAmB,mBAAwB,CAAC,EAAI,qBACnEA,EAAmBA,EAAmB,SAAc,CAAC,EAAI,WACzDA,EAAmBA,EAAmB,YAAiB,EAAE,EAAI,cACtDA,IACND,IAAqB,CAAA,CAAE,EACtBE,IAAkCC,IACpCA,EAAeA,EAAe,IAAI,EAAI,CAAC,EAAI,KAC3CA,EAAeA,EAAe,MAAW,CAAC,EAAI,QAC9CA,EAAeA,EAAe,OAAY,CAAC,EAAI,SACxCA,IACND,IAAiB,CAAA,CAAE,EC7CtB,SAASE,GAAmB5O,EAAG,CAC3B,MAAO,SAAUA,CACrB,CACA,MAAM6O,EAAiB,CACnB,aAAc,CACV,KAAK,OAAS,EACd,KAAK,KAAO,IAChB,CACA,IAAIC,EAAU,CACV,GAAIA,GAAY,KAAK,OACjB,MAAM,IAAI,MAAM,gCAAgC,EAEpD,IAAIC,EAAU,KAAK,KACnB,QAASC,EAAQ,EAAGA,EAAQF,EAAUE,IAClCD,EAA6DA,GAAQ,MAAS,KAElF,OAAOA,CACX,CACA,QAAQ/O,EAAG,CACP,MAAMmB,EAAO,CACT,MAAOnB,EACP,SAAU,KACV,KAAM,IAClB,EAEQ,GADAA,EAAE,KAAOmB,EACLnB,EAAE,iBAAmB4O,GAAmB5O,EAAE,eAAe,EAAG,CAC5D,MAAM+O,EAAU/O,EAAE,gBAAgB,KAAK,KACvCmB,EAAK,KAAO4N,EACZ5N,EAAK,SAAWnB,EAAE,gBAAgB,KAClCA,EAAE,gBAAgB,KAAK,KAAOmB,EAC1B4N,IACAA,EAAQ,SAAW5N,EAE3B,SACSnB,EAAE,aACP4O,GAAmB5O,EAAE,WAAW,GAChCA,EAAE,YAAY,KAAK,SAAU,CAC7B,MAAM+O,EAAU/O,EAAE,YAAY,KAAK,SACnCmB,EAAK,SAAW4N,EAChB5N,EAAK,KAAOnB,EAAE,YAAY,KAC1BA,EAAE,YAAY,KAAK,SAAWmB,EAC1B4N,IACAA,EAAQ,KAAO5N,EAEvB,MAEQ,KAAK,OACL,KAAK,KAAK,SAAWA,GAEzBA,EAAK,KAAO,KAAK,KACjB,KAAK,KAAOA,EAEhB,KAAK,QACT,CACA,WAAWnB,EAAG,CACV,MAAM+O,EAAU/O,EAAE,KACb,KAAK,OAGL+O,EAAQ,UAOTA,EAAQ,SAAS,KAAOA,EAAQ,KAC5BA,EAAQ,OACRA,EAAQ,KAAK,SAAWA,EAAQ,YARpC,KAAK,KAAOA,EAAQ,KAChB,KAAK,OACL,KAAK,KAAK,SAAW,OASzB/O,EAAE,MACF,OAAOA,EAAE,KAEb,KAAK,SACT,CACJ,CACA,MAAMiP,GAAU,CAACjO,EAAIkO,IAAa,GAAGlO,CAAE,IAAIkO,CAAQ,GACnD,MAAMC,EAAe,CACjB,aAAc,CACV,KAAK,OAAS,GACd,KAAK,OAAS,GACd,KAAK,MAAQ,GACb,KAAK,WAAa,GAClB,KAAK,QAAU,GACf,KAAK,WAAa,GAClB,KAAK,SAAW,GAChB,KAAK,SAAW,IAAI,IACpB,KAAK,SAAW,IAAI,IACpB,KAAK,WAAa,IAAI,IACtB,KAAK,iBAAoBC,GAAc,CACnCA,EAAU,QAAQ,KAAK,eAAe,EACtC,KAAK,KAAI,CACb,EACA,KAAK,KAAO,IAAM,CACd,GAAI,KAAK,QAAU,KAAK,OACpB,OAEJ,MAAMC,EAAO,CAAA,EACPC,EAAU,IAAIT,GACdU,EAAavP,GAAM,CACrB,IAAIwP,EAAKxP,EACLyP,EAAS9M,GACb,KAAO8M,IAAW9M,IACd6M,EAAKA,GAAMA,EAAG,YACdC,EAASD,GAAM,KAAK,OAAO,MAAMA,CAAE,EAEvC,OAAOC,CACX,EACMC,EAAW1P,GAAM,CACnB,IAAIe,EAAI2G,EAAIK,EAAIyB,EAChB,IAAImG,EAAa,OACXjI,GAAM3G,EAAKf,EAAE,eAAiB,MAAQe,IAAO,OAAS,OAASA,EAAG,KAAKf,CAAC,KAAO,MAAQ0H,IAAO,OAAS,OAASA,EAAG,YAAc,KAAK,wBACxI1H,EAAE,YAAW,EAAG,OAChB2P,EAAa3P,EAAE,YAAW,EAAG,MACjC,IAAI4P,EAAiBD,EACrB,OAASnG,GAAMzB,EAAqE6H,GAAe,eAAiB,MAAQ7H,IAAO,OAAS,OAASA,EAAG,KAAK6H,CAAc,KAAO,MAAQpG,IAAO,OAAS,OAASA,EAAG,YAClN,KAAK,wBACLoG,EAAe,YAAW,EAAG,MAC7BA,EAAiBA,EAAe,YAAW,EAAG,KAClD,MAAMC,EAAW,CAAC,KAAK,IAAI,SAAS7P,CAAC,IAChC,CAAC4P,GAAkB,CAAC,KAAK,IAAI,SAASA,CAAc,GACzD,GAAI,CAAC5P,EAAE,YAAc6P,EACjB,OAEJ,MAAMX,EAAWjP,GAAaD,EAAE,UAAU,EACpC,KAAK,OAAO,MAAM2P,CAAU,EAC5B,KAAK,OAAO,MAAM3P,EAAE,UAAU,EAC9ByP,EAASF,EAAUvP,CAAC,EAC1B,GAAIkP,IAAa,IAAMO,IAAW,GAC9B,OAAOH,EAAQ,QAAQtP,CAAC,EAE5B,MAAM8J,EAAKE,GAAoBhK,EAAG,CAC9B,IAAK,KAAK,IACV,OAAQ,KAAK,OACb,WAAY,KAAK,WACjB,cAAe,KAAK,cACpB,cAAe,KAAK,cACpB,iBAAkB,KAAK,iBACvB,UAAW,GACX,kBAAmB,GACnB,iBAAkB,KAAK,iBACvB,iBAAkB,KAAK,iBACvB,WAAY,KAAK,WACjB,YAAa,KAAK,YAClB,eAAgB,KAAK,eACrB,eAAgB,KAAK,eACrB,aAAc,KAAK,aACnB,aAAc,KAAK,aACnB,YAAc8P,GAAa,CACnB/B,GAAmB+B,EAAU,KAAK,MAAM,GACxC,KAAK,cAAc,UAAUA,CAAQ,EAErC9B,GAAuB8B,EAAU,KAAK,MAAM,GAC5C,KAAK,kBAAkB,iBAAiBA,CAAQ,EAEhD7B,GAAcjO,CAAC,GACf,KAAK,iBAAiB,cAAcA,EAAE,WAAY,KAAK,GAAG,CAElE,EACA,aAAc,CAAC+P,EAAQC,IAAY,CAC/B,KAAK,cAAc,aAAaD,EAAQC,CAAO,EAC/C,KAAK,iBAAiB,oBAAoBD,CAAM,CACpD,EACA,iBAAkB,CAAC9I,EAAM+I,IAAY,CACjC,KAAK,kBAAkB,kBAAkB/I,EAAM+I,CAAO,CAC1D,CACpB,CAAiB,EACGlG,GACAuF,EAAK,KAAK,CACN,SAAAH,EACA,OAAAO,EACA,KAAM3F,CAC9B,CAAqB,CAET,EACA,KAAO,KAAK,WAAW,QACnB,KAAK,OAAO,kBAAkB,KAAK,WAAW,MAAK,CAAE,EAEzD,UAAW9J,KAAK,MAAM,KAAK,KAAK,SAAS,OAAM,CAAE,EACzCiQ,GAAgB,KAAK,QAASjQ,EAAG,KAAK,MAAM,GAC5C,CAAC,KAAK,SAAS,IAAIA,EAAE,UAAU,GAGnC0P,EAAQ1P,CAAC,EAEb,UAAWA,KAAK,MAAM,KAAK,KAAK,SAAS,OAAM,CAAE,EACzC,CAACkQ,GAAgB,KAAK,WAAYlQ,CAAC,GACnC,CAACiQ,GAAgB,KAAK,QAASjQ,EAAG,KAAK,MAAM,GAGxCkQ,GAAgB,KAAK,SAAUlQ,CAAC,EAFrC0P,EAAQ1P,CAAC,EAMT,KAAK,WAAW,IAAIA,CAAC,EAG7B,IAAImQ,EAAY,KAChB,KAAOb,EAAQ,QAAQ,CACnB,IAAInO,EAAO,KACX,GAAIgP,EAAW,CACX,MAAMjB,EAAW,KAAK,OAAO,MAAMiB,EAAU,MAAM,UAAU,EACvDV,EAASF,EAAUY,EAAU,KAAK,EACpCjB,IAAa,IAAMO,IAAW,KAC9BtO,EAAOgP,EAEf,CACA,GAAI,CAAChP,EACD,QAAS6N,EAAQM,EAAQ,OAAS,EAAGN,GAAS,EAAGA,IAAS,CACtD,MAAMoB,EAAQd,EAAQ,IAAIN,CAAK,EAC/B,GAAIoB,EAAO,CACP,MAAMlB,EAAW,KAAK,OAAO,MAAMkB,EAAM,MAAM,UAAU,EAEzD,GADeb,EAAUa,EAAM,KAAK,IACrB,GACX,SACC,GAAIlB,IAAa,GAAI,CACtB/N,EAAOiP,EACP,KACJ,KACK,CACD,MAAMC,EAAgBD,EAAM,MAC5B,GAAIC,EAAc,YACdA,EAAc,WAAW,WACrB,KAAK,uBAAwB,CACjC,MAAMV,EAAaU,EAAc,WAC5B,KAEL,GADiB,KAAK,OAAO,MAAMV,CAAU,IAC5B,GAAI,CACjBxO,EAAOiP,EACP,KACJ,CACJ,CACJ,CACJ,CACJ,CAEJ,GAAI,CAACjP,EAAM,CACP,KAAOmO,EAAQ,MACXA,EAAQ,WAAWA,EAAQ,KAAK,KAAK,EAEzC,KACJ,CACAa,EAAYhP,EAAK,SACjBmO,EAAQ,WAAWnO,EAAK,KAAK,EAC7BuO,EAAQvO,EAAK,KAAK,CACtB,CACA,MAAMmP,EAAU,CACZ,MAAO,KAAK,MACP,IAAKzO,IAAU,CAChB,GAAI,KAAK,OAAO,MAAMA,EAAK,IAAI,EAC/B,MAAOA,EAAK,KAChC,EAAkB,EACG,OAAQA,GAAS,KAAK,OAAO,IAAIA,EAAK,EAAE,CAAC,EAC9C,WAAY,KAAK,WACZ,IAAK0O,IAAe,CACrB,GAAI,KAAK,OAAO,MAAMA,EAAU,IAAI,EACpC,WAAYA,EAAU,UAC1C,EAAkB,EACG,OAAQA,GAAc,KAAK,OAAO,IAAIA,EAAU,EAAE,CAAC,EACxD,QAAS,KAAK,QACd,KAAAlB,CAChB,EACgB,CAACiB,EAAQ,MAAM,QACf,CAACA,EAAQ,WAAW,QACpB,CAACA,EAAQ,QAAQ,QACjB,CAACA,EAAQ,KAAK,SAGlB,KAAK,MAAQ,GACb,KAAK,WAAa,GAClB,KAAK,QAAU,GACf,KAAK,SAAW,IAAI,IACpB,KAAK,SAAW,IAAI,IACpB,KAAK,WAAa,IAAI,IACtB,KAAK,SAAW,GAChB,KAAK,WAAWA,CAAO,EAC3B,EACA,KAAK,gBAAmBE,GAAM,CAC1B,GAAI,CAAA9C,GAAU8C,EAAE,OAAQ,KAAK,MAAM,EAGnC,OAAQA,EAAE,KAAI,CACV,IAAK,gBAAiB,CAClB,MAAM7O,EAAQ6O,EAAE,OAAO,YACnB,CAAChD,EAAUgD,EAAE,OAAQ,KAAK,WAAY,KAAK,cAAe,EAAK,GAC/D7O,IAAU6O,EAAE,UACZ,KAAK,MAAM,KAAK,CACZ,MAAOpK,GAAgBoK,EAAE,OAAQ,KAAK,cAAe,KAAK,gBAAgB,GAAK7O,EACzE,KAAK,WACD,KAAK,WAAWA,CAAK,EACrBA,EAAM,QAAQ,QAAS,GAAG,EAC9BA,EACN,KAAM6O,EAAE,MACpC,CAAyB,EAEL,KACJ,CACA,IAAK,aAAc,CACf,MAAMzE,EAASyE,EAAE,OACjB,IAAI7O,EAAQ6O,EAAE,OAAO,aAAaA,EAAE,aAAa,EAUjD,GATIA,EAAE,gBAAkB,UACpB7O,EAAQJ,GAAe,CACnB,iBAAkB,KAAK,iBACvB,QAASiP,EAAE,OAAO,QAClB,KAAMA,EAAE,OAAO,aAAa,MAAM,EAClC,MAAA7O,EACA,YAAa,KAAK,WAC9C,CAAyB,GAED6L,EAAUgD,EAAE,OAAQ,KAAK,WAAY,KAAK,cAAe,EAAK,GAC9D7O,IAAU6O,EAAE,SACZ,OAEJ,IAAIC,EAAO,KAAK,WAAW,KAAMnL,GAAMA,EAAE,OAASkL,EAAE,MAAM,EAC1D,GAAIzE,EAAO,UAAY,UACnByE,EAAE,gBAAkB,OACpB,CAAC,KAAK,gBAAgB7O,CAAK,EAC3B,GAAI,CAACoK,EAAO,gBACRyE,EAAE,cAAgB,aAGlB,QAUR,GAPKC,IACDA,EAAO,CACH,KAAMD,EAAE,OACR,WAAY,CAAA,CACxC,EACwB,KAAK,WAAW,KAAKC,CAAI,GAEzBD,EAAE,gBAAkB,QAAS,CAC7B,MAAME,EAAM,KAAK,IAAI,cAAc,MAAM,EACrCF,EAAE,UACFE,EAAI,aAAa,QAASF,EAAE,QAAQ,GAEpCC,EAAK,WAAW,QAAU,QAC1BA,EAAK,WAAW,QAAU,QAC1BA,EAAK,WAAW,MAAQ,IAE5B,MAAME,EAAWF,EAAK,WAAW,MACjC,UAAWG,KAAS,MAAM,KAAK7E,EAAO,KAAK,EAAG,CAC1C,MAAM8E,EAAW9E,EAAO,MAAM,iBAAiB6E,CAAK,EAC9CE,EAAc/E,EAAO,MAAM,oBAAoB6E,CAAK,GACtDC,IAAaH,EAAI,MAAM,iBAAiBE,CAAK,GAC7CE,IAAgBJ,EAAI,MAAM,oBAAoBE,CAAK,KAC/CE,IAAgB,GAChBH,EAASC,CAAK,EAAIC,EAGlBF,EAASC,CAAK,EAAI,CAACC,EAAUC,CAAW,EAGpD,CACA,UAAWF,KAAS,MAAM,KAAKF,EAAI,KAAK,EAChC3E,EAAO,MAAM,iBAAiB6E,CAAK,IAAM,KACzCD,EAASC,CAAK,EAAI,GAG9B,MAEIH,EAAK,WAAWD,EAAE,aAAa,EAAI9K,GAAmB,KAAK,IAAKqG,EAAO,QAASyE,EAAE,cAAe7O,CAAK,EAE1G,KACJ,CACA,IAAK,YAAa,CACd,GAAI6L,EAAUgD,EAAE,OAAQ,KAAK,WAAY,KAAK,cAAe,EAAI,EAC7D,OACJA,EAAE,WAAW,QAASxQ,GAAM,KAAK,QAAQA,EAAGwQ,EAAE,MAAM,CAAC,EACrDA,EAAE,aAAa,QAASxQ,GAAM,CAC1B,MAAM+Q,EAAS,KAAK,OAAO,MAAM/Q,CAAC,EAC5BkP,EAAWjP,GAAauQ,EAAE,MAAM,EAChC,KAAK,OAAO,MAAMA,EAAE,OAAO,IAAI,EAC/B,KAAK,OAAO,MAAMA,EAAE,MAAM,EAC5BhD,EAAUgD,EAAE,OAAQ,KAAK,WAAY,KAAK,cAAe,EAAK,GAC9D9C,GAAU1N,EAAG,KAAK,MAAM,GACxB,CAACyN,GAAazN,EAAG,KAAK,MAAM,IAG5B,KAAK,SAAS,IAAIA,CAAC,GACnBgR,GAAW,KAAK,SAAUhR,CAAC,EAC3B,KAAK,WAAW,IAAIA,CAAC,GAEhB,KAAK,SAAS,IAAIwQ,EAAE,MAAM,GAAKO,IAAW,IAC1CpD,GAAkB6C,EAAE,OAAQ,KAAK,MAAM,IACvC,KAAK,SAAS,IAAIxQ,CAAC,GACxB,KAAK,SAASiP,GAAQ8B,EAAQ7B,CAAQ,CAAC,EACvC8B,GAAW,KAAK,SAAUhR,CAAC,EAG3B,KAAK,QAAQ,KAAK,CACd,SAAAkP,EACA,GAAI6B,EACJ,SAAU9Q,GAAauQ,EAAE,MAAM,GAAKrQ,GAAkBqQ,EAAE,MAAM,EACxD,GACA,MACtC,CAA6B,GAEL,KAAK,WAAW,KAAKxQ,CAAC,EAC1B,CAAC,EACD,KACJ,CAChB,CACQ,EACA,KAAK,QAAU,CAACA,EAAG+L,IAAW,CAC1B,GAAI,KAAK,OAAO,QAAQ/L,CAAC,EAAG,CACxB,GAAI0N,GAAU1N,EAAG,KAAK,MAAM,EACxB,OAEJ,KAAK,SAAS,IAAIA,CAAC,EACnB,IAAIiR,EAAW,KACXlF,GAAU,KAAK,OAAO,QAAQA,CAAM,IACpCkF,EAAW,KAAK,OAAO,MAAMlF,CAAM,GAEnCkF,GAAYA,IAAa,KACzB,KAAK,SAAShC,GAAQ,KAAK,OAAO,MAAMjP,CAAC,EAAGiR,CAAQ,CAAC,EAAI,GAEjE,MAEI,KAAK,SAAS,IAAIjR,CAAC,EACnB,KAAK,WAAW,OAAOA,CAAC,EAEvBwN,EAAUxN,EAAG,KAAK,WAAY,KAAK,cAAe,EAAK,GACxDA,EAAE,WAAW,QAASmL,GAAW,KAAK,QAAQA,CAAM,CAAC,CAC7D,CACJ,CACA,KAAK7D,EAAS,CACV,CACI,aACA,aACA,gBACA,gBACA,mBACA,mBACA,mBACA,aACA,cACA,kBACA,eACA,eACA,iBACA,iBACA,MACA,SACA,gBACA,oBACA,mBACA,eACZ,EAAU,QAASwF,GAAQ,CACf,KAAKA,CAAG,EAAIxF,EAAQwF,CAAG,CAC3B,CAAC,CACL,CACA,QAAS,CACL,KAAK,OAAS,GACd,KAAK,cAAc,QACvB,CACA,UAAW,CACP,KAAK,OAAS,GACd,KAAK,cAAc,WACnB,KAAK,KAAI,CACb,CACA,UAAW,CACP,OAAO,KAAK,MAChB,CACA,MAAO,CACH,KAAK,OAAS,GACd,KAAK,cAAc,MACvB,CACA,QAAS,CACL,KAAK,OAAS,GACd,KAAK,cAAc,SACnB,KAAK,KAAI,CACb,CACA,OAAQ,CACJ,KAAK,iBAAiB,QACtB,KAAK,cAAc,OACvB,CACJ,CACA,SAASkE,GAAWE,EAASlR,EAAG,CAC5BkR,EAAQ,OAAOlR,CAAC,EAChBA,EAAE,WAAW,QAASmL,GAAW6F,GAAWE,EAAS/F,CAAM,CAAC,CAChE,CACA,SAAS8E,GAAgBkB,EAASnR,EAAGuH,EAAQ,CACzC,OAAI4J,EAAQ,SAAW,EACZ,GACJC,GAAiBD,EAASnR,EAAGuH,CAAM,CAC9C,CACA,SAAS6J,GAAiBD,EAASnR,EAAGuH,EAAQ,CAC1C,KAAM,CAAE,WAAA8J,CAAU,EAAKrR,EACvB,GAAI,CAACqR,EACD,MAAO,GAEX,MAAMnC,EAAW3H,EAAO,MAAM8J,CAAU,EACxC,OAAIF,EAAQ,KAAMG,GAAMA,EAAE,KAAOpC,CAAQ,EAC9B,GAEJkC,GAAiBD,EAASE,EAAY9J,CAAM,CACvD,CACA,SAAS2I,GAAgBqB,EAAKvR,EAAG,CAC7B,OAAIuR,EAAI,OAAS,EACN,GACJC,GAAiBD,EAAKvR,CAAC,CAClC,CACA,SAASwR,GAAiBD,EAAKvR,EAAG,CAC9B,KAAM,CAAE,WAAAqR,CAAU,EAAKrR,EACvB,OAAKqR,EAGDE,EAAI,IAAIF,CAAU,EACX,GAEJG,GAAiBD,EAAKF,CAAU,EAL5B,EAMf,CC/fA,MAAMI,GAAkB,CAAA,EAClBC,GAA6B,OAAO,gBAAoB,IACxDC,GAA0B,OAAO,aAAiB,IAClDC,GAA6B,OAAO,gBAAoB,IACxDC,GAA8B,OAAO,iBAAqB,IAChE,SAASC,GAAejE,EAAO,CAC3B,GAAI,CACA,GAAI,iBAAkBA,EAAO,CACzB,MAAMkE,EAAOlE,EAAM,eACnB,GAAIkE,EAAK,OACL,OAAOA,EAAK,CAAC,CAErB,SACS,SAAUlE,GAASA,EAAM,KAAK,OACnC,OAAOA,EAAM,KAAK,CAAC,EAEvB,OAAOA,EAAM,MACjB,MACW,CACP,OAAOA,EAAM,MACjB,CACJ,CACA,SAASmE,GAAqB1K,EAAS2K,EAAQ,CAC3C,IAAIlR,EAAI2G,EACR,MAAMwK,EAAiB,IAAI/C,GAC3BsC,GAAgB,KAAKS,CAAc,EACnCA,EAAe,KAAK5K,CAAO,EAC3B,IAAI6K,EAAuB,OAAO,kBAC9B,OAAO,qBACX,MAAMC,GAAqB1K,GAAM3G,EAAqD,QAAO,QAAU,MAAQA,IAAO,OAAS,OAASA,EAAG,cAAgB,MAAQ2G,IAAO,OAAS,OAASA,EAAG,KAAK3G,EAAI,kBAAkB,EACtNqR,GACA,OAAOA,CAAiB,IACxBD,EAAuB,OAAOC,CAAiB,GAEnD,MAAMC,EAAW,IAAIF,EAAqBD,EAAe,iBAAiB,KAAKA,CAAc,CAAC,EAC9F,OAAAG,EAAS,QAAQJ,EAAQ,CACrB,WAAY,GACZ,kBAAmB,GACnB,cAAe,GACf,sBAAuB,GACvB,UAAW,GACX,QAAS,EACjB,CAAK,EACMI,CACX,CACA,SAASC,GAAiB,CAAE,YAAAC,EAAa,SAAAC,EAAU,IAAA7N,EAAK,OAAA4C,CAAM,EAAK,CAC/D,GAAIiL,EAAS,YAAc,GACvB,MAAO,IAAM,CACb,EAEJ,MAAMC,EAAY,OAAOD,EAAS,WAAc,SAAWA,EAAS,UAAY,GAC1EE,EAAoB,OAAOF,EAAS,mBAAsB,SAC1DA,EAAS,kBACT,IACN,IAAIG,EAAY,CAAA,EACZC,EACJ,MAAMC,EAAYzG,GAAUe,GAAW,CACnC,MAAM2F,EAAc,KAAK,IAAG,EAAKF,EACjCL,EAAYI,EAAU,IAAKI,IACvBA,EAAE,YAAcD,EACTC,EACV,EAAG5F,CAAM,EACVwF,EAAY,CAAA,EACZC,EAAe,IACnB,EAAGF,CAAiB,EACdM,EAAiB5G,GAAU6G,GAAQ,CACrC,MAAMlH,EAAS+F,GAAemB,CAAG,EAC3B,CAAE,QAAAC,EAAS,QAAAC,GAAYvF,GAAaqF,CAAG,EACvCA,EAAI,eAAe,CAAC,EACpBA,EACDL,IACDA,EAAe,KAAK,OAExBD,EAAU,KAAK,CACX,EAAGO,EACH,EAAGC,EACH,GAAI5L,EAAO,MAAMwE,CAAM,EACvB,WAAY,KAAK,IAAG,EAAK6G,CACrC,CAAS,EACDC,EAAU,OAAO,UAAc,KAAeI,aAAe,UACvD3E,EAAkB,KAClB2E,aAAe,WACX3E,EAAkB,UAClBA,EAAkB,SAAS,CACzC,EAAGmE,EAAW,CACV,SAAU,EAClB,CAAK,EACKW,EAAW,CACbvH,EAAG,YAAamH,EAAgBrO,CAAG,EACnCkH,EAAG,YAAamH,EAAgBrO,CAAG,EACnCkH,EAAG,OAAQmH,EAAgBrO,CAAG,CACtC,EACI,MAAO,IAAM,CACTyO,EAAS,QAASC,GAAMA,EAAC,CAAE,CAC/B,CACJ,CACA,SAASC,GAA6B,CAAE,mBAAAC,EAAoB,IAAA5O,EAAK,OAAA4C,EAAQ,WAAA1B,EAAY,cAAAC,EAAe,SAAA0M,GAAa,CAC7G,GAAIA,EAAS,mBAAqB,GAC9B,MAAO,IAAM,CACb,EAEJ,MAAMgB,EAAahB,EAAS,mBAAqB,IAC7CA,EAAS,mBAAqB,OAC5B,CAAA,EACAA,EAAS,iBACTY,EAAW,CAAA,EACXK,EAAcC,GACR7F,GAAU,CACd,MAAM9B,EAAS+F,GAAejE,CAAK,EACnC,GAAIL,EAAUzB,EAAQlG,EAAYC,EAAe,EAAI,EACjD,OAEJ,MAAM6N,EAAI/F,GAAaC,CAAK,EAAIA,EAAM,eAAe,CAAC,EAAIA,EAC1D,GAAI,CAAC8F,EACD,OAEJ,MAAM3S,EAAKuG,EAAO,MAAMwE,CAAM,EACxB,CAAE,QAAAmH,EAAS,QAAAC,CAAO,EAAKQ,EAC7BJ,EAAmB,CACf,KAAM/E,GAAkBkF,CAAQ,EAChC,GAAA1S,EACA,EAAGkS,EACH,EAAGC,CACnB,CAAa,CACL,EAEJ,cAAO,KAAK3E,EAAiB,EACxB,OAAQ1B,GAAQ,OAAO,MAAM,OAAOA,CAAG,CAAC,GACzC,CAACA,EAAI,SAAS,WAAW,GACzB0G,EAAW1G,CAAG,IAAM,EAAK,EACxB,QAAS4G,GAAa,CACvB,MAAME,EAAYF,EAAS,cACrBG,EAAUJ,EAAWC,CAAQ,EACnCN,EAAS,KAAKvH,EAAG+H,EAAWC,EAASlP,CAAG,CAAC,CAC7C,CAAC,EACM,IAAM,CACTyO,EAAS,QAASC,GAAMA,EAAC,CAAE,CAC/B,CACJ,CACA,SAASS,GAAmB,CAAE,SAAAC,EAAU,IAAApP,EAAK,OAAA4C,EAAQ,WAAA1B,EAAY,cAAAC,EAAe,SAAA0M,GAAa,CACzF,MAAMQ,EAAiB5G,GAAU6G,GAAQ,CACrC,MAAMlH,EAAS+F,GAAemB,CAAG,EACjC,GAAI,CAAClH,GAAUyB,EAAUzB,EAAQlG,EAAYC,EAAe,EAAI,EAC5D,OAEJ,MAAM9E,EAAKuG,EAAO,MAAMwE,CAAM,EAC9B,GAAIA,IAAWpH,EAAK,CAChB,MAAMqP,EAAYrP,EAAI,kBAAoBA,EAAI,gBAC9CoP,EAAS,CACL,GAAA/S,EACA,EAAGgT,EAAS,WACZ,EAAGA,EAAS,SAC5B,CAAa,CACL,MAEID,EAAS,CACL,GAAA/S,EACA,EAAG+K,EAAO,WACV,EAAGA,EAAO,SAC1B,CAAa,CAET,EAAGyG,EAAS,QAAU,GAAG,EACzB,OAAO3G,EAAG,SAAUmH,EAAgBrO,CAAG,CAC3C,CACA,SAASsP,GAA2B,CAAE,iBAAAC,GAAqB,CACvD,IAAIC,EAAQ,GACRC,EAAQ,GACZ,MAAMC,EAAkBjI,GAAS,IAAM,CACnC,MAAM1C,EAAS4D,KACT7D,EAAQ8D,MACV4G,IAAUzK,GAAU0K,IAAU3K,KAC9ByK,EAAiB,CACb,MAAO,OAAOzK,CAAK,EACnB,OAAQ,OAAOC,CAAM,CACrC,CAAa,EACDyK,EAAQzK,EACR0K,EAAQ3K,EAEhB,EAAG,GAAG,EACN,OAAOoC,EAAG,SAAUwI,EAAiB,MAAM,CAC/C,CACA,SAASC,GAA+BC,EAAGC,EAAQ,CAC/C,MAAM7S,EAAQ,OAAO,OAAO,CAAA,EAAI4S,CAAC,EACjC,OAAKC,GACD,OAAO7S,EAAM,cACVA,CACX,CACA,MAAM8S,GAAa,CAAC,QAAS,WAAY,QAAQ,EAC3CC,GAAoB,IAAI,QAC9B,SAASC,GAAkB,CAAE,QAAAC,EAAS,IAAAjQ,EAAK,OAAA4C,EAAQ,WAAA1B,EAAY,cAAAC,EAAe,YAAA+O,EAAa,iBAAArT,EAAkB,YAAAI,EAAa,SAAA4Q,EAAU,qBAAAsC,CAAoB,EAAK,CACzJ,SAASC,EAAalH,EAAO,CACzB,IAAI9B,EAAS+F,GAAejE,CAAK,EACjC,MAAMmH,EAAgBnH,EAAM,UAG5B,GAFI9B,GAAUA,EAAO,UAAY,WAC7BA,EAASA,EAAO,eAChB,CAACA,GACD,CAACA,EAAO,SACR0I,GAAW,QAAQ1I,EAAO,OAAO,EAAI,GACrCyB,EAAUzB,EAAQlG,EAAYC,EAAe,EAAI,EACjD,OAEJ,MAAMpE,EAAOqK,EAAO,KACpB,GAAIA,EAAO,UAAU,SAAS8I,CAAW,EACrC,OAEJ,IAAIhT,EAAOkK,EAAO,MACdkJ,EAAY,GACZvT,IAAS,SAAWA,IAAS,WAC7BuT,EAAYlJ,EAAO,SAEdvK,EAAiBuK,EAAO,QAAQ,YAAW,CAAE,GAClDvK,EAAiBE,CAAI,KACrBG,EAAON,GAAe,CAClB,iBAAAC,EACA,QAASuK,EAAO,QAChB,KAAArK,EACA,MAAOG,EACP,YAAAD,CAChB,CAAa,GAELsT,EAAYnJ,EAAQuI,GAA+B,CAAE,KAAAzS,EAAM,UAAAoT,EAAW,cAAAD,CAAa,EAAIF,CAAoB,CAAC,EAC5G,MAAMnP,EAAOoG,EAAO,KAChBrK,IAAS,SAAWiE,GAAQsP,GAC5BtQ,EACK,iBAAiB,6BAA6BgB,CAAI,IAAI,EACtD,QAASH,GAAO,CACbA,IAAOuG,GACPmJ,EAAY1P,EAAI8O,GAA+B,CAC3C,KAAM9O,EAAG,MACT,UAAW,CAACyP,EACZ,cAAe,EACvC,EAAuBH,CAAoB,CAAC,CAEhC,CAAC,CAET,CACA,SAASI,EAAYnJ,EAAQwI,EAAG,CAC5B,MAAMY,EAAiBT,GAAkB,IAAI3I,CAAM,EACnD,GAAI,CAACoJ,GACDA,EAAe,OAASZ,EAAE,MAC1BY,EAAe,YAAcZ,EAAE,UAAW,CAC1CG,GAAkB,IAAI3I,EAAQwI,CAAC,EAC/B,MAAMvT,EAAKuG,EAAO,MAAMwE,CAAM,EAC9B6I,EAAQ,OAAO,OAAO,OAAO,OAAO,GAAIL,CAAC,EAAG,CAAE,GAAAvT,CAAE,CAAE,CAAC,CACvD,CACJ,CAEA,MAAMoS,GADSZ,EAAS,QAAU,OAAS,CAAC,QAAQ,EAAI,CAAC,QAAS,QAAQ,GAClD,IAAKoB,GAAc/H,EAAG+H,EAAWmB,EAAcpQ,CAAG,CAAC,EACrEyQ,EAAgBzQ,EAAI,YAC1B,GAAI,CAACyQ,EACD,MAAO,IAAM,CACThC,EAAS,QAASC,GAAMA,EAAC,CAAE,CAC/B,EAEJ,MAAMgC,EAAqBD,EAAc,OAAO,yBAAyBA,EAAc,iBAAiB,UAAW,OAAO,EACpHE,EAAiB,CACnB,CAACF,EAAc,iBAAiB,UAAW,OAAO,EAClD,CAACA,EAAc,iBAAiB,UAAW,SAAS,EACpD,CAACA,EAAc,kBAAkB,UAAW,OAAO,EACnD,CAACA,EAAc,oBAAoB,UAAW,OAAO,EACrD,CAACA,EAAc,kBAAkB,UAAW,eAAe,EAC3D,CAACA,EAAc,kBAAkB,UAAW,UAAU,CAC9D,EACI,OAAIC,GAAsBA,EAAmB,KACzCjC,EAAS,KAAK,GAAGkC,EAAe,IAAKvC,GAAMlG,GAAWkG,EAAE,CAAC,EAAGA,EAAE,CAAC,EAAG,CAC9D,KAAM,CACFgC,EAAa,CAAE,OAAQ,IAAI,CAAE,CACjC,CACZ,EAAW,GAAOK,CAAa,CAAC,CAAC,EAEtB,IAAM,CACThC,EAAS,QAASC,GAAMA,EAAC,CAAE,CAC/B,CACJ,CACA,SAASkC,GAA0B5U,EAAM,CACrC,MAAMgS,EAAY,CAAA,EAClB,SAAS6C,EAAQC,EAAW5Q,EAAK,CAC7B,GAAK6M,IACD+D,EAAU,sBAAsB,iBAC/B9D,IACG8D,EAAU,sBAAsB,cACnC7D,IACG6D,EAAU,sBAAsB,iBACnC5D,IACG4D,EAAU,sBAAsB,iBAAmB,CAEvD,MAAMzG,EADQ,MAAM,KAAKyG,EAAU,WAAW,QAAQ,EAClC,QAAQA,CAAS,EACrC5Q,EAAI,QAAQmK,CAAK,CACrB,SACSyG,EAAU,iBAAkB,CAEjC,MAAMzG,EADQ,MAAM,KAAKyG,EAAU,iBAAiB,QAAQ,EACxC,QAAQA,CAAS,EACrC5Q,EAAI,QAAQmK,CAAK,CACrB,CACA,OAAOnK,CACX,CACA,OAAO2Q,EAAQ7U,EAAMgS,CAAS,CAClC,CACA,SAAS+C,GAAgBzS,EAAOsE,EAAQoO,EAAa,CACjD,IAAI3U,EAAI4U,EACR,OAAK3S,GAEDA,EAAM,UACNjC,EAAKuG,EAAO,MAAMtE,EAAM,SAAS,EAEjC2S,EAAUD,EAAY,MAAM1S,CAAK,EAC9B,CACH,QAAA2S,EACA,GAAA5U,CACR,GARe,EASf,CACA,SAAS6U,GAAuB,CAAE,iBAAAC,EAAkB,OAAAvO,EAAQ,kBAAAwO,CAAiB,EAAI,CAAE,IAAApP,GAAO,CACtF,MAAMqP,EAAarP,EAAI,cAAc,UAAU,WAC/CA,EAAI,cAAc,UAAU,WAAa,SAAUhG,EAAMqO,EAAO,CAC5D,KAAM,CAAE,GAAAhO,EAAI,QAAA4U,GAAYF,GAAgB,KAAMnO,EAAQwO,EAAkB,WAAW,EACnF,OAAK/U,GAAMA,IAAO,IAAQ4U,GAAWA,IAAY,KAC7CE,EAAiB,CACb,GAAA9U,EACA,QAAA4U,EACA,KAAM,CAAC,CAAE,KAAAjV,EAAM,MAAAqO,EAAO,CACtC,CAAa,EAEEgH,EAAW,MAAM,KAAM,CAACrV,EAAMqO,CAAK,CAAC,CAC/C,EACA,MAAMiH,EAAatP,EAAI,cAAc,UAAU,WAC/CA,EAAI,cAAc,UAAU,WAAa,SAAUqI,EAAO,CACtD,KAAM,CAAE,GAAAhO,EAAI,QAAA4U,GAAYF,GAAgB,KAAMnO,EAAQwO,EAAkB,WAAW,EACnF,OAAK/U,GAAMA,IAAO,IAAQ4U,GAAWA,IAAY,KAC7CE,EAAiB,CACb,GAAA9U,EACA,QAAA4U,EACA,QAAS,CAAC,CAAE,MAAA5G,EAAO,CACnC,CAAa,EAEEiH,EAAW,MAAM,KAAM,CAACjH,CAAK,CAAC,CACzC,EACA,IAAIkH,EACAvP,EAAI,cAAc,UAAU,UAC5BuP,EAAUvP,EAAI,cAAc,UAAU,QACtCA,EAAI,cAAc,UAAU,QAAU,SAAU9E,EAAM,CAClD,KAAM,CAAE,GAAAb,EAAI,QAAA4U,GAAYF,GAAgB,KAAMnO,EAAQwO,EAAkB,WAAW,EACnF,OAAK/U,GAAMA,IAAO,IAAQ4U,GAAWA,IAAY,KAC7CE,EAAiB,CACb,GAAA9U,EACA,QAAA4U,EACA,QAAS/T,CAC7B,CAAiB,EAEEqU,EAAQ,MAAM,KAAM,CAACrU,CAAI,CAAC,CACrC,GAEJ,IAAIsU,EACAxP,EAAI,cAAc,UAAU,cAC5BwP,EAAcxP,EAAI,cAAc,UAAU,YAC1CA,EAAI,cAAc,UAAU,YAAc,SAAU9E,EAAM,CACtD,KAAM,CAAE,GAAAb,EAAI,QAAA4U,GAAYF,GAAgB,KAAMnO,EAAQwO,EAAkB,WAAW,EACnF,OAAK/U,GAAMA,IAAO,IAAQ4U,GAAWA,IAAY,KAC7CE,EAAiB,CACb,GAAA9U,EACA,QAAA4U,EACA,YAAa/T,CACjC,CAAiB,EAEEsU,EAAY,MAAM,KAAM,CAACtU,CAAI,CAAC,CACzC,GAEJ,MAAMuU,EAA8B,CAAA,EAChC1E,GACA0E,EAA4B,gBAAkBzP,EAAI,iBAG9CgL,KACAyE,EAA4B,aAAezP,EAAI,cAE/CkL,KACAuE,EAA4B,iBAAmBzP,EAAI,kBAEnDiL,KACAwE,EAA4B,gBAAkBzP,EAAI,kBAG1D,MAAM0P,EAAsB,CAAA,EAC5B,cAAO,QAAQD,CAA2B,EAAE,QAAQ,CAAC,CAACE,EAAS5U,CAAI,IAAM,CACrE2U,EAAoBC,CAAO,EAAI,CAC3B,WAAY5U,EAAK,UAAU,WAC3B,WAAYA,EAAK,UAAU,UACvC,EACQA,EAAK,UAAU,WAAa,SAAUf,EAAMqO,EAAO,CAC/C,KAAM,CAAE,GAAAhO,EAAI,QAAA4U,CAAO,EAAKF,GAAgB,KAAK,iBAAkBnO,EAAQwO,EAAkB,WAAW,EACpG,OAAK/U,GAAMA,IAAO,IAAQ4U,GAAWA,IAAY,KAC7CE,EAAiB,CACb,GAAA9U,EACA,QAAA4U,EACA,KAAM,CACF,CACI,KAAAjV,EACA,MAAO,CACH,GAAG4U,GAA0B,IAAI,EACjCvG,GAAS,CACzC,CACA,CACA,CACA,CAAiB,EAEEqH,EAAoBC,CAAO,EAAE,WAAW,MAAM,KAAM,CAAC3V,EAAMqO,CAAK,CAAC,CAC5E,EACAtN,EAAK,UAAU,WAAa,SAAUsN,EAAO,CACzC,KAAM,CAAE,GAAAhO,EAAI,QAAA4U,CAAO,EAAKF,GAAgB,KAAK,iBAAkBnO,EAAQwO,EAAkB,WAAW,EACpG,OAAK/U,GAAMA,IAAO,IAAQ4U,GAAWA,IAAY,KAC7CE,EAAiB,CACb,GAAA9U,EACA,QAAA4U,EACA,QAAS,CACL,CAAE,MAAO,CAAC,GAAGL,GAA0B,IAAI,EAAGvG,CAAK,CAAC,CAC5E,CACA,CAAiB,EAEEqH,EAAoBC,CAAO,EAAE,WAAW,MAAM,KAAM,CAACtH,CAAK,CAAC,CACtE,CACJ,CAAC,EACM,IAAM,CACTrI,EAAI,cAAc,UAAU,WAAaqP,EACzCrP,EAAI,cAAc,UAAU,WAAasP,EACzCC,IAAYvP,EAAI,cAAc,UAAU,QAAUuP,GAClDC,IAAgBxP,EAAI,cAAc,UAAU,YAAcwP,GAC1D,OAAO,QAAQC,CAA2B,EAAE,QAAQ,CAAC,CAACE,EAAS5U,CAAI,IAAM,CACrEA,EAAK,UAAU,WAAa2U,EAAoBC,CAAO,EAAE,WACzD5U,EAAK,UAAU,WAAa2U,EAAoBC,CAAO,EAAE,UAC7D,CAAC,CACL,CACJ,CACA,SAASC,GAA8B,CAAE,OAAAhP,EAAQ,kBAAAwO,CAAiB,EAAK7V,EAAM,CACzE,IAAIa,EAAI2G,EAAIK,EACZ,IAAIyO,EAAS,KACTtW,EAAK,WAAa,YAClBsW,EAASjP,EAAO,MAAMrH,CAAI,EAE1BsW,EAASjP,EAAO,MAAMrH,EAAK,IAAI,EACnC,MAAMuW,EAAcvW,EAAK,WAAa,aAC/Ba,EAAKb,EAAK,eAAiB,MAAQa,IAAO,OAAS,OAASA,EAAG,UAC/DgH,GAAML,EAAKxH,EAAK,iBAAmB,MAAQwH,IAAO,OAAS,OAASA,EAAG,eAAiB,MAAQK,IAAO,OAAS,OAASA,EAAG,WAC7H2O,EAA6B,OAAO,yBAAmFD,GAAY,UAAW,oBAAoB,EACxK,OAAID,IAAW,MACXA,IAAW,IACX,CAACC,GACD,CAACC,EACM,IAAM,CACb,GACJ,OAAO,eAAexW,EAAM,qBAAsB,CAC9C,aAAcwW,EAA2B,aACzC,WAAYA,EAA2B,WACvC,KAAM,CACF,IAAI3V,EACJ,OAAQA,EAAK2V,EAA2B,OAAS,MAAQ3V,IAAO,OAAS,OAASA,EAAG,KAAK,IAAI,CAClG,EACA,IAAI4V,EAAQ,CACR,IAAI5V,EACJ,MAAM6V,GAAU7V,EAAK2V,EAA2B,OAAS,MAAQ3V,IAAO,OAAS,OAASA,EAAG,KAAK,KAAM4V,CAAM,EAC9G,GAAIH,IAAW,MAAQA,IAAW,GAC9B,GAAI,CACAT,EAAkB,iBAAiBY,EAAQH,CAAM,CACrD,MACU,CACV,CAEJ,OAAOI,CACX,CACR,CAAK,EACM,IAAM,CACT,OAAO,eAAe1W,EAAM,qBAAsB,CAC9C,aAAcwW,EAA2B,aACzC,WAAYA,EAA2B,WACvC,IAAKA,EAA2B,IAChC,IAAKA,EAA2B,GAC5C,CAAS,CACL,EACJ,CACA,SAASG,GAA6B,CAAE,mBAAAC,EAAoB,OAAAvP,EAAQ,oBAAAwP,EAAqB,kBAAAhB,CAAiB,EAAK,CAAE,IAAApP,GAAO,CACpH,MAAMqQ,EAAcrQ,EAAI,oBAAoB,UAAU,YACtDA,EAAI,oBAAoB,UAAU,YAAc,SAAUsQ,EAAUtV,EAAOuV,EAAU,CACjF,IAAInW,EACJ,GAAIgW,EAAoB,IAAIE,CAAQ,EAChC,OAAOD,EAAY,MAAM,KAAM,CAACC,EAAUtV,EAAOuV,CAAQ,CAAC,EAE9D,KAAM,CAAE,GAAAlW,EAAI,QAAA4U,CAAO,EAAKF,IAAiB3U,EAAK,KAAK,cAAgB,MAAQA,IAAO,OAAS,OAASA,EAAG,iBAAkBwG,EAAQwO,EAAkB,WAAW,EAC9J,OAAK/U,GAAMA,IAAO,IAAQ4U,GAAWA,IAAY,KAC7CkB,EAAmB,CACf,GAAA9V,EACA,QAAA4U,EACA,IAAK,CACD,SAAAqB,EACA,MAAAtV,EACA,SAAAuV,CACpB,EACgB,MAAO3B,GAA0B,KAAK,UAAU,CAChE,CAAa,EAEEyB,EAAY,MAAM,KAAM,CAACC,EAAUtV,EAAOuV,CAAQ,CAAC,CAC9D,EACA,MAAMC,EAAiBxQ,EAAI,oBAAoB,UAAU,eACzD,OAAAA,EAAI,oBAAoB,UAAU,eAAiB,SAAUsQ,EAAU,CACnE,IAAIlW,EACJ,GAAIgW,EAAoB,IAAIE,CAAQ,EAChC,OAAOE,EAAe,MAAM,KAAM,CAACF,CAAQ,CAAC,EAEhD,KAAM,CAAE,GAAAjW,EAAI,QAAA4U,CAAO,EAAKF,IAAiB3U,EAAK,KAAK,cAAgB,MAAQA,IAAO,OAAS,OAASA,EAAG,iBAAkBwG,EAAQwO,EAAkB,WAAW,EAC9J,OAAK/U,GAAMA,IAAO,IAAQ4U,GAAWA,IAAY,KAC7CkB,EAAmB,CACf,GAAA9V,EACA,QAAA4U,EACA,OAAQ,CACJ,SAAAqB,CACpB,EACgB,MAAO1B,GAA0B,KAAK,UAAU,CAChE,CAAa,EAEE4B,EAAe,MAAM,KAAM,CAACF,CAAQ,CAAC,CAChD,EACO,IAAM,CACTtQ,EAAI,oBAAoB,UAAU,YAAcqQ,EAChDrQ,EAAI,oBAAoB,UAAU,eAAiBwQ,CACvD,CACJ,CACA,SAASC,GAA6B,CAAE,mBAAAC,EAAoB,WAAAxR,EAAY,cAAAC,EAAe,OAAAyB,EAAQ,SAAAiL,GAAa,CACxG,MAAMqB,EAAWnS,GAAS0K,GAAUyB,GAAU,CAC1C,MAAM9B,EAAS+F,GAAejE,CAAK,EACnC,GAAI,CAAC9B,GACDyB,EAAUzB,EAAQlG,EAAYC,EAAe,EAAI,EACjD,OAEJ,KAAM,CAAE,YAAAwR,EAAa,OAAAC,EAAQ,MAAAC,EAAO,aAAAC,CAAY,EAAM1L,EACtDsL,EAAmB,CACf,KAAA3V,EACA,GAAI6F,EAAO,MAAMwE,CAAM,EACvB,YAAAuL,EACA,OAAAC,EACA,MAAAC,EACA,aAAAC,CACZ,CAAS,CACL,EAAGjF,EAAS,OAAS,GAAG,EAClBY,EAAW,CACbvH,EAAG,OAAQgI,EAAQ,CAAC,CAAC,EACrBhI,EAAG,QAASgI,EAAQ,CAAC,CAAC,EACtBhI,EAAG,SAAUgI,EAAQ,CAAC,CAAC,EACvBhI,EAAG,eAAgBgI,EAAQ,CAAC,CAAC,EAC7BhI,EAAG,aAAcgI,EAAQ,CAAC,CAAC,CACnC,EACI,MAAO,IAAM,CACTT,EAAS,QAASC,GAAMA,EAAC,CAAE,CAC/B,CACJ,CACA,SAASqE,GAAiB,CAAE,OAAAC,EAAQ,IAAAhT,GAAO,CACvC,MAAMgC,EAAMhC,EAAI,YAChB,GAAI,CAACgC,EACD,MAAO,IAAM,CACb,EAEJ,MAAMyM,EAAW,CAAA,EACXwE,EAAU,IAAI,QACdC,EAAmBlR,EAAI,SAC7BA,EAAI,SAAW,SAAkBmR,EAAQ3K,EAAQ4K,EAAa,CAC1D,MAAMC,EAAW,IAAIH,EAAiBC,EAAQ3K,EAAQ4K,CAAW,EACjE,OAAAH,EAAQ,IAAII,EAAU,CAClB,OAAAF,EACA,OAAQ,OAAO3K,GAAW,SAC1B,YAAA4K,EACA,WAAY,OAAO5K,GAAW,SACxBA,EACA,KAAK,UAAU,MAAM,KAAK,IAAI,WAAWA,CAAM,CAAC,CAAC,CACnE,CAAS,EACM6K,CACX,EACA,MAAMC,EAAiB/K,GAAMvI,EAAI,MAAO,MAAO,SAAUsI,EAAU,CAC/D,OAAO,SAAU+K,EAAU,CACvB,kBAAW,IAAM,CACb,MAAMjF,EAAI6E,EAAQ,IAAII,CAAQ,EAC1BjF,IACA4E,EAAO5E,CAAC,EACR6E,EAAQ,OAAOI,CAAQ,EAE/B,EAAG,CAAC,EACG/K,EAAS,MAAM,KAAM,CAAC+K,CAAQ,CAAC,CAC1C,CACJ,CAAC,EACD,OAAA5E,EAAS,KAAK,IAAM,CAChBzM,EAAI,SAAWkR,CACnB,CAAC,EACDzE,EAAS,KAAK6E,CAAc,EACrB,IAAM,CACT7E,EAAS,QAASC,GAAMA,EAAC,CAAE,CAC/B,CACJ,CACA,SAAS6E,GAAsBC,EAAO,CAClC,KAAM,CAAE,IAAAxT,EAAK,OAAA4C,EAAQ,WAAA1B,EAAY,cAAAC,EAAe,YAAAsS,CAAW,EAAKD,EAChE,IAAIE,EAAY,GAChB,MAAMC,EAAkB,IAAM,CAC1B,MAAMC,EAAY5T,EAAI,eACtB,GAAI,CAAC4T,GAAcF,GAAoEE,GAAU,YAC7F,OACJF,EAAYE,EAAU,aAAe,GACrC,MAAMC,EAAS,CAAA,EACTC,EAAQF,EAAU,YAAc,EACtC,QAASzP,EAAI,EAAGA,EAAI2P,EAAO3P,IAAK,CAC5B,MAAM4P,EAAQH,EAAU,WAAWzP,CAAC,EAC9B,CAAE,eAAA6P,EAAgB,YAAAC,EAAa,aAAAC,EAAc,UAAAC,CAAS,EAAKJ,EACjDlL,EAAUmL,EAAgB9S,EAAYC,EAAe,EAAI,GACrE0H,EAAUqL,EAAchT,EAAYC,EAAe,EAAI,GAG3D0S,EAAO,KAAK,CACR,MAAOjR,EAAO,MAAMoR,CAAc,EAClC,YAAAC,EACA,IAAKrR,EAAO,MAAMsR,CAAY,EAC9B,UAAAC,CAChB,CAAa,CACL,CACAV,EAAY,CAAE,OAAAI,CAAM,CAAE,CAC1B,EACA,OAAAF,IACOzM,EAAG,kBAAmByM,CAAe,CAChD,CACA,SAASS,GAAWC,EAAGC,EAAO,CAC1B,KAAM,CAAE,WAAAC,EAAY,YAAA3G,EAAa,mBAAAgB,EAAoB,SAAAQ,EAAU,iBAAAG,EAAkB,QAAAU,EAAS,mBAAAyC,EAAoB,iBAAAvB,EAAkB,mBAAAgB,EAAoB,iBAAAqC,EAAkB,OAAAxB,EAAQ,YAAAS,CAAW,EAAMY,EAC/LA,EAAE,WAAa,IAAIjG,IAAM,CACjBkG,EAAM,UACNA,EAAM,SAAS,GAAGlG,CAAC,EAEvBmG,EAAW,GAAGnG,CAAC,CACnB,EACAiG,EAAE,YAAc,IAAIjG,IAAM,CAClBkG,EAAM,WACNA,EAAM,UAAU,GAAGlG,CAAC,EAExBR,EAAY,GAAGQ,CAAC,CACpB,EACAiG,EAAE,mBAAqB,IAAIjG,IAAM,CACzBkG,EAAM,kBACNA,EAAM,iBAAiB,GAAGlG,CAAC,EAE/BQ,EAAmB,GAAGR,CAAC,CAC3B,EACAiG,EAAE,SAAW,IAAIjG,IAAM,CACfkG,EAAM,QACNA,EAAM,OAAO,GAAGlG,CAAC,EAErBgB,EAAS,GAAGhB,CAAC,CACjB,EACAiG,EAAE,iBAAmB,IAAIjG,IAAM,CACvBkG,EAAM,gBACNA,EAAM,eAAe,GAAGlG,CAAC,EAE7BmB,EAAiB,GAAGnB,CAAC,CACzB,EACAiG,EAAE,QAAU,IAAIjG,IAAM,CACdkG,EAAM,OACNA,EAAM,MAAM,GAAGlG,CAAC,EAEpB6B,EAAQ,GAAG7B,CAAC,CAChB,EACAiG,EAAE,mBAAqB,IAAIjG,IAAM,CACzBkG,EAAM,iBACNA,EAAM,gBAAgB,GAAGlG,CAAC,EAE9BsE,EAAmB,GAAGtE,CAAC,CAC3B,EACAiG,EAAE,iBAAmB,IAAIjG,IAAM,CACvBkG,EAAM,gBACNA,EAAM,eAAe,GAAGlG,CAAC,EAE7B+C,EAAiB,GAAG/C,CAAC,CACzB,EACAiG,EAAE,mBAAqB,IAAIjG,IAAM,CACzBkG,EAAM,kBACNA,EAAM,iBAAiB,GAAGlG,CAAC,EAE/B+D,EAAmB,GAAG/D,CAAC,CAC3B,EACAiG,EAAE,iBAAmB,IAAIjG,IAAM,CACvBkG,EAAM,gBACNA,EAAM,eAAe,GAAGlG,CAAC,EAE7BoG,EAAiB,GAAGpG,CAAC,CACzB,EACAiG,EAAE,OAAS,IAAIjG,IAAM,CACbkG,EAAM,MACNA,EAAM,KAAK,GAAGlG,CAAC,EAEnB4E,EAAO,GAAG5E,CAAC,CACf,EACAiG,EAAE,YAAc,IAAIjG,IAAM,CAClBkG,EAAM,WACNA,EAAM,UAAU,GAAGlG,CAAC,EAExBqF,EAAY,GAAGrF,CAAC,CACpB,CACJ,CACA,SAASqG,GAAcJ,EAAGC,EAAQ,GAAI,CAClC,MAAM7D,EAAgB4D,EAAE,IAAI,YAC5B,GAAI,CAAC5D,EACD,MAAO,IAAM,CACb,EAEJ2D,GAAWC,EAAGC,CAAK,EACnB,MAAMI,EAAmBrH,GAAqBgH,EAAGA,EAAE,GAAG,EAChDM,EAAmBhH,GAAiB0G,CAAC,EACrCO,EAA0BjG,GAA6B0F,CAAC,EACxDQ,EAAgB1F,GAAmBkF,CAAC,EACpCS,EAAwBxF,GAA2B+E,CAAC,EACpDU,EAAe/E,GAAkBqE,CAAC,EAClCW,EAA0BvC,GAA6B4B,CAAC,EACxDY,EAAqB/D,GAAuBmD,EAAG,CAAE,IAAK5D,CAAa,CAAE,EACrEyE,EAA4BtD,GAA8ByC,EAAGA,EAAE,GAAG,EAClEc,EAA2BjD,GAA6BmC,EAAG,CAC7D,IAAK5D,CACb,CAAK,EACK2E,EAAef,EAAE,aACjBtB,GAAiBsB,CAAC,EAClB,IAAM,CACR,EACEgB,EAAoB9B,GAAsBc,CAAC,EAC3CiB,EAAiB,CAAA,EACvB,UAAWC,KAAUlB,EAAE,QACnBiB,EAAe,KAAKC,EAAO,SAASA,EAAO,SAAU9E,EAAe8E,EAAO,OAAO,CAAC,EAEvF,MAAO,IAAM,CACTzI,GAAgB,QAAS,GAAM,EAAE,MAAK,CAAE,EACxC4H,EAAiB,WAAU,EAC3BC,IACAC,IACAC,IACAC,IACAC,IACAC,IACAC,IACAC,IACAC,IACAC,IACAC,IACAC,EAAe,QAAS5G,GAAMA,EAAC,CAAE,CACrC,CACJ,CCzuBA,MAAM8G,EAAwB,CAC1B,YAAYC,EAAc,CACtB,KAAK,aAAeA,EACpB,KAAK,sBAAwB,IAAI,QACjC,KAAK,sBAAwB,IAAI,OACrC,CACA,MAAMrK,EAAQsK,EAAUC,EAAeC,EAAe,CAClD,MAAMC,EAAkBF,GAAiB,KAAK,mBAAmBvK,CAAM,EACjE0K,EAAkBF,GAAiB,KAAK,mBAAmBxK,CAAM,EACvE,IAAI/O,EAAKwZ,EAAgB,IAAIH,CAAQ,EACrC,OAAKrZ,IACDA,EAAK,KAAK,eACVwZ,EAAgB,IAAIH,EAAUrZ,CAAE,EAChCyZ,EAAgB,IAAIzZ,EAAIqZ,CAAQ,GAE7BrZ,CACX,CACA,OAAO+O,EAAQsK,EAAU,CACrB,MAAMG,EAAkB,KAAK,mBAAmBzK,CAAM,EAChD0K,EAAkB,KAAK,mBAAmB1K,CAAM,EACtD,OAAOsK,EAAS,IAAKrZ,GAAO,KAAK,MAAM+O,EAAQ/O,EAAIwZ,EAAiBC,CAAe,CAAC,CACxF,CACA,YAAY1K,EAAQ/O,EAAI0Z,EAAK,CACzB,MAAMD,EAAkBC,GAAO,KAAK,mBAAmB3K,CAAM,EAC7D,GAAI,OAAO/O,GAAO,SACd,OAAOA,EACX,MAAMqZ,EAAWI,EAAgB,IAAIzZ,CAAE,EACvC,OAAKqZ,GACM,EAEf,CACA,aAAatK,EAAQ4K,EAAK,CACtB,MAAMF,EAAkB,KAAK,mBAAmB1K,CAAM,EACtD,OAAO4K,EAAI,IAAK3Z,GAAO,KAAK,YAAY+O,EAAQ/O,EAAIyZ,CAAe,CAAC,CACxE,CACA,MAAM1K,EAAQ,CACV,GAAI,CAACA,EAAQ,CACT,KAAK,sBAAwB,IAAI,QACjC,KAAK,sBAAwB,IAAI,QACjC,MACJ,CACA,KAAK,sBAAsB,OAAOA,CAAM,EACxC,KAAK,sBAAsB,OAAOA,CAAM,CAC5C,CACA,mBAAmBA,EAAQ,CACvB,IAAIyK,EAAkB,KAAK,sBAAsB,IAAIzK,CAAM,EAC3D,OAAKyK,IACDA,EAAkB,IAAI,IACtB,KAAK,sBAAsB,IAAIzK,EAAQyK,CAAe,GAEnDA,CACX,CACA,mBAAmBzK,EAAQ,CACvB,IAAI0K,EAAkB,KAAK,sBAAsB,IAAI1K,CAAM,EAC3D,OAAK0K,IACDA,EAAkB,IAAI,IACtB,KAAK,sBAAsB,IAAI1K,EAAQ0K,CAAe,GAEnDA,CACX,CACJ,CCxDA,MAAMG,EAAc,CAChB,YAAYtT,EAAS,CACjB,KAAK,QAAU,IAAI,QACnB,KAAK,qBAAuB,IAAI,QAChC,KAAK,wBAA0B,IAAI6S,GAAwBvX,EAAK,EAChE,KAAK,WAAa0E,EAAQ,WAC1B,KAAK,YAAcA,EAAQ,YAC3B,KAAK,kBAAoBA,EAAQ,kBACjC,KAAK,yBAA2BA,EAAQ,yBACxC,KAAK,6BAA+B,IAAI6S,GAAwB,KAAK,kBAAkB,YAAY,WAAW,KAAK,KAAK,kBAAkB,WAAW,CAAC,EACtJ,KAAK,OAAS7S,EAAQ,OAClB,KAAK,0BACL,OAAO,iBAAiB,UAAW,KAAK,cAAc,KAAK,IAAI,CAAC,CAExE,CACA,UAAUd,EAAU,CAChB,KAAK,QAAQ,IAAIA,EAAU,EAAI,EAC3BA,EAAS,eACT,KAAK,qBAAqB,IAAIA,EAAS,cAAeA,CAAQ,CACtE,CACA,gBAAgBqU,EAAI,CAChB,KAAK,aAAeA,CACxB,CACA,aAAarU,EAAUwJ,EAAS,CAC5B,IAAIjP,EACJ,KAAK,WAAW,CACZ,KAAM,CACF,CACI,SAAU,KAAK,OAAO,MAAMyF,CAAQ,EACpC,OAAQ,KACR,KAAMwJ,CAC1B,CACA,EACY,QAAS,CAAA,EACT,MAAO,CAAA,EACP,WAAY,CAAA,EACZ,eAAgB,EAC5B,CAAS,GACAjP,EAAK,KAAK,gBAAkB,MAAQA,IAAO,QAAkBA,EAAG,KAAK,KAAMyF,CAAQ,EAChFA,EAAS,iBACTA,EAAS,gBAAgB,oBACzBA,EAAS,gBAAgB,mBAAmB,OAAS,GACrD,KAAK,kBAAkB,iBAAiBA,EAAS,gBAAgB,mBAAoB,KAAK,OAAO,MAAMA,EAAS,eAAe,CAAC,CACxI,CACA,cAAcsU,EAAS,CACnB,GAAIA,EAAQ,KAAK,OAAS,QAAS,CAE/B,GAAI,CADuBA,EAAQ,OAE/B,OACJ,MAAMtU,EAAW,KAAK,qBAAqB,IAAIsU,EAAQ,MAAM,EAC7D,GAAI,CAACtU,EACD,OACJ,MAAMuU,EAAmB,KAAK,0BAA0BvU,EAAUsU,EAAQ,KAAK,KAAK,EAChFC,GACA,KAAK,YAAYA,EAAkBD,EAAQ,KAAK,UAAU,CAClE,CACJ,CACA,0BAA0BtU,EAAUmN,EAAG,CACnC,IAAI5S,EACJ,OAAQ4S,EAAE,KAAI,CACV,KAAKvF,EAAU,aACX,YAAK,wBAAwB,MAAM5H,CAAQ,EAC3C,KAAK,6BAA6B,MAAMA,CAAQ,EAChD,KAAK,gBAAgBmN,EAAE,KAAK,KAAMnN,CAAQ,EACnC,CACH,UAAWmN,EAAE,UACb,KAAMvF,EAAU,oBAChB,KAAM,CACF,OAAQE,EAAkB,SAC1B,KAAM,CACF,CACI,SAAU,KAAK,OAAO,MAAM9H,CAAQ,EACpC,OAAQ,KACR,KAAMmN,EAAE,KAAK,IAC7C,CACA,EACwB,QAAS,CAAA,EACT,MAAO,CAAA,EACP,WAAY,CAAA,EACZ,eAAgB,EACxC,CACA,EAEY,KAAKvF,EAAU,KACf,KAAKA,EAAU,KACf,KAAKA,EAAU,iBACX,MAAO,GAEX,KAAKA,EAAU,OACX,OAAOuF,EAEX,KAAKvF,EAAU,OACX,YAAK,WAAWuF,EAAE,KAAK,QAASnN,EAAU,CAAC,KAAM,WAAY,aAAc,QAAQ,CAAC,EAC7EmN,EAEX,KAAKvF,EAAU,oBACX,OAAQuF,EAAE,KAAK,OAAM,CACjB,KAAKrF,EAAkB,SACnB,OAAAqF,EAAE,KAAK,KAAK,QAAS3T,GAAM,CACvB,KAAK,WAAWA,EAAGwG,EAAU,CACzB,WACA,SACA,YAChC,CAA6B,EACD,KAAK,gBAAgBxG,EAAE,KAAMwG,CAAQ,CACzC,CAAC,EACDmN,EAAE,KAAK,QAAQ,QAAS3T,GAAM,CAC1B,KAAK,WAAWA,EAAGwG,EAAU,CAAC,WAAY,IAAI,CAAC,CACnD,CAAC,EACDmN,EAAE,KAAK,WAAW,QAAS3T,GAAM,CAC7B,KAAK,WAAWA,EAAGwG,EAAU,CAAC,IAAI,CAAC,CACvC,CAAC,EACDmN,EAAE,KAAK,MAAM,QAAS3T,GAAM,CACxB,KAAK,WAAWA,EAAGwG,EAAU,CAAC,IAAI,CAAC,CACvC,CAAC,EACMmN,EAEX,KAAKrF,EAAkB,KACvB,KAAKA,EAAkB,UACvB,KAAKA,EAAkB,UACnB,OAAAqF,EAAE,KAAK,UAAU,QAASZ,GAAM,CAC5B,KAAK,WAAWA,EAAGvM,EAAU,CAAC,IAAI,CAAC,CACvC,CAAC,EACMmN,EAEX,KAAKrF,EAAkB,eACnB,MAAO,GAEX,KAAKA,EAAkB,iBACvB,KAAKA,EAAkB,iBACvB,KAAKA,EAAkB,OACvB,KAAKA,EAAkB,eACvB,KAAKA,EAAkB,MACnB,YAAK,WAAWqF,EAAE,KAAMnN,EAAU,CAAC,IAAI,CAAC,EACjCmN,EAEX,KAAKrF,EAAkB,eACvB,KAAKA,EAAkB,iBACnB,YAAK,WAAWqF,EAAE,KAAMnN,EAAU,CAAC,IAAI,CAAC,EACxC,KAAK,gBAAgBmN,EAAE,KAAMnN,EAAU,CAAC,SAAS,CAAC,EAC3CmN,EAEX,KAAKrF,EAAkB,KACnB,OAAOqF,EAEX,KAAKrF,EAAkB,UACnB,OAAAqF,EAAE,KAAK,OAAO,QAAS+E,GAAU,CAC7B,KAAK,WAAWA,EAAOlS,EAAU,CAAC,QAAS,KAAK,CAAC,CACrD,CAAC,EACMmN,EAEX,KAAKrF,EAAkB,kBACnB,YAAK,WAAWqF,EAAE,KAAMnN,EAAU,CAAC,IAAI,CAAC,EACxC,KAAK,gBAAgBmN,EAAE,KAAMnN,EAAU,CAAC,UAAU,CAAC,GAClDzF,EAAK4S,EAAE,KAAK,UAAY,MAAQ5S,IAAO,QAAkBA,EAAG,QAASia,GAAU,CAC5E,KAAK,gBAAgBA,EAAOxU,EAAU,CAAC,SAAS,CAAC,CACrD,CAAC,EACMmN,CAE/B,CAEA,CACI,CACA,QAAQsH,EAAcC,EAAK1U,EAAU2U,EAAM,CACvC,UAAWrO,KAAOqO,EACV,CAAC,MAAM,QAAQD,EAAIpO,CAAG,CAAC,GAAK,OAAOoO,EAAIpO,CAAG,GAAM,WAEhD,MAAM,QAAQoO,EAAIpO,CAAG,CAAC,EACtBoO,EAAIpO,CAAG,EAAImO,EAAa,OAAOzU,EAAU0U,EAAIpO,CAAG,CAAC,EAGjDoO,EAAIpO,CAAG,EAAImO,EAAa,MAAMzU,EAAU0U,EAAIpO,CAAG,CAAC,GAGxD,OAAOoO,CACX,CACA,WAAWA,EAAK1U,EAAU2U,EAAM,CAC5B,OAAO,KAAK,QAAQ,KAAK,wBAAyBD,EAAK1U,EAAU2U,CAAI,CACzE,CACA,gBAAgBD,EAAK1U,EAAU2U,EAAM,CACjC,OAAO,KAAK,QAAQ,KAAK,6BAA8BD,EAAK1U,EAAU2U,CAAI,CAC9E,CACA,gBAAgBha,EAAMqF,EAAU,CAC5B,KAAK,WAAWrF,EAAMqF,EAAU,CAAC,IAAI,CAAC,EAClC,eAAgBrF,GAChBA,EAAK,WAAW,QAASia,GAAU,CAC/B,KAAK,gBAAgBA,EAAO5U,CAAQ,CACxC,CAAC,CAET,CACJ,CC9LA,MAAM6U,EAAiB,CACnB,YAAY/T,EAAS,CACjB,KAAK,WAAa,IAAI,QACtB,KAAK,eAAiB,GACtB,KAAK,WAAaA,EAAQ,WAC1B,KAAK,SAAWA,EAAQ,SACxB,KAAK,cAAgBA,EAAQ,cAC7B,KAAK,OAASA,EAAQ,OACtB,MAAMgU,EAAU,KAChB,KAAK,eAAe,KAAKpO,GAAM,QAAQ,UAAW,eAAgB,SAAUD,EAAU,CAClF,OAAO,SAAUsO,EAAQ,CACrB,MAAMnb,EAAa6M,EAAS,KAAK,KAAMsO,CAAM,EAC7C,OAAI,KAAK,YACLD,EAAQ,cAAc,KAAK,WAAY,KAAK,aAAa,EACtDlb,CACX,CACJ,CAAC,CAAC,CACN,CACA,cAAcA,EAAYuE,EAAK,CACtBxE,GAAkBC,CAAU,IAE7B,KAAK,WAAW,IAAIA,CAAU,IAElC,KAAK,WAAW,IAAIA,CAAU,EAC9B4R,GAAqB,OAAO,OAAO,OAAO,OAAO,CAAA,EAAI,KAAK,aAAa,EAAG,CAAE,IAAArN,EAAK,WAAY,KAAK,WAAY,OAAQ,KAAK,OAAQ,iBAAkB,IAAI,CAAE,EAAGvE,CAAU,EACxK0T,GAAmB,OAAO,OAAO,OAAO,OAAO,GAAI,KAAK,aAAa,EAAG,CAAE,SAAU,KAAK,SAAU,IAAK1T,EAAY,OAAQ,KAAK,MAAM,CAAE,CAAC,EAC1I,WAAW,IAAM,CACTA,EAAW,oBACXA,EAAW,mBAAmB,OAAS,GACvC,KAAK,cAAc,kBAAkB,iBAAiBA,EAAW,mBAAoB,KAAK,OAAO,MAAMA,EAAW,IAAI,CAAC,EAC3HmW,GAA8B,CAC1B,OAAQ,KAAK,OACb,kBAAmB,KAAK,cAAc,iBACtD,EAAenW,CAAU,CACjB,EAAG,CAAC,GACR,CACA,oBAAoBob,EAAe,CAC/B,GAAIA,EAAc,cAAe,CAC7B,MAAMF,EAAU,KAChB,KAAK,eAAe,KAAKpO,GAAMsO,EAAc,cAAc,YAAY,UAAW,eAAgB,SAAUvO,EAAU,CAClH,OAAO,SAAUsO,EAAQ,CACrB,MAAMnb,EAAa6M,EAAS,KAAK,KAAMsO,CAAM,EAC7C,OAAI,KAAK,YACLD,EAAQ,cAAc,KAAK,WAAYE,EAAc,eAAe,EACjEpb,CACX,CACJ,CAAC,CAAC,CACN,CACJ,CACA,OAAQ,CACJ,KAAK,eAAe,QAASqb,GAAiBA,EAAY,CAAE,EAC5D,KAAK,WAAa,IAAI,OAC1B,CACJ,CC1CA,SAASC,GAAOlb,EAAGmT,EAAG,CAClB,IAAIgI,EAAI,CAAA,EACR,QAAS5I,KAAKvS,EAAO,OAAO,UAAU,eAAe,KAAKA,EAAGuS,CAAC,GAAKY,EAAE,QAAQZ,CAAC,EAAI,IAC9E4I,EAAE5I,CAAC,EAAIvS,EAAEuS,CAAC,GACd,GAAIvS,GAAK,MAAQ,OAAO,OAAO,uBAA0B,WACrD,QAASsI,EAAI,EAAGiK,EAAI,OAAO,sBAAsBvS,CAAC,EAAGsI,EAAIiK,EAAE,OAAQjK,IAC3D6K,EAAE,QAAQZ,EAAEjK,CAAC,CAAC,EAAI,GAAK,OAAO,UAAU,qBAAqB,KAAKtI,EAAGuS,EAAEjK,CAAC,CAAC,IACzE6S,EAAE5I,EAAEjK,CAAC,CAAC,EAAItI,EAAEuS,EAAEjK,CAAC,CAAC,GAE5B,OAAO6S,CACX,CAEA,SAASC,GAAUC,EAASC,EAAYC,EAAGC,EAAW,CAClD,SAASC,EAAMta,EAAO,CAAE,OAAOA,aAAiBoa,EAAIpa,EAAQ,IAAIoa,EAAE,SAAUG,EAAS,CAAEA,EAAQva,CAAK,CAAG,CAAC,CAAG,CAC3G,OAAO,IAAKoa,IAAMA,EAAI,UAAU,SAAUG,EAASC,EAAQ,CACvD,SAASC,EAAUza,EAAO,CAAE,GAAI,CAAE0a,EAAKL,EAAU,KAAKra,CAAK,CAAC,CAAG,OAASgS,EAAG,CAAEwI,EAAOxI,CAAC,CAAG,CAAE,CAC1F,SAAS2I,EAAS3a,EAAO,CAAE,GAAI,CAAE0a,EAAKL,EAAU,MAASra,CAAK,CAAC,CAAG,OAASgS,EAAG,CAAEwI,EAAOxI,CAAC,CAAG,CAAE,CAC7F,SAAS0I,EAAKzF,EAAQ,CAAEA,EAAO,KAAOsF,EAAQtF,EAAO,KAAK,EAAIqF,EAAMrF,EAAO,KAAK,EAAE,KAAKwF,EAAWE,CAAQ,CAAG,CAC7GD,GAAML,EAAYA,EAAU,MAAMH,EAAuB,CAAA,CAAE,GAAG,KAAI,CAAE,CACxE,CAAC,CACL,CC9BA,IAAI7W,GAAQ,mEAERuX,GAAS,OAAO,WAAe,IAAc,CAAA,EAAK,IAAI,WAAW,GAAG,EACxE,QAASzT,GAAI,EAAGA,GAAI9D,GAAM,OAAQ8D,KAC9ByT,GAAOvX,GAAM,WAAW8D,EAAC,CAAC,EAAIA,GAElC,IAAI0T,GAAS,SAAUC,EAAa,CAChC,IAAIC,EAAQ,IAAI,WAAWD,CAAW,EAAG3T,EAAGD,EAAM6T,EAAM,OAAQC,EAAS,GACzE,IAAK7T,EAAI,EAAGA,EAAID,EAAKC,GAAK,EACtB6T,GAAU3X,GAAM0X,EAAM5T,CAAC,GAAK,CAAC,EAC7B6T,GAAU3X,IAAQ0X,EAAM5T,CAAC,EAAI,IAAM,EAAM4T,EAAM5T,EAAI,CAAC,GAAK,CAAE,EAC3D6T,GAAU3X,IAAQ0X,EAAM5T,EAAI,CAAC,EAAI,KAAO,EAAM4T,EAAM5T,EAAI,CAAC,GAAK,CAAE,EAChE6T,GAAU3X,GAAM0X,EAAM5T,EAAI,CAAC,EAAI,EAAE,EAErC,OAAID,EAAM,IAAM,EACZ8T,EAASA,EAAO,UAAU,EAAGA,EAAO,OAAS,CAAC,EAAI,IAE7C9T,EAAM,IAAM,IACjB8T,EAASA,EAAO,UAAU,EAAGA,EAAO,OAAS,CAAC,EAAI,MAE/CA,CACX,ECxBA,MAAMC,GAAe,IAAI,IACzB,SAASC,GAAgB5a,EAAK6a,EAAM,CAChC,IAAIC,EAAaH,GAAa,IAAI3a,CAAG,EACrC,OAAK8a,IACDA,EAAa,IAAI,IACjBH,GAAa,IAAI3a,EAAK8a,CAAU,GAE/BA,EAAW,IAAID,CAAI,GACpBC,EAAW,IAAID,EAAM,CAAA,CAAE,EAEpBC,EAAW,IAAID,CAAI,CAC9B,CACA,MAAME,GAAe,CAACrb,EAAOgF,EAAK1E,IAAQ,CACtC,GAAI,CAACN,GACD,EAAEsb,GAAwBtb,EAAOgF,CAAG,GAAK,OAAOhF,GAAU,UAC1D,OACJ,MAAMgE,EAAOhE,EAAM,YAAY,KACzBub,EAAOL,GAAgB5a,EAAK0D,CAAI,EACtC,IAAIqJ,EAAQkO,EAAK,QAAQvb,CAAK,EAC9B,OAAIqN,IAAU,KACVA,EAAQkO,EAAK,OACbA,EAAK,KAAKvb,CAAK,GAEZqN,CACX,EACA,SAASmO,GAAaxb,EAAOgF,EAAK1E,EAAK,CACnC,GAAIN,aAAiB,MACjB,OAAOA,EAAM,IAAKyb,GAAQD,GAAaC,EAAKzW,EAAK1E,CAAG,CAAC,EAEpD,GAAIN,IAAU,KACf,OAAOA,EAEN,GAAIA,aAAiB,cACtBA,aAAiB,cACjBA,aAAiB,YACjBA,aAAiB,aACjBA,aAAiB,YACjBA,aAAiB,aACjBA,aAAiB,YACjBA,aAAiB,WACjBA,aAAiB,kBAEjB,MAAO,CACH,QAFSA,EAAM,YAAY,KAG3B,KAAM,CAAC,OAAO,OAAOA,CAAK,CAAC,CACvC,EAES,GAAIA,aAAiB,YAAa,CACnC,MAAMgE,EAAOhE,EAAM,YAAY,KACzBgb,EAASH,GAAO7a,CAAK,EAC3B,MAAO,CACH,QAASgE,EACT,OAAAgX,CACZ,CACI,KACK,IAAIhb,aAAiB,SAEtB,MAAO,CACH,QAFSA,EAAM,YAAY,KAG3B,KAAM,CACFwb,GAAaxb,EAAM,OAAQgF,EAAK1E,CAAG,EACnCN,EAAM,WACNA,EAAM,UACtB,CACA,EAES,GAAIA,aAAiB,iBAAkB,CACxC,MAAMgE,EAAOhE,EAAM,YAAY,KACzB,CAAE,IAAA0b,CAAG,EAAK1b,EAChB,MAAO,CACH,QAASgE,EACT,IAAA0X,CACZ,CACI,SACS1b,aAAiB,kBAAmB,CACzC,MAAMgE,EAAO,mBACP0X,EAAM1b,EAAM,YAClB,MAAO,CACH,QAASgE,EACT,IAAA0X,CACZ,CACI,KACK,IAAI1b,aAAiB,UAEtB,MAAO,CACH,QAFSA,EAAM,YAAY,KAG3B,KAAM,CAACwb,GAAaxb,EAAM,KAAMgF,EAAK1E,CAAG,EAAGN,EAAM,MAAOA,EAAM,MAAM,CAChF,EAES,GAAIsb,GAAwBtb,EAAOgF,CAAG,GAAK,OAAOhF,GAAU,SAAU,CACvE,MAAMgE,EAAOhE,EAAM,YAAY,KACzBqN,EAAQgO,GAAarb,EAAOgF,EAAK1E,CAAG,EAC1C,MAAO,CACH,QAAS0D,EACT,MAAOqJ,CACnB,CACI,GACA,OAAOrN,CACX,CACA,MAAM2b,GAAgB,CAAC7Q,EAAM9F,EAAK1E,IACvB,CAAC,GAAGwK,CAAI,EAAE,IAAK2Q,GAAQD,GAAaC,EAAKzW,EAAK1E,CAAG,CAAC,EAEvDgb,GAA0B,CAACtb,EAAOgF,IAe7B,EAduB,CAC1B,kBACA,cACA,mBACA,eACA,oBACA,cACA,6BACA,eACA,uBACA,yBACA,2BACR,EACiE,OAAQhB,GAAS,OAAOgB,EAAIhB,CAAI,GAAM,UAAU,EAC/D,KAAMA,GAAShE,aAAiBgF,EAAIhB,CAAI,CAAC,ECnH3F,SAAS4X,GAA6B1C,EAAIlU,EAAKd,EAAYC,EAAe,CACtE,MAAMsN,EAAW,CAAA,EACXoK,EAAU,OAAO,oBAAoB7W,EAAI,yBAAyB,SAAS,EACjF,UAAWuF,KAAQsR,EACf,GAAI,CACA,GAAI,OAAO7W,EAAI,yBAAyB,UAAUuF,CAAI,GAAM,WACxD,SAEJ,MAAM+L,EAAiB/K,GAAMvG,EAAI,yBAAyB,UAAWuF,EAAM,SAAUe,EAAU,CAC3F,OAAO,YAAaR,EAAM,CACtB,OAAKe,EAAU,KAAK,OAAQ3H,EAAYC,EAAe,EAAI,GACvD,WAAW,IAAM,CACb,MAAM2X,EAAaH,GAAc,CAAC,GAAG7Q,CAAI,EAAG9F,EAAK,IAAI,EACrDkU,EAAG,KAAK,OAAQ,CACZ,KAAMnM,GAAc,IAAI,EACxB,SAAUxC,EACV,KAAMuR,CACtC,CAA6B,CACL,EAAG,CAAC,EAEDxQ,EAAS,MAAM,KAAMR,CAAI,CACpC,CACJ,CAAC,EACD2G,EAAS,KAAK6E,CAAc,CAChC,MACW,CACP,MAAMyF,EAAc7Q,GAAWlG,EAAI,yBAAyB,UAAWuF,EAAM,CACzE,IAAIqI,EAAG,CACHsG,EAAG,KAAK,OAAQ,CACZ,KAAMnM,GAAc,IAAI,EACxB,SAAUxC,EACV,KAAM,CAACqI,CAAC,EACR,OAAQ,EAChC,CAAqB,CACL,CAChB,CAAa,EACDnB,EAAS,KAAKsK,CAAW,CAC7B,CAEJ,MAAO,IAAM,CACTtK,EAAS,QAASC,GAAMA,EAAC,CAAE,CAC/B,CACJ,CC5CA,SAASsK,GAA0BhX,EAAKd,EAAYC,EAAe,CAC/D,MAAMsN,EAAW,CAAA,EACjB,GAAI,CACA,MAAM6E,EAAiB/K,GAAMvG,EAAI,kBAAkB,UAAW,aAAc,SAAUsG,EAAU,CAC5F,OAAO,SAAU2Q,KAAgBnR,EAAM,CACnC,OAAKe,EAAU,KAAM3H,EAAYC,EAAe,EAAI,GAC1C,cAAe,OACjB,KAAK,UAAY8X,GAElB3Q,EAAS,MAAM,KAAM,CAAC2Q,EAAa,GAAGnR,CAAI,CAAC,CACtD,CACJ,CAAC,EACD2G,EAAS,KAAK6E,CAAc,CAChC,MACW,CACP,QAAQ,MAAM,wDAAwD,CAC1E,CACA,MAAO,IAAM,CACT7E,EAAS,QAASC,GAAMA,EAAC,CAAE,CAC/B,CACJ,CClBA,SAASwK,GAAiBC,EAAWpc,EAAMmZ,EAAIhV,EAAYC,EAAeyB,EAAQZ,EAAK,CACnF,MAAMyM,EAAW,CAAA,EACX2K,EAAQ,OAAO,oBAAoBD,CAAS,EAClD,UAAW5R,KAAQ6R,EACf,GAAI,EACA,gBACA,SACA,qBACA,qBACZ,EAAU,SAAS7R,CAAI,EAGf,GAAI,CACA,GAAI,OAAO4R,EAAU5R,CAAI,GAAM,WAC3B,SAEJ,MAAM+L,EAAiB/K,GAAM4Q,EAAW5R,EAAM,SAAUe,EAAU,CAC9D,OAAO,YAAaR,EAAM,CACtB,MAAMmK,EAAS3J,EAAS,MAAM,KAAMR,CAAI,EAExC,GADAuQ,GAAapG,EAAQjQ,EAAK,IAAI,EAC1B,CAAC6G,EAAU,KAAK,OAAQ3H,EAAYC,EAAe,EAAI,EAAG,CAC1D,MAAM2X,EAAaH,GAAc,CAAC,GAAG7Q,CAAI,EAAG9F,EAAK,IAAI,EAC/CqX,EAAW,CACb,KAAAtc,EACA,SAAUwK,EACV,KAAMuR,CAClC,EACwB5C,EAAG,KAAK,OAAQmD,CAAQ,CAC5B,CACA,OAAOpH,CACX,CACJ,CAAC,EACDxD,EAAS,KAAK6E,CAAc,CAChC,MACW,CACP,MAAMyF,EAAc7Q,GAAWiR,EAAW5R,EAAM,CAC5C,IAAIqI,EAAG,CACHsG,EAAG,KAAK,OAAQ,CACZ,KAAAnZ,EACA,SAAUwK,EACV,KAAM,CAACqI,CAAC,EACR,OAAQ,EAChC,CAAqB,CACL,CAChB,CAAa,EACDnB,EAAS,KAAKsK,CAAW,CAC7B,CAEJ,OAAOtK,CACX,CACA,SAAS6K,GAAgCpD,EAAIlU,EAAKd,EAAYC,EAAeyB,EAAQ,CACjF,MAAM6L,EAAW,CAAA,EACjB,OAAAA,EAAS,KAAK,GAAGyK,GAAiBlX,EAAI,sBAAsB,UAAW+H,GAAc,MAAOmM,EAAIhV,EAAYC,EAAeyB,EAAQZ,CAAG,CAAC,EACnI,OAAOA,EAAI,uBAA2B,KACtCyM,EAAS,KAAK,GAAGyK,GAAiBlX,EAAI,uBAAuB,UAAW+H,GAAc,OAAQmM,EAAIhV,EAAYC,EAAeyB,EAAQZ,CAAG,CAAC,EAEtI,IAAM,CACTyM,EAAS,QAASC,GAAMA,EAAC,CAAE,CAC/B,CACJ,CC/DA,IAAI6K,GAAc,KAElB,GAAI,CACA,IAAIC,GACA,OAAOC,GAAW,KAAe,OAAOA,GAAO,SAAY,YAAcA,GAAO,QAAQ,gBAAgB,GACxG,OAAO,yBAA4B,YAAc,wBAAwB,gBAAgB,GACzF,OAAO,SAAY,YAAc,QAAQ,gBAAgB,EAC7DF,GAAcC,GAAc,MAChC,MAAW,CAAC,CCNZ,SAASE,GAAa1B,EAAQ2B,EAAe,CACzC,OAAO,OAAO,KAAK3B,EAAQ,QAAQ,EAAE,SAAmC,MAAM,CAClF,CAEA,SAAS4B,GAA0B5B,EAAQ6B,EAAcC,EAAkB,CAGvE,IAAItR,EAASkR,GAAa1B,CAAqB,EAC3C+B,EAAQvR,EAAO,QAAQ;AAAA,EAAM,EAAE,EAAI,EACnCwR,EAAOxR,EAAO,UAAUuR,CAAK,EAAyD,GAC1F,OAAO,SAAuBpX,EAAS,CACnC,OAAO,IAAI4W,GAAYS,EAAM,OAAO,OAAO,GAAIrX,EAAS,CAAE,KAAM,EAAI,CAAE,CAAC,CAC3E,CACJ,CCfA,SAAS+W,GAAa1B,EAAQ2B,EAAe,CACzC,IAAIM,EAAe,KAAKjC,CAAM,EAQ9B,OAAOiC,CACX,CAEA,SAASC,GAAUlC,EAAQ6B,EAAcC,EAAkB,CAGvD,IAAItR,EAASkR,GAAa1B,CAAqB,EAC3C+B,EAAQvR,EAAO,QAAQ;AAAA,EAAM,EAAE,EAAI,EACnCwR,EAAOxR,EAAO,UAAUuR,CAAK,EAAyD,GACtFI,EAAO,IAAI,KAAK,CAACH,CAAI,EAAG,CAAE,KAAM,yBAA0B,EAC9D,OAAO,IAAI,gBAAgBG,CAAI,CACnC,CAEA,SAASP,GAA0B5B,EAAQ6B,EAAcC,EAAkB,CACvE,IAAItb,EACJ,OAAO,SAAuBmE,EAAS,CACnC,OAAAnE,EAAMA,GAAO0b,GAAUlC,CAAsC,EACtD,IAAI,OAAOxZ,EAAKmE,CAAO,CAClC,CACJ,CC5BA,IAAIyX,GAAY,OAAO,UAAU,SAAS,KAAK,OAAO,QAAY,IAAc,QAAU,CAAC,IAAM,mBAEjG,SAASC,IAAW,CAChB,OAAOD,EACX,CCAA,SAASR,GAA0B5B,EAAQ6B,EAAcC,EAAkB,CACvE,OAAIO,GAAQ,EACDC,GAA4BtC,CAAsC,EAEtEuC,GAA4BvC,CAAsC,CAC7E,CCPA,IAAIwC,GAAgBZ,GAA0B,kyNAA+yN,ECM71N,MAAMa,EAAc,CAChB,YAAY9X,EAAS,CACjB,KAAK,uBAAyB,IAAI,IAClC,KAAK,UAAY,CAAE,SAAU,EAAG,SAAU,MAC1C,KAAK,OAAS,GACd,KAAK,OAAS,GACd,KAAK,gBAAkB,CAACyE,EAAQiS,IAAa,EACxB,KAAK,UAAU,UAC5B,KAAK,UAAU,WAAa,KAAK,UAAU,UAC/B,CAAC,KAAK,UAAU,YAC5B,KAAK,UAAU,SAAW,KAAK,UAAU,UACxC,KAAK,uBAAuB,IAAIjS,CAAM,GACvC,KAAK,uBAAuB,IAAIA,EAAQ,CAAA,CAAE,EAE9C,KAAK,uBAAuB,IAAIA,CAAM,EAAE,KAAKiS,CAAQ,CACzD,EACA,KAAM,CAAE,SAAAxL,EAAW,MAAO,IAAA7L,EAAK,WAAAd,EAAY,cAAAC,EAAe,aAAA+B,EAAc,eAAAF,CAAc,EAAML,EAC5F,KAAK,WAAaA,EAAQ,WAC1B,KAAK,OAASA,EAAQ,OAClBO,GAAgB2K,IAAa,OAC7B,KAAK,2BAA2B7L,EAAKd,EAAYC,CAAa,EAC9D+B,GAAgB,OAAO2K,GAAa,UACpC,KAAK,sBAAsBA,EAAU7L,EAAKd,EAAYC,EAAe,CACjE,eAAA6B,CAChB,CAAa,CACT,CACA,OAAQ,CACJ,KAAK,uBAAuB,QAC5B,KAAK,gBAAkB,KAAK,gBAChC,CACA,QAAS,CACL,KAAK,OAAS,EAClB,CACA,UAAW,CACP,KAAK,OAAS,EAClB,CACA,MAAO,CACH,KAAK,OAAS,EAClB,CACA,QAAS,CACL,KAAK,OAAS,EAClB,CACA,sBAAsB0X,EAAK1Y,EAAKd,EAAYC,EAAewB,EAAS,CAChE,MAAMgY,EAAqB3B,GAA0BhX,EAAKd,EAAYC,CAAa,EAC7EyZ,EAAwB,IAAI,IAC5BC,EAAS,IAAIL,GACnBK,EAAO,UAAa7L,GAAM,CACtB,KAAM,CAAE,GAAA3S,CAAE,EAAK2S,EAAE,KAEjB,GADA4L,EAAsB,IAAIve,EAAI,EAAK,EAC/B,EAAE,WAAY2S,EAAE,MAChB,OACJ,KAAM,CAAE,OAAAgJ,EAAQ,KAAAjb,EAAM,MAAA+H,EAAO,OAAAC,CAAM,EAAKiK,EAAE,KAC1C,KAAK,WAAW,CACZ,GAAA3S,EACA,KAAM0N,GAAc,IAAI,EACxB,SAAU,CACN,CACI,SAAU,YACV,KAAM,CAAC,EAAG,EAAGjF,EAAOC,CAAM,CAClD,EACoB,CACI,SAAU,YACV,KAAM,CACF,CACI,QAAS,cACT,KAAM,CACF,CACI,QAAS,OACT,KAAM,CAAC,CAAE,QAAS,cAAe,OAAAiT,CAAM,CAAE,EACzC,KAAAjb,CACxC,CACA,CACA,EAC4B,EACA,CAC5B,CACA,CACA,CACA,CAAa,CACL,EACA,MAAM+d,EAAuB,IAAOJ,EACpC,IAAIK,EAAmB,EACnBC,EACJ,MAAMC,EAAY,IAAM,CACpB,MAAMC,EAAgB,CAAA,EACtB,OAAAlZ,EAAI,SAAS,iBAAiB,QAAQ,EAAE,QAAS3E,GAAW,CACnDwL,EAAUxL,EAAQ6D,EAAYC,EAAe,EAAI,GAClD+Z,EAAc,KAAK7d,CAAM,CAEjC,CAAC,EACM6d,CACX,EACMC,EAAuBC,GAAc,CACvC,GAAIL,GACAK,EAAYL,EAAmBD,EAAsB,CACrDE,EAAQ,sBAAsBG,CAAmB,EACjD,MACJ,CACAJ,EAAmBK,EACnBH,EAAS,EACJ,QAAS5d,GAAW4Z,GAAU,KAAM,OAAQ,OAAQ,WAAa,CAClE,IAAI7a,EACJ,MAAMC,EAAK,KAAK,OAAO,MAAMgB,CAAM,EACnC,GAAIud,EAAsB,IAAIve,CAAE,EAC5B,OAEJ,GADAue,EAAsB,IAAIve,EAAI,EAAI,EAC9B,CAAC,QAAS,QAAQ,EAAE,SAASgB,EAAO,SAAS,EAAG,CAChD,MAAM4K,EAAU5K,EAAO,WAAWA,EAAO,SAAS,IAC5CjB,EAAuD6L,GAAQ,qBAAoB,KAAQ,MAAQ7L,IAAO,OAAS,OAASA,EAAG,yBAA2B,IAC1G6L,GAAQ,MAAMA,EAAQ,gBAAgB,CAEhG,CACA,MAAMoT,EAAS,MAAM,kBAAkBhe,CAAM,EAC7Cwd,EAAO,YAAY,CACf,GAAAxe,EACA,OAAAgf,EACA,MAAOhe,EAAO,MACd,OAAQA,EAAO,OACf,eAAgBsF,EAAQ,cAC5C,EAAmB,CAAC0Y,CAAM,CAAC,CACf,CAAC,CAAC,EACFL,EAAQ,sBAAsBG,CAAmB,CACrD,EACAH,EAAQ,sBAAsBG,CAAmB,EACjD,KAAK,eAAiB,IAAM,CACxBR,IACA,qBAAqBK,CAAK,CAC9B,CACJ,CACA,2BAA2BhZ,EAAKd,EAAYC,EAAe,CACvD,KAAK,qBAAoB,EACzB,KAAK,kCAAiC,EACtC,MAAMwZ,EAAqB3B,GAA0BhX,EAAKd,EAAYC,CAAa,EAC7Ema,EAAgB1C,GAA6B,KAAK,gBAAgB,KAAK,IAAI,EAAG5W,EAAKd,EAAYC,CAAa,EAC5Goa,EAAwBjC,GAAgC,KAAK,gBAAgB,KAAK,IAAI,EAAGtX,EAAKd,EAAYC,EAAe,KAAK,MAAM,EAC1I,KAAK,eAAiB,IAAM,CACxBwZ,IACAW,IACAC,GACJ,CACJ,CACA,mCAAoC,CAChC,sBAAsB,IAAM,KAAK,4BAA2B,CAAE,CAClE,CACA,sBAAuB,CACnB,MAAMC,EAAyBJ,GAAc,CACzC,KAAK,UAAU,SAAWA,EAC1B,sBAAsBI,CAAqB,CAC/C,EACA,sBAAsBA,CAAqB,CAC/C,CACA,6BAA8B,CAC1B,KAAK,uBAAuB,QAAQ,CAACC,EAAQpe,IAAW,CACpD,MAAMhB,EAAK,KAAK,OAAO,MAAMgB,CAAM,EACnC,KAAK,8BAA8BA,EAAQhB,CAAE,CACjD,CAAC,EACD,sBAAsB,IAAM,KAAK,4BAA2B,CAAE,CAClE,CACA,8BAA8BgB,EAAQhB,EAAI,CACtC,GAAI,KAAK,QAAU,KAAK,OACpB,OAEJ,MAAMqf,EAAiB,KAAK,uBAAuB,IAAIre,CAAM,EAC7D,GAAI,CAACqe,GAAkBrf,IAAO,GAC1B,OACJ,MAAMof,EAASC,EAAe,IAAK1e,GAClB+Z,GAAO/Z,EAAO,CAAC,MAAM,CAAC,CAEtC,EACK,CAAE,KAAAD,CAAI,EAAK2e,EAAe,CAAC,EACjC,KAAK,WAAW,CAAE,GAAArf,EAAI,KAAAU,EAAM,SAAU0e,CAAM,CAAE,EAC9C,KAAK,uBAAuB,OAAOpe,CAAM,CAC7C,CACJ,CClLA,MAAMse,EAAkB,CACpB,YAAYhZ,EAAS,CACjB,KAAK,oBAAsB,IAAI,QAC/B,KAAK,YAAc,IAAI4G,GACvB,KAAK,WAAa5G,EAAQ,WAC1B,KAAK,oBAAsBA,EAAQ,mBACvC,CACA,kBAAkBiZ,EAAQvQ,EAAS,CAC3B,aAAcA,EAAQ,YACtB,KAAK,WAAW,CACZ,KAAM,CAAA,EACN,QAAS,CAAA,EACT,MAAO,CAAA,EACP,WAAY,CACR,CACI,GAAIA,EAAQ,GACZ,WAAYA,EACP,UAC7B,CACA,CACA,CAAa,EACL,KAAK,iBAAiBuQ,CAAM,CAChC,CACA,iBAAiBA,EAAQ,CACjB,KAAK,oBAAoB,IAAIA,CAAM,IAEvC,KAAK,oBAAoB,IAAIA,CAAM,EACnC,KAAK,6BAA6BA,CAAM,EAC5C,CACA,iBAAiB5J,EAAQH,EAAQ,CAC7B,GAAIG,EAAO,SAAW,EAClB,OACJ,MAAM6J,EAAwB,CAC1B,GAAIhK,EACJ,SAAU,CAAA,CACtB,EACciK,EAAS,CAAA,EACf,UAAWxd,KAAS0T,EAAQ,CACxB,IAAIf,EACJ,GAAK,KAAK,YAAY,IAAI3S,CAAK,EAc3B2S,EAAU,KAAK,YAAY,MAAM3S,CAAK,MAdR,CAC9B2S,EAAU,KAAK,YAAY,IAAI3S,CAAK,EACpC,MAAMxC,EAAQ,MAAM,KAAKwC,EAAM,OAAS,OAAO,EAC/Cwd,EAAO,KAAK,CACR,QAAA7K,EACA,MAAOnV,EAAM,IAAI,CAAC6Q,EAAGtC,KACV,CACH,KAAMtO,GAAiB4Q,CAAC,EACxB,MAAAtC,CAC5B,EACqB,CACrB,CAAiB,CACL,CAGAwR,EAAsB,SAAS,KAAK5K,CAAO,CAC/C,CACI6K,EAAO,OAAS,IAChBD,EAAsB,OAASC,GACnC,KAAK,oBAAoBD,CAAqB,CAClD,CACA,OAAQ,CACJ,KAAK,YAAY,QACjB,KAAK,oBAAsB,IAAI,OACnC,CACA,6BAA6BD,EAAQ,CACrC,CACJ,CC5DA,SAASG,EAAU,EAAG,CAClB,OAAO,OAAO,OAAO,OAAO,OAAO,CAAA,EAAI,CAAC,EAAG,CAAE,UAAW,KAAK,IAAG,CAAE,CAAE,CACxE,CACA,IAAIC,EACAC,GACAC,GACAC,GAAY,GAChB,MAAMvZ,EAASjG,GAAY,EAC3B,SAASyf,GAAOzZ,EAAU,GAAI,CAC1B,KAAM,CAAE,KAAA0Z,EAAM,iBAAAC,EAAkB,iBAAAC,EAAkB,WAAArb,EAAa,WAAY,cAAAC,EAAgB,KAAM,YAAA+O,EAAc,YAAa,cAAAxO,EAAgB,UAAW,iBAAAC,EAAmB,KAAM,iBAAAkB,EAAmB,GAAM,cAAAmE,EAAe,iBAAkBwV,EAAmB,eAAgBC,EAAiB,YAAAxf,EAAa,WAAA6F,EAAY,MAAAwR,EAAO,OAAAoI,EAAQ,SAAA7O,EAAW,CAAA,EAAI,eAAA7K,EAAiB,CAAA,EAAI,cAAA2Z,EAAe,aAAAzZ,EAAe,GAAO,yBAAA0Z,EAA2B,GAAO,qBAAAzM,EAAuB,GAAO,aAAA0M,EAAe,GAAO,aAAA5Z,EAAe,GAAO,QAAA6Z,EAAS,gBAAA3Z,EAAkB,IAAM,GAAO,oBAAAiP,EAAsB,IAAI,IAAI,EAAE,CAAC,EAAMzP,EACpkBoa,EAAkBH,EAClB,OAAO,SAAW,OAClB,GACN,IAAII,EAAoB,GACxB,GAAI,CAACD,EACD,GAAI,CACA,OAAO,OAAO,SACdC,EAAoB,EACxB,MACU,CACNA,EAAoB,EACxB,CAEJ,GAAID,GAAmB,CAACV,EACpB,MAAM,IAAI,MAAM,2BAA2B,EAE3CM,IAAkB,QAAa9O,EAAS,YAAc,SACtDA,EAAS,UAAY8O,GAEzB/Z,EAAO,MAAK,EACZ,MAAM/F,EAAmBmK,IAAkB,GACrC,CACE,MAAO,GACP,KAAM,GACN,iBAAkB,GAClB,MAAO,GACP,MAAO,GACP,OAAQ,GACR,MAAO,GACP,OAAQ,GACR,IAAK,GACL,KAAM,GACN,KAAM,GACN,IAAK,GACL,KAAM,GACN,SAAU,GACV,OAAQ,GACR,SAAU,EACtB,EACUwV,IAAsB,OAClBA,EACA,CAAE,SAAU,IAChBpX,EAAiBqX,IAAoB,IAAQA,IAAoB,MACjE,CACE,OAAQ,GACR,QAAS,GACT,YAAa,GACb,eAAgB,GAChB,eAAgB,GAChB,eAAgB,GAChB,kBAAmB,GACnB,qBAAsB,GACtB,mBAAoBA,IAAoB,MACxC,qBAAsBA,IAAoB,KACtD,EACUA,GAEI,GACVtT,KACA,IAAI8T,EACAC,GAA2B,EAC/B,MAAMC,GAAkBnO,GAAM,CAC1B,UAAWuG,KAAUuH,GAAW,GACxBvH,EAAO,iBACPvG,EAAIuG,EAAO,eAAevG,CAAC,GAGnC,OAAI0N,IACA1N,EAAI0N,EAAO1N,CAAC,GAETA,CACX,EACAgN,EAAc,CAAChN,EAAGoO,IAAe,CAC7B,IAAIhhB,EAOJ,GANM,GAAAA,EAAK0Q,GAAgB,CAAC,KAAO,MAAQ1Q,IAAO,SAAkBA,EAAG,SAAQ,GAC3E4S,EAAE,OAASvF,EAAU,cACrB,EAAEuF,EAAE,OAASvF,EAAU,qBACnBuF,EAAE,KAAK,SAAWrF,EAAkB,WACxCmD,GAAgB,QAASuQ,GAAQA,EAAI,SAAQ,CAAE,EAE/CN,EAC4CV,IAAKc,GAAenO,CAAC,EAAGoO,CAAU,UAEzEJ,EAAmB,CACxB,MAAM7G,EAAU,CACZ,KAAM,QACN,MAAOgH,GAAenO,CAAC,EACvB,WAAAoO,CAChB,EACY,OAAO,OAAO,YAAYjH,EAAS,GAAG,CAC1C,CACA,GAAInH,EAAE,OAASvF,EAAU,aACrBwT,EAAwBjO,EACxBkO,GAA2B,UAEtBlO,EAAE,OAASvF,EAAU,oBAAqB,CAC/C,GAAIuF,EAAE,KAAK,SAAWrF,EAAkB,UACpCqF,EAAE,KAAK,eACP,OAEJkO,KACA,MAAMI,EAAcf,GAAoBW,IAA4BX,EAC9DgB,EAAajB,GACftN,EAAE,UAAYiO,EAAsB,UAAYX,GAChDgB,GAAeC,IACftB,GAAiB,EAAI,CAE7B,CACJ,EACA,MAAMuB,EAAuB3R,GAAM,CAC/BmQ,EAAYD,EAAU,CAClB,KAAMtS,EAAU,oBAChB,KAAM,OAAO,OAAO,CAAE,OAAQE,EAAkB,QAAQ,EAAIkC,CAAC,CACzE,CAAS,CAAC,CACN,EACM4R,EAAqBrP,GAAM4N,EAAYD,EAAU,CACnD,KAAMtS,EAAU,oBAChB,KAAM,OAAO,OAAO,CAAE,OAAQE,EAAkB,MAAM,EAAIyE,CAAC,CACnE,CAAK,CAAC,EACIsP,GAA6BtP,GAAM4N,EAAYD,EAAU,CAC3D,KAAMtS,EAAU,oBAChB,KAAM,OAAO,OAAO,CAAE,OAAQE,EAAkB,cAAc,EAAIyE,CAAC,CAC3E,CAAK,CAAC,EACIuP,EAAgChd,GAAMqb,EAAYD,EAAU,CAC9D,KAAMtS,EAAU,oBAChB,KAAM,OAAO,OAAO,CAAE,OAAQE,EAAkB,iBAAiB,EAAIhJ,CAAC,CAC9E,CAAK,CAAC,EACIyQ,EAAoB,IAAIuK,GAAkB,CAC5C,WAAY6B,EACZ,oBAAqBG,CAC7B,CAAK,EACKC,GAAgB,IAAI3H,GAAc,CACpC,OAAArT,EACA,WAAY4a,EACZ,kBAAmBpM,EACnB,yBAAAwL,EACA,YAAAZ,CACR,CAAK,EACD,UAAWzG,KAAUuH,GAAW,GACxBvH,EAAO,WACPA,EAAO,UAAU,CACb,WAAY3S,EACZ,wBAAyBgb,GAAc,wBACvC,6BAA8BA,GAAc,4BAC5D,CAAa,EAET1B,GAAgB,IAAIzB,GAAc,CAC9B,aAAAvX,EACA,WAAYwa,GACZ,IAAK,OACL,WAAAxc,EACA,cAAAC,EACA,OAAAyB,EACA,SAAUiL,EAAS,OACnB,eAAA7K,CACR,CAAK,EACD,MAAM6a,GAAmB,IAAInH,GAAiB,CAC1C,WAAY8G,EACZ,SAAUC,EACV,cAAe,CACX,WAAAvc,EACA,cAAAC,EACA,cAAAO,EACA,iBAAAC,EACA,iBAAAkB,EACA,iBAAAhG,EACA,eAAAmG,EACA,WAAAF,EACA,YAAA7F,EACA,aAAAiG,EACA,aAAAD,EACA,SAAA4K,EACA,eAAAzI,EACA,cAAAwY,GACA,kBAAAxM,EACA,cAAA8K,GACA,gBAAA/Y,CACZ,EACQ,OAAAP,CACR,CAAK,EACDqZ,GAAmB,CAACmB,EAAa,KAAU,CACvC,IAAIhhB,EAAI2G,EAAIK,EAAIyB,EAAIU,EAAIC,EACxBwW,EAAYD,EAAU,CAClB,KAAMtS,EAAU,KAChB,KAAM,CACF,KAAM,OAAO,SAAS,KACtB,MAAOb,GAAc,EACrB,OAAQD,GAAe,CACvC,CACA,CAAS,EAAGyU,CAAU,EACdhM,EAAkB,MAAK,EACvBtE,GAAgB,QAASuQ,GAAQA,EAAI,KAAI,CAAE,EAC3C,MAAM7gB,GAAOuK,GAAS,SAAU,CAC5B,OAAAnE,EACA,WAAA1B,EACA,cAAAC,EACA,cAAAO,EACA,iBAAAC,EACA,iBAAAkB,EACA,cAAehG,EACf,WAAAiG,EACA,QAASsC,EACT,eAAApC,EACA,aAAAE,EACA,aAAAD,EACA,YAAc5H,GAAM,CACZ+N,GAAmB/N,EAAGuH,CAAM,GAC5Bgb,GAAc,UAAUviB,CAAC,EAEzBgO,GAAuBhO,EAAGuH,CAAM,GAChCwO,EAAkB,iBAAiB/V,CAAC,EAEpCiO,GAAcjO,CAAC,GACfwiB,GAAiB,cAAcxiB,EAAE,WAAY,QAAQ,CAE7D,EACA,aAAc,CAAC+P,EAAQC,KAAY,CAC/BuS,GAAc,aAAaxS,EAAQC,EAAO,EAC1CwS,GAAiB,oBAAoBzS,CAAM,CAC/C,EACA,iBAAkB,CAACwQ,EAAQvQ,KAAY,CACnC+F,EAAkB,kBAAkBwK,EAAQvQ,EAAO,CACvD,EACA,gBAAAlI,CACZ,CAAS,EACD,GAAI,CAAC3G,GACD,OAAO,QAAQ,KAAK,iCAAiC,EAEzDwf,EAAYD,EAAU,CAClB,KAAMtS,EAAU,aAChB,KAAM,CACF,KAAAjN,GACA,cAAe,CACX,KAAM,OAAO,cAAgB,OACvB,OAAO,YAC8C,UAAS,gBAAgB,cAC1EuG,GAAM3G,EAAyD,UAAS,QAAU,MAAQA,IAAO,OAAS,OAASA,EAAG,iBAAmB,MAAQ2G,IAAO,OAAS,OAASA,EAAG,eAC7KK,EAAyD,UAAS,QAAU,MAAQA,IAAO,OAAS,OAASA,EAAG,aAClH,EACR,IAAK,OAAO,cAAgB,OACtB,OAAO,YAC8C,UAAS,gBAAgB,aAC1EmC,GAAMV,EAAyD,UAAS,QAAU,MAAQA,IAAO,OAAS,OAASA,EAAG,iBAAmB,MAAQU,IAAO,OAAS,OAASA,EAAG,cAC7KC,EAAyD,UAAS,QAAU,MAAQA,IAAO,OAAS,OAASA,EAAG,YAClH,CAC5B,CACA,CACA,CAAS,CAAC,EACFsH,GAAgB,QAASuQ,GAAQA,EAAI,OAAM,CAAE,EACzC,SAAS,oBAAsB,SAAS,mBAAmB,OAAS,GACpEjM,EAAkB,iBAAiB,SAAS,mBAAoBxO,EAAO,MAAM,QAAQ,CAAC,CAC9F,EACA,GAAI,CACA,MAAM6L,EAAW,CAAA,EACjBA,EAAS,KAAKvH,EAAG,mBAAoB,IAAM,CACvC8U,EAAYD,EAAU,CAClB,KAAMtS,EAAU,iBAChB,KAAM,CAAA,CACtB,CAAa,CAAC,CACN,CAAC,CAAC,EACF,MAAMqU,EAAW9d,GAAQ,CACrB,IAAI5D,EACJ,OAAOqY,GAAc,CACjB,WAAY+I,EACZ,YAAa,CAACxP,EAAWxF,IAAWwT,EAAYD,EAAU,CACtD,KAAMtS,EAAU,oBAChB,KAAM,CACF,OAAAjB,EACA,UAAAwF,CACxB,CACA,CAAiB,CAAC,EACF,mBAAqB5F,GAAM4T,EAAYD,EAAU,CAC7C,KAAMtS,EAAU,oBAChB,KAAM,OAAO,OAAO,CAAE,OAAQE,EAAkB,gBAAgB,EAAIvB,CAAC,CACzF,CAAiB,CAAC,EACF,SAAUqV,EACV,iBAAmBrV,GAAM4T,EAAYD,EAAU,CAC3C,KAAMtS,EAAU,oBAChB,KAAM,OAAO,OAAO,CAAE,OAAQE,EAAkB,cAAc,EAAIvB,CAAC,CACvF,CAAiB,CAAC,EACF,QAAUwH,GAAMoM,EAAYD,EAAU,CAClC,KAAMtS,EAAU,oBAChB,KAAM,OAAO,OAAO,CAAE,OAAQE,EAAkB,KAAK,EAAIiG,CAAC,CAC9E,CAAiB,CAAC,EACF,mBAAqBxB,GAAM4N,EAAYD,EAAU,CAC7C,KAAMtS,EAAU,oBAChB,KAAM,OAAO,OAAO,CAAE,OAAQE,EAAkB,gBAAgB,EAAIyE,CAAC,CACzF,CAAiB,CAAC,EACF,iBAAmBzB,GAAMqP,EAAYD,EAAU,CAC3C,KAAMtS,EAAU,oBAChB,KAAM,OAAO,OAAO,CAAE,OAAQE,EAAkB,cAAc,EAAIgD,CAAC,CACvF,CAAiB,CAAC,EACF,mBAAqBA,GAAMqP,EAAYD,EAAU,CAC7C,KAAMtS,EAAU,oBAChB,KAAM,OAAO,OAAO,CAAE,OAAQE,EAAkB,gBAAgB,EAAIgD,CAAC,CACzF,CAAiB,CAAC,EACF,iBAAkB+Q,GAClB,OAAStP,GAAM4N,EAAYD,EAAU,CACjC,KAAMtS,EAAU,oBAChB,KAAM,OAAO,OAAO,CAAE,OAAQE,EAAkB,IAAI,EAAIyE,CAAC,CAC7E,CAAiB,CAAC,EACF,YAAcA,GAAM,CAChB4N,EAAYD,EAAU,CAClB,KAAMtS,EAAU,oBAChB,KAAM,OAAO,OAAO,CAAE,OAAQE,EAAkB,SAAS,EAAIyE,CAAC,CACtF,CAAqB,CAAC,CACN,EACA,WAAAlN,EACA,YAAAgP,EACA,cAAAxO,EACA,iBAAAC,EACA,iBAAA9E,EACA,iBAAAgG,EACA,SAAAgL,EACA,aAAA3K,EACA,aAAAD,EACA,qBAAAkN,EACA,aAAA0M,EACA,IAAA7c,EACA,YAAA/C,EACA,WAAA6F,EACA,gBAAAK,EACA,cAAAhC,EACA,eAAAiE,EACA,eAAApC,EACA,OAAAJ,EACA,cAAAgb,GACA,kBAAAxM,EACA,iBAAAyM,GACA,cAAA3B,GACA,oBAAA9J,EACA,UAAWhW,EAAuD0gB,GAAQ,OAAQ1O,GAAMA,EAAE,QAAQ,KAAO,MAAQhS,IAAO,OAAS,OAASA,EAAG,IAAKgS,IAAO,CACrJ,SAAUA,EAAE,SACZ,QAASA,EAAE,QACX,SAAWzC,GAAYqQ,EAAYD,EAAU,CACzC,KAAMtS,EAAU,OAChB,KAAM,CACF,OAAQ2E,EAAE,KACV,QAAAzC,CAC5B,CACA,CAAqB,CAAC,CACtB,EAAkB,IAAM,CAAA,CACxB,EAAe2I,CAAK,CACZ,EACAsJ,GAAc,gBAAiB/b,GAAa,CACxC4M,EAAS,KAAKqP,EAAQjc,EAAS,eAAe,CAAC,CACnD,CAAC,EACD,MAAMkc,EAAO,IAAM,CACf9B,KACAxN,EAAS,KAAKqP,EAAQ,QAAQ,CAAC,EAC/B3B,GAAY,EAChB,EACA,OAAI,SAAS,aAAe,eACxB,SAAS,aAAe,WACxB4B,IAGAtP,EAAS,KAAKvH,EAAG,OAAQ,IAAM,CAC3B8U,EAAYD,EAAU,CAClB,KAAMtS,EAAU,KAChB,KAAM,CAAA,CAC1B,CAAiB,CAAC,EACFsU,GACJ,EAAG,MAAM,CAAC,EAEP,IAAM,CACTtP,EAAS,QAASC,GAAMA,EAAC,CAAE,EAC3ByN,GAAY,EAChB,CACJ,OACO6B,EAAO,CACV,QAAQ,KAAKA,CAAK,CACtB,CACJ,CACA5B,GAAO,eAAiB,CAAC6B,EAAKtS,IAAY,CACtC,GAAI,CAACwQ,GACD,MAAM,IAAI,MAAM,+CAA+C,EAEnEH,EAAYD,EAAU,CAClB,KAAMtS,EAAU,OAChB,KAAM,CACF,IAAAwU,EACA,QAAAtS,CACZ,CACA,CAAK,CAAC,CACN,EACAyQ,GAAO,WAAa,IAAM,CACtBtP,GAAgB,QAASuQ,GAAQA,EAAI,OAAM,CAAE,CACjD,EACAjB,GAAO,iBAAoBgB,GAAe,CACtC,GAAI,CAACjB,GACD,MAAM,IAAI,MAAM,iDAAiD,EAErEF,GAAiBmB,CAAU,CAC/B,EACAhB,GAAO,OAASxZ,EC5ZhB,SAASsb,GAASC,EAAK,CACrB,GAAI,CACF,MAAM3f,EAAM,IAAI,IAAI2f,CAAG,EACjB1e,EAAQjB,EAAI,SAAS,MAAM,GAAG,EAAE,OAAO,OAAO,EACpD,IAAI4f,EACAC,EACJ,MAAMC,EAAgB7e,EAAM,QAAQ,UAAU,EAC9C,GAAI6e,IAAkB,GACpBF,EAAQ3e,EAAM6e,EAAgB,CAAC,EAC/BD,EAAW,IAAM5e,EAAM,MAAM,EAAG6e,CAAa,EAAE,KAAK,GAAG,MAClD,CACL,GAAI7e,EAAM,OAAS,EAAG,OAAO,KAC7B2e,EAAQ3e,EAAMA,EAAM,OAAS,CAAC,EAC9B4e,EAAW,IAAM5e,EAAM,MAAM,EAAGA,EAAM,OAAS,CAAC,EAAE,KAAK,GAAG,CAC5D,CACA,OAAK2e,EACE,CAAE,MAAAA,EAAO,OAAQ5f,EAAI,OAAQ,SAAA6f,CAAQ,EADzB,IAErB,MAAQ,CACN,OAAO,IACT,CACF,CACA,SAASE,IAAQ,CACf,OAAO,KAAK,IAAG,CACjB,CACA,IAAIC,GAAS,KAAM,CACjB,YAAYC,EAAWN,EAAKxb,EAAS,CACnC,KAAK,UAAY8b,EACjB,KAAK,IAAMN,EACX,KAAK,cAAgB,KAAK,IAAI,EAAGxb,GAAS,eAAiB,IAAI,EAC/D,KAAK,aAAe,KAAK,IAAI,EAAGA,GAAS,cAAgB,GAAG,EAC5D,MAAM+b,EAAY,KAAK,cAAgB,KAAK,aAAe,IAC3D,KAAK,SAAW,KAAK,IAAIA,EAAW/b,GAAS,UAAY,GAAG,EAC5D,KAAK,UAAY,KAAK,IAAI,IAAKA,GAAS,WAAa,GAAG,CAC1D,CACA,QAAU,GACV,OAAS,CAAA,EACT,SACA,UACA,cACA,aACA,cAAgB,KAChB,cAAgB,KAChB,MAAO,CACA,KAAK,UAAS,CACrB,CACA,MAAM,WAAY,CAChB,MAAMgc,EAAST,GAAS,KAAK,GAAG,EAChC,GAAI,CAACS,EAAQ,OACb,MAAMC,EAAY,IAAI,IAAI,GAAGD,EAAO,MAAM,GAAGA,EAAO,QAAQ,aAAa,EACzEC,EAAU,aAAa,IAAI,QAASD,EAAO,KAAK,EAChD,IAAIE,EAAgB,GACpB,GAAI,CACF,MAAMC,EAAM,MAAM,MAAMF,EAAU,SAAQ,EAAI,CAAE,OAAQ,MAAO,EAC3DE,EAAI,KAEND,EAAgB,GADH,MAAMC,EAAI,KAAI,IACG,MAAM,cAExC,MAAQ,CACND,EAAgB,EAClB,CACKA,IACL,KAAK,QAAU,GACf,KAAK,eAAeF,CAAM,EAC1B,KAAK,eAAc,EACnB,OAAO,iBACL,WACA,IAAM,CACC,KAAK,aAAY,CACxB,EACA,CAAE,QAAS,EAAI,CACrB,EACE,CACA,eAAeA,EAAQ,CACrB,MAAMI,EAAe,KAAK,UAAU,KAAK,KAAK,KAAK,SAAS,EACtDC,EAAkB,IAAI,IAAI,GAAGL,EAAO,MAAM,GAAGA,EAAO,QAAQ,WAAWA,EAAO,KAAK,EAAE,EAAE,SAAQ,EACrG,KAAK,UAAU,KAAQM,GAAS,CAC9B,GAAI,CAAC,KAAK,QAAS,OAAOF,EAAaE,CAAI,EAC3C,GAAIA,EAAK,aAAe,QAAS,CAC/B,GAAI,KAAK,cACP,OAAOF,EAAa,CAAE,GAAGE,EAAM,SAAU,KAAK,cAAc,SAAU,EAExE,GAAI,CAAC,KAAK,cAAe,CACvB,MAAMC,EAAW,UAAU,KAAK,MAAM,SAAS,EAAE,CAAC,IAAI,KAAK,OAAM,EAAG,SAAS,EAAE,EAAE,MAAM,EAAG,CAAC,CAAC,GACtFC,EAAYZ,GAAK,EACjBa,EAAgB,KAAK,IAAI,EAAGD,EAAY,KAAK,aAAa,EAC1DE,EAAcF,EAAY,KAAK,aAC/BG,EAAU,OAAO,WAAW,IAAM,CACjC,KAAK,aAAY,CACxB,EAAG,KAAK,YAAY,EACpB,YAAK,cAAgB,CAAE,SAAAJ,EAAU,UAAAC,EAAW,cAAAC,EAAe,YAAAC,EAAa,QAAAC,EAAS,gBAAAN,CAAe,EACzFD,EAAa,CAAE,GAAGE,EAAM,SAAAC,CAAQ,CAAE,CAC3C,CACF,CACA,OAAOH,EAAaE,CAAI,CAC1B,CACF,CACA,gBAAiB,CACV,KAAK,UACN,KAAK,gBACT,KAAK,cAAgB7C,GAAO,CAC1B,KAAOlT,GAAU,KAAK,KAAKA,CAAK,EAChC,iBAAkB,IAElB,cAAe,GACf,cAAe,qBAEf,aAAc,GACd,aAAc,GACd,aAAc,GACd,cAAe,EACrB,CAAK,GAAK,MACR,CACA,KAAKA,EAAO,CACV,MAAMqW,EAASrW,EAAM,UAAY,KAAK,SAEtC,IADA,KAAK,OAAO,KAAKA,CAAK,EACf,KAAK,OAAO,OAAS,KAAK,WAAW,KAAK,OAAO,MAAK,EAC7D,KAAO,KAAK,OAAO,SAAW,KAAK,OAAO,CAAC,GAAG,WAAa,GAAKqW,GAAQ,KAAK,OAAO,MAAK,CAC3F,CACA,cAAcC,EAAiB,CAC7B,QAASrb,EAAI,KAAK,OAAO,OAAS,EAAGA,GAAK,EAAGA,GAAK,EAAG,CACnD,MAAM6K,EAAI,KAAK,OAAO7K,CAAC,EACvB,GAAK6K,GACDA,EAAE,OAASvF,EAAU,MAAQuF,EAAE,WAAawQ,EAAiB,OAAOxQ,CAC1E,CACA,QAAS7K,EAAI,KAAK,OAAO,OAAS,EAAGA,GAAK,EAAGA,GAAK,EAAG,CACnD,MAAM6K,EAAI,KAAK,OAAO7K,CAAC,EACvB,GAAK6K,GACDA,EAAE,OAASvF,EAAU,KAAM,OAAOuF,CACxC,CACA,OAAO,IACT,CACA,cAAcyQ,EAAQC,EAAe,CAEnC,GADID,EAAO,SAAW,GAClBA,EAAO,CAAC,GAAG,OAAShW,EAAU,KAAM,OAAOgW,EAC/C,MAAMhjB,EAAO,KAAK,cAAcijB,CAAa,EAC7C,GAAI,CAACjjB,EAAM,OAAOgjB,EAClB,MAAME,EAAoB,KAAK,IAAIljB,EAAK,UAAWijB,EAAgB,CAAC,EAEpE,MAAO,CADWC,IAAsBljB,EAAK,UAAYA,EAAO,CAAE,GAAGA,EAAM,UAAWkjB,CAAiB,EACpF,GAAGF,CAAM,CAC9B,CACA,WAAWL,EAAeC,EAAa,CACrC,MAAMO,GAAqB,IAAM,CAC/B,QAASzb,EAAI,KAAK,OAAO,OAAS,EAAGA,GAAK,EAAGA,GAAK,EAAG,CACnD,MAAM6K,EAAI,KAAK,OAAO7K,CAAC,EACvB,GAAK6K,GACDA,EAAE,OAASvF,EAAU,cAAgBuF,EAAE,WAAaoQ,EAAe,OAAOjb,CAChF,CACA,QAASA,EAAI,EAAGA,EAAI,KAAK,OAAO,OAAQA,GAAK,EAE3C,GADU,KAAK,OAAOA,CAAC,GAChB,OAASsF,EAAU,aAAc,OAAOtF,EAEjD,MAAO,EACT,GAAC,EACK0b,EAAc,KAAK,OAAOD,CAAiB,GAAG,WAAaR,EAC3DU,EAAO,KAAK,OAAO,OAAQ9Q,GAAMA,EAAE,WAAa6Q,GAAe7Q,EAAE,WAAaqQ,CAAW,EACzFU,EAAuBD,EAAK,UAAW9Q,GAAMA,EAAE,OAASvF,EAAU,YAAY,EACpF,GAAIsW,IAAyB,GAAI,CAC/B,MAAMC,EAAUF,EAAK,MAAM,CAAC,KAAK,SAAS,EACpCG,EAAcD,EAAQ,CAAC,GAAG,WAAaH,EACvCK,EAAc,KAAK,cAAcF,EAASC,CAAW,EAC3D,MAAO,CAAE,YAAaC,EAAY,CAAC,GAAG,WAAaD,EAAa,OAAQC,CAAW,CACrF,CACA,MAAMC,EAAOL,EAAKC,CAAoB,EAChCK,EAAON,EAAK,MAAMC,EAAuB,CAAC,EAC1CM,EAAUD,EAAK,OAAS,KAAK,UAAY,EAAIA,EAAK,MAAM,EAAE,KAAK,UAAY,EAAE,EAAIA,EACjFE,EAAS,CAACH,EAAM,GAAGE,CAAO,EAC1BE,EAAa,KAAK,cAAcD,EAAQH,EAAK,SAAS,EAC5D,MAAO,CAAE,YAAaI,EAAW,CAAC,GAAG,WAAaJ,EAAK,UAAW,OAAQI,CAAU,CACtF,CACA,MAAM,cAAe,CACnB,GAAI,CAAC,KAAK,cAAe,OACzB,MAAMC,EAAU,KAAK,cACrB,KAAK,cAAgB,KACjBA,EAAQ,SAAS,OAAO,aAAaA,EAAQ,OAAO,EACxD,KAAM,CAAE,YAAAP,EAAa,OAAAR,CAAM,EAAK,KAAK,WAAWe,EAAQ,cAAeA,EAAQ,WAAW,EACpFC,EAAY,KAAK,IAAIlC,GAAK,EAAIiC,EAAQ,WAAW,EACvD,GAAI,CACF,MAAM,MAAMA,EAAQ,gBAAiB,CACnC,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAkB,EAC7C,KAAM,KAAK,UAAU,CACnB,SAAUA,EAAQ,SAClB,UAAW,IAAI,KAAKP,CAAW,EAAE,YAAW,EAC5C,QAAS,IAAI,KAAKQ,CAAS,EAAE,YAAW,EACxC,QAAS,IAAI,KAAKD,EAAQ,SAAS,EAAE,YAAW,EAChD,IAAK,SAAS,KACd,KAAM,SAAS,SACf,UAAW,UAAU,UACrB,OAAAf,CACV,CAAS,CACT,CAAO,CACH,MAAQ,CACR,CACF,CACA,MAAO,CACD,KAAK,eAAe,SAAS,OAAO,aAAa,KAAK,cAAc,OAAO,EAC/E,KAAK,cAAgB,KACjB,KAAK,eAAe,KAAK,cAAa,EAC1C,KAAK,cAAgB,KACrB,KAAK,OAAS,CAAA,EACd,KAAK,QAAU,EACjB,CACF,EC3MIiB,GAAaxK,GAAO,CACtB,sBAAsB,IAAM,sBAAsB,IAAMA,EAAE,CAAE,CAAC,CAC/D,ECFIyK,GAAqB,GACrBC,GAAwB,IAAMD,GAC9BE,GAAoB3K,GAAO,CAC7B,iBACE,WACChN,GAAU,CACLA,EAAM,YACRyX,GAAqBzX,EAAM,UAC3BgN,EAAGhN,CAAK,EAEZ,EACA,EACJ,CACA,ECTI4X,GAAkB,GAClBC,GAAiB,IACZ,SAAS,kBAAoB,UAAY,CAAC,SAAS,aAAe,EAAI,IAE3EC,GAAsB9X,GAAU,CAC9B,SAAS,kBAAoB,UAAY4X,GAAkB,KAC7DA,GAAkB5X,EAAM,OAAS,mBAAqBA,EAAM,UAAY,EACxE+X,GAAqB,EAEzB,EACIC,GAAqB,IAAM,CAC7B,iBAAiB,mBAAoBF,GAAoB,EAAI,EAC7D,iBAAiB,qBAAsBA,GAAoB,EAAI,CACjE,EACIC,GAAwB,IAAM,CAChC,oBAAoB,mBAAoBD,GAAoB,EAAI,EAChE,oBAAoB,qBAAsBA,GAAoB,EAAI,CACpE,EACIG,GAAuB,KACrBL,GAAkB,IACpBA,GAAkBC,GAAc,EAChCG,GAAkB,EAClBL,GAAiB,IAAM,CACrB,WAAW,IAAM,CACfC,GAAkBC,GAAc,EAChCG,GAAkB,CACpB,EAAG,CAAC,CACN,CAAC,GAEI,CACL,IAAI,iBAAkB,CACpB,OAAOJ,EACT,CACJ,GCrCIM,GAAWlL,GAAO,CACpB,IAAImL,EAAS,GACb,MAAO,IAAM,CACNA,IACHnL,EAAE,EACFmL,EAAS,GAEb,CACF,ECRIC,GAAYpL,GAAO,CACrB,SAAS,iBAAiB,mBAAoB,IAAM,CAC9C,SAAS,kBAAoB,UAC/BA,EAAE,CAEN,CAAC,CACH,ECCIqL,GAAYrL,GAAO,CACrB,MAAMsL,EAAM,KAAK,qBAAuB,KAAK,WAC7C,IAAIC,EAAS,GACb,OAAAvL,EAAKkL,GAAQlL,CAAE,EACX,SAAS,kBAAoB,SAC/BA,EAAE,GAEFuL,EAASD,EAAItL,CAAE,EACfoL,GAASpL,CAAE,GAENuL,CACT,EClBI3D,GAAU,CAAC/gB,EAAM2kB,EAAUC,IAAS,CACtC,GAAI,CACF,GAAI,oBAAoB,oBAAoB,SAAS5kB,CAAI,EAAG,CAC1D,MAAM6kB,EAAK,IAAI,oBAAqBrJ,GAAS,CAC3C,QAAQ,UAAU,KAAK,IAAM,CAC3BmJ,EAASnJ,EAAK,YAAY,CAC5B,CAAC,CACH,CAAC,EACD,OAAAqJ,EAAG,QACD,OAAO,OACL,CACE,KAAA7kB,EACA,SAAU,EACtB,EACU4kB,GAAQ,CAAA,CAClB,CACA,EACaC,CACT,CACF,MAAY,CACZ,CAEF,ECtBIC,GAAiBH,GAAa,CAC5B,SAAS,aACX,iBAAiB,qBAAsB,IAAMA,EAAQ,EAAI,EAAI,EAE7DA,EAAQ,CAEZ,ECNII,GAAmB,IACd,MAAM,KAAK,IAAG,CAAE,IAAI,KAAK,MAAM,KAAK,OAAM,GAAM,KAAO,EAAE,EAAI,IAAI,GCDtEC,GAAqB,IAAM,CAC7B,MAAMC,EAAkB,KAAK,aAAe,YAAY,kBAAoB,YAAY,iBAAiB,YAAY,EAAE,CAAC,EACxH,GAAIA,GAAmBA,EAAgB,cAAgB,GAAKA,EAAgB,cAAgB,YAAY,MACtG,OAAOA,CAEX,ECDIC,GAAqB,IAAM,CAC7B,MAAMC,EAAWH,GAAkB,EACnC,OAAOG,GAAYA,EAAS,iBAAmB,CACjD,ECMIC,GAAa,CAACnhB,EAAMhE,IAAU,CAChC,MAAMklB,EAAWH,GAAkB,EACnC,IAAIK,EAAiB,WACrB,OAAIxB,GAAqB,GAAM,EAC7BwB,EAAiB,qBACRF,IACL,SAAS,cAAgBD,GAAkB,EAAK,EAClDG,EAAiB,YACR,SAAS,aAClBA,EAAiB,UACRF,EAAS,OAClBE,EAAiBF,EAAS,KAAK,QAAQ,KAAM,GAAG,IAI7C,CACL,KAAAlhB,EACA,MAAO,OAAOhE,EAAU,IAAc,GAAKA,EAC3C,OAAQ,OAER,MAAO,EACP,QAPc,CAAA,EAQd,GAAI8kB,GAAgB,EACpB,eAAAM,CACJ,CACA,ECtCIC,GAAY,CAACrlB,EAAOslB,IAClBtlB,EAAQslB,EAAW,CAAC,EACf,OAELtlB,EAAQslB,EAAW,CAAC,EACf,oBAEF,OAELC,GAAe,CAACb,EAAUc,EAAQF,EAAYG,IAAqB,CACrE,IAAIC,EACAC,EACJ,OAAQC,GAAgB,CAClBJ,EAAO,OAAS,IACdI,GAAeH,KACjBE,EAAQH,EAAO,OAASE,GAAa,IACjCC,GAASD,IAAc,UACzBA,EAAYF,EAAO,MACnBA,EAAO,MAAQG,EACfH,EAAO,OAASH,GAAUG,EAAO,MAAOF,CAAU,EAClDZ,EAASc,CAAM,GAIvB,CACF,ECSIK,GAAgB,CAAC,KAAM,GAAG,EAC1BC,GAAoB,CAAA,EACpBC,GAAQ,CAACC,EAAUrB,IAAS,CAC9BA,EAAOA,GAAQ,CAAA,EACfE,GAAc,IAAM,CAClB,MAAMoB,EAAoB9B,GAAoB,EAC9C,IAAIqB,EAASL,GAAW,KAAK,EACzBe,EACJ,MAAMC,EAAiBC,GAAY,CAC5BzB,EAAK,mBACRyB,EAAUA,EAAQ,MAAM,EAAE,GAE5BA,EAAQ,QAASC,GAAU,CACrBA,EAAM,UAAYJ,EAAkB,kBACtCT,EAAO,MAAQ,KAAK,IAAIa,EAAM,UAAYpB,GAAkB,EAAI,CAAC,EACjEO,EAAO,QAAU,CAACa,CAAK,EACvBH,EAAM,EAEV,CAAC,CACH,EACMtB,EAAK9D,GAAQ,2BAA4BqF,CAAa,EAC5D,GAAIvB,EAAI,CACNsB,EAASX,GAAaS,EAAUR,EAAQK,GAAelB,EAAK,gBAAgB,EAC5E,MAAM2B,EAAgBlC,GAAQ,IAAM,CAC7B0B,GAAkBN,EAAO,EAAE,IAC9BW,EAAcvB,EAAG,aAAa,EAC9BA,EAAG,WAAU,EACbkB,GAAkBN,EAAO,EAAE,EAAI,GAC/BU,EAAO,EAAI,EAEf,CAAC,EACD,CAAC,UAAW,OAAO,EAAE,QAASnmB,GAAS,CACrC,iBAAiBA,EAAM,IAAMwkB,GAAS+B,CAAa,EAAG,EAAI,CAC5D,CAAC,EACDhC,GAASgC,CAAa,EACtBzC,GAAkB3X,GAAU,CAC1BsZ,EAASL,GAAW,KAAK,EACzBe,EAASX,GAAaS,EAAUR,EAAQK,GAAelB,EAAK,gBAAgB,EAC5EjB,GAAU,IAAM,CACd8B,EAAO,MAAQ,YAAY,IAAG,EAAKtZ,EAAM,UACzC4Z,GAAkBN,EAAO,EAAE,EAAI,GAC/BU,EAAO,EAAI,CACb,CAAC,CACH,CAAC,CACH,CACF,CAAC,CACH,EC7DIK,GAAiB,CAAC,IAAK,IAAI,EAC3BC,GAAa9B,GAAa,CACxB,SAAS,aACXG,GAAc,IAAM2B,GAAU9B,CAAQ,CAAC,EAC9B,SAAS,aAAe,WACjC,iBAAiB,OAAQ,IAAM8B,GAAU9B,CAAQ,EAAG,EAAI,EAExD,WAAWA,EAAU,CAAC,CAE1B,EACI+B,GAAS,CAACT,EAAUrB,IAAS,CAC/BA,EAAOA,GAAQ,CAAA,EACf,IAAIa,EAASL,GAAW,MAAM,EAC1Be,EAASX,GAAaS,EAAUR,EAAQe,GAAgB5B,EAAK,gBAAgB,EACjF6B,GAAU,IAAM,CACd,MAAMxB,EAAkBD,GAAkB,EACtCC,IACFQ,EAAO,MAAQ,KAAK,IAAIR,EAAgB,cAAgBC,GAAkB,EAAI,CAAC,EAC/EO,EAAO,QAAU,CAACR,CAAe,EACjCkB,EAAO,EAAI,EACXrC,GAAiB,IAAM,CACrB2B,EAASL,GAAW,OAAQ,CAAC,EAC7Be,EAASX,GAAaS,EAAUR,EAAQe,GAAgB5B,EAAK,gBAAgB,EAC7EuB,EAAO,EAAI,CACb,CAAC,EAEL,CAAC,CACH,ECrBIQ,GAAgB,CAAC,KAAM,GAAG,EAC1BC,GAAQ,CAACX,EAAUrB,IAAS,CAC9BA,EAAOA,GAAQ,CAAA,EACfE,GAAc,IAAM,CAClB,MAAMoB,EAAoB9B,GAAoB,EAC9C,IAAIqB,EAASL,GAAW,KAAK,EACzBe,EAaJ,MAAMtB,EAAK9D,GAAQ,QAZIsF,GAAY,CACjCA,EAAQ,QAASC,GAAU,CACrBA,EAAM,OAAS,2BACjBzB,EAAG,WAAU,EACTyB,EAAM,UAAYJ,EAAkB,kBACtCT,EAAO,MAAQ,KAAK,IAAIa,EAAM,UAAYpB,GAAkB,EAAI,CAAC,EACjEO,EAAO,QAAQ,KAAKa,CAAK,EACzBH,EAAO,EAAI,GAGjB,CAAC,CACH,CACyC,EACrCtB,IACFsB,EAASX,GAAaS,EAAUR,EAAQkB,GAAe/B,EAAK,gBAAgB,EAC5Ed,GAAkB3X,GAAU,CAC1BsZ,EAASL,GAAW,KAAK,EACzBe,EAASX,GAAaS,EAAUR,EAAQkB,GAAe/B,EAAK,gBAAgB,EAC5EjB,GAAU,IAAM,CACd8B,EAAO,MAAQ,YAAY,IAAG,EAAKtZ,EAAM,UACzCga,EAAO,EAAI,CACb,CAAC,CACH,CAAC,EAEL,CAAC,CACH,EChCIU,GAAgB,CAAC,GAAK,GAAI,EAC1BC,GAAQ,CAACb,EAAUrB,IAAS,CAC9BA,EAAOA,GAAQ,CAAA,EACfgC,GACEvC,GAAQ,IAAM,CACZ,IAAIoB,EAASL,GAAW,MAAO,CAAC,EAC5Be,EACAY,EAAe,EACfC,EAAiB,CAAA,EACrB,MAAMZ,EAAiBC,GAAY,CACjCA,EAAQ,QAASC,GAAU,CACzB,GAAI,CAACA,EAAM,eAAgB,CACzB,MAAMW,EAAoBD,EAAe,CAAC,EACpCE,EAAmBF,EAAeA,EAAe,OAAS,CAAC,EAC7DD,GAAgBT,EAAM,WAAaY,GAAkB,WAAa,GAAK,KAAOZ,EAAM,WAAaW,GAAmB,WAAa,GAAK,KACxIF,GAAgBT,EAAM,MACtBU,EAAe,KAAKV,CAAK,IAEzBS,EAAeT,EAAM,MACrBU,EAAiB,CAACV,CAAK,EAE3B,CACF,CAAC,EACGS,EAAetB,EAAO,QACxBA,EAAO,MAAQsB,EACftB,EAAO,QAAUuB,EACjBb,EAAM,EAEV,EACMtB,EAAK9D,GAAQ,eAAgBqF,CAAa,EAC5CvB,IACFsB,EAASX,GAAaS,EAAUR,EAAQoB,GAAejC,EAAK,gBAAgB,EAC5EL,GAAS,IAAM,CACb6B,EAAcvB,EAAG,aAAa,EAC9BsB,EAAO,EAAI,CACb,CAAC,EACDrC,GAAiB,IAAM,CACrBiD,EAAe,EACftB,EAASL,GAAW,MAAO,CAAC,EAC5Be,EAASX,GAAaS,EAAUR,EAAQoB,GAAejC,EAAK,gBAAgB,EAC5EjB,GAAU,IAAMwC,GAAQ,CAC1B,CAAC,EACD,WAAWA,EAAQ,CAAC,EAExB,CAAC,CACL,CACA,ECnEIgB,GAA2B,EAC3BC,GAAwB,IACxBC,GAAwB,EACxBC,GAAkBjB,GAAY,CAChCA,EAAQ,QAASpU,GAAM,CACjBA,EAAE,gBACJmV,GAAwB,KAAK,IAAIA,GAAuBnV,EAAE,aAAa,EACvEoV,GAAwB,KAAK,IAAIA,GAAuBpV,EAAE,aAAa,EACvEkV,GAA2BE,IAAyBA,GAAwBD,IAAyB,EAAI,EAAI,EAEjH,CAAC,CACH,EACIvC,GACA0C,GAAsB,IACjB1C,GAAKsC,GAA2B,YAAY,kBAAoB,EAErEK,GAA+B,IAAM,CACnC,qBAAsB,aAAe3C,KACzCA,GAAK9D,GAAQ,QAASuG,GAAgB,CACpC,KAAM,QACN,SAAU,GACV,kBAAmB,CACvB,CAAG,EACH,ECvBIG,GAAyB,CAAA,EACzBC,GAAwC,IAAI,IAC5CC,GAA6B,GAC7BC,GAAuB,EACvBC,GAAmC,IAC9BN,GAAmB,EAAKK,GAE7BE,GAAoB,IAAM,CAC5BF,GAAuBL,GAAmB,EAC1CE,GAAuB,OAAS,EAChCC,GAAsB,MAAK,CAC7B,EACIK,GAAgC,IAAM,CACxC,MAAMC,EAA4B,KAAK,IAAIP,GAAuB,OAAS,EAAG,KAAK,MAAMI,GAAgC,EAAK,EAAE,CAAC,EACjI,OAAOJ,GAAuBO,CAAyB,CACzD,EACIC,GAA+B,GAC/BC,GAA8B,CAAA,EAC9BC,GAA2B7B,GAAU,CAEvC,GADA4B,GAA4B,QAAS/O,GAAOA,EAAGmN,CAAK,CAAC,EACjD,EAAEA,EAAM,eAAiBA,EAAM,YAAc,eAAgB,OACjE,MAAM8B,EAAwBX,GAAuBA,GAAuB,OAAS,CAAC,EAChFY,EAAsBX,GAAsB,IAAIpB,EAAM,aAAa,EACzE,GAAI+B,GAAuBZ,GAAuB,OAASQ,IAAgC3B,EAAM,UAAY8B,GAAuB,SAAW,GAAI,CACjJ,GAAIC,EACE/B,EAAM,SAAW+B,EAAoB,SACvCA,EAAoB,QAAU,CAAC/B,CAAK,EACpC+B,EAAoB,QAAU/B,EAAM,UAC3BA,EAAM,WAAa+B,EAAoB,SAAW/B,EAAM,YAAc+B,EAAoB,QAAQ,CAAC,GAAG,WAC/GA,EAAoB,QAAQ,KAAK/B,CAAK,MAEnC,CACL,MAAMgC,EAAc,CAClB,GAAIhC,EAAM,cACV,QAASA,EAAM,SACf,QAAS,CAACA,CAAK,CACvB,EACMoB,GAAsB,IAAIY,EAAY,GAAIA,CAAW,EACrDb,GAAuB,KAAKa,CAAW,CACzC,CACAb,GAAuB,KAAK,CAAC7jB,EAAG2kB,IAAMA,EAAE,QAAU3kB,EAAE,OAAO,EACvD6jB,GAAuB,OAASQ,IAClCR,GAAuB,OAAOQ,EAA4B,EAAE,QAAS7gB,GAAMsgB,GAAsB,OAAOtgB,EAAE,EAAE,CAAC,CAEjH,CACF,EClBIohB,GAAgB,CAAC,IAAK,GAAG,EACzBC,GAAQ,CAACxC,EAAUrB,IAAS,CACxB,2BAA4B,MAAQ,kBAAmB,uBAAuB,YAGpFA,EAAOA,GAAQ,CAAA,EACfE,GAAc,IAAM,CAClB0C,GAA4B,EAC5B,IAAI/B,EAASL,GAAW,KAAK,EACzBe,EACJ,MAAMC,EAAiBC,GAAY,CACjC7B,GAAS,IAAM,CACb6B,EAAQ,QAAQ8B,EAAuB,EACvC,MAAMO,EAAMX,GAA6B,EACrCW,GAAOA,EAAI,UAAYjD,EAAO,QAChCA,EAAO,MAAQiD,EAAI,QACnBjD,EAAO,QAAUiD,EAAI,QACrBvC,EAAM,EAEV,CAAC,CACH,EACMtB,EAAK9D,GAAQ,QAASqF,EAAe,CAOzC,kBAAmBxB,EAAK,mBAAqB+C,EACnD,CAAK,EACDxB,EAASX,GAAaS,EAAUR,EAAQ+C,GAAe5D,EAAK,gBAAgB,EACxEC,IACFA,EAAG,QAAQ,CAAE,KAAM,cAAe,SAAU,GAAM,EAClDN,GAAS,IAAM,CACb6B,EAAcvB,EAAG,aAAa,EAC9BsB,EAAO,EAAI,CACb,CAAC,EACDrC,GAAiB,IAAM,CACrBgE,GAAiB,EACjBrC,EAASL,GAAW,KAAK,EACzBe,EAASX,GAAaS,EAAUR,EAAQ+C,GAAe5D,EAAK,gBAAgB,CAC9E,CAAC,EAEL,CAAC,EACH,EC3DI+D,GAAUhE,GAAa,CACzB,MAAMwB,EAAS,IAAM,CACnB,MAAMyC,EAAoB,YAAY,iBAAiB,YAAY,EACnE,GAAIA,EAAkB,OAAS,EAAG,CAChC,MAAMtC,EAAQsC,EAAkB,CAAC,EACjC,IAAIC,EAAWvC,EAAQA,EAAM,aAAeA,EAAM,UAAY,EAC1DuC,GAAY,IACdA,EAAW,YAAY,IAAG,GAE5BlE,EAAS,CAAE,KAAM,OAAQ,MAAOkE,CAAQ,CAAE,EAC1C,MACF,CACAlE,EAAS,CAAE,KAAM,OAAQ,MAAO,YAAY,IAAG,EAAI,CACrD,EACA,GAAI,SAAS,aAAe,WAAY,CACtCwB,EAAM,EACN,MACF,CACA,OAAO,iBAAiB,OAAQA,EAAQ,CAAE,KAAM,GAAM,CACxD,EACI2C,GAAU,KAAM,CAClB,YAAYpH,EAAW,CACrB,KAAK,UAAYA,CACnB,CACA,MAAO,CAEL,CAACoF,GAAOF,GAAO6B,GAAOzC,GAAOU,EAAM,EAAE,QAASqC,GAAa,CACzDA,EAAUtD,GAAW,CACnB,KAAK,UAAU,KAAK,CAClB,WAAY,cACZ,KAAM,WACN,KAAMA,EAAO,KACb,MAAOA,EAAO,MACd,KAAM,OAAO,SAAS,QAChC,CAAS,CACH,CAAC,CACH,CAAC,EACDkD,GAAQlD,GAAW,CACjB,KAAK,UAAU,KAAK,CAClB,WAAY,cACZ,KAAM,WACN,KAAMA,EAAO,KACb,MAAOA,EAAO,MACd,KAAM,OAAO,SAAS,QAC9B,CAAO,CACH,CAAC,CACH,CACF,EC1BA,SAASuD,IAAiB,CACxB,MAAO,CACL,UAAW,UAAU,UACrB,SAAU,UAAU,SACpB,SAAU,UAAU,SACpB,SAAU,SAAS,SACnB,KAAM,SAAS,QACnB,CACA,CC5CA,IAAIC,GAAmB,KAAM,CAC3B,YAAY7H,EAAKlW,EAAS,CACxB,KAAK,IAAMkW,EACX,KAAK,QAAUlW,CACjB,CACA,KAAKgX,EAAM,CACT,MAAMgH,EAAcF,GAAc,EAC5BG,EAAajH,GAAM,QAEnBtT,EAAU,CACd,GAAGsT,EACH,QAHc,OAAOiH,GAAe,SAAWA,EAAa,GAI5D,YAAAD,EACA,QAAS,KAAK,SAAS,QACvB,KAAM,KAAK,SAAS,IAC1B,EACI,MAAM,KAAK,IAAK,CACd,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAkB,EAC7C,KAAM,KAAK,UAAUta,CAAO,CAClC,CAAK,EAAE,MAAO5H,GAAQ,QAAQ,MAAM,sBAAuBA,CAAG,CAAC,CAC7D,CACF,ECvBIoiB,GAAS,KAAM,CACjB,UACA,YAAY1H,EAAW,CACrB,KAAK,UAAYA,CACnB,CACA,MAAO,CACL,MAAM2H,EAAWld,GAAU,CACzB,MAAM9B,EAAS8B,EAAM,OACrB,GAAI9B,GAAUA,IAAW,QAAUA,aAAkB,YAAa,CAChE,MAAMif,EAAiBjf,EACjB5I,EAAM6nB,EAAe,YAAcA,EAAe,KAAOA,EAAe,KAC9E,GAAI,CAAC7nB,EAAK,OACV,KAAK,UAAU,KAAK,CAClB,WAAY,QACZ,KAAM,WACN,QAAS,4BAA4BA,CAAG,GACxC,QAAS6nB,EAAe,SAAS,cAAW,GAAQ,GACpD,IAAA7nB,EACA,KAAM,OAAO,SAAS,QAChC,CAAS,EACD,MACF,CACA,MAAM8nB,EAAapd,EACnB,KAAK,UAAU,KAAK,CAClB,WAAY,QACZ,KAAMod,EAAW,OAAO,MAAQ,QAChC,MAAOA,EAAW,OAAO,MACzB,QAASA,EAAW,SAAW,gBAC/B,SAAUA,EAAW,SACrB,OAAQA,EAAW,OACnB,MAAOA,EAAW,MAClB,KAAM,OAAO,SAAS,QAC9B,CAAO,CACH,EACA,OAAO,iBAAiB,QAASF,EAAS,EAAI,EAC9C,OAAO,iBAAiB,qBAAuBld,GAAU,CACvD,MAAMqd,EAASrd,EAAM,OACf1J,EAAQ,OAAO+mB,GAAW,UAAYA,IAAW,KAAOA,EAAO,MAAQ,OACvEpQ,EAAU,OAAOoQ,GAAW,UAAYA,IAAW,KAAOA,EAAO,QAAU,OAAOA,GAAW,SAAWA,EAAS,8BACvH,KAAK,UAAU,KAAK,CAClB,WAAY,QACZ,KAAM,qBACN,MAAA/mB,EACA,QAAA2W,EACA,KAAM,OAAO,SAAS,QAC9B,CAAO,CACH,CAAC,CACH,CACF,EChDIqQ,GAAsC,CACxC,SAAU,GACV,oBAAqB,GACrB,KAAM,GACN,qBAAsB,GACtB,gBAAiB,IACjB,qBAAsB,IACtB,IAAK,GACL,gBAAiB,GACjB,kBAAmB,CACrB,EACIC,GAAqB,KAAM,CAC7B,YAAYhI,EAAW9b,EAAU,GAAI,CACnC,KAAK,UAAY8b,EACjB,KAAK,QAAU9b,CACjB,CACA,iBAAmB,KACnB,gBAAkB,KAClB,gBAAkB,KAClB,iBAAmB,EACnB,UAAY,EACZ,WAAa,EACb,WAAa,EACb,SAAW,KACX,cAAgB,EAChB,eAAiB,EACjB,uBAAyB,EACzB,MAAO,CACL,KAAK,aAAY,EACjB,KAAK,SAAQ,EACb,KAAK,QAAO,EACZ,SAAS,iBAAiB,mBAAoB,IAAM,CAC9C,SAAS,kBAAoB,SAC/B,KAAK,MAAK,EAEV,KAAK,OAAM,CAEf,CAAC,CACH,CACA,OAAQ,CACN,KAAK,SAAQ,EACb,KAAK,QAAO,CACd,CACA,QAAS,CACH,KAAK,QAAQ,OAAS,IAAO,KAAK,SAAQ,EAC1C,KAAK,QAAQ,MAAQ,IAAO,KAAK,QAAO,CAC9C,CACA,cAAe,CAEb,GADI,KAAK,QAAQ,WAAa,IAC1B,OAAO,oBAAwB,IAAa,OAChD,MAAM+jB,EAAY,oBAAoB,oBACtC,GAAIA,GAAa,CAACA,EAAU,SAAS,UAAU,EAAG,OAClD,MAAM5Y,EAAY,KAAK,QAAQ,qBAAuB0Y,GAAoC,oBACpF9Y,EAAW,IAAI,oBAAqB6K,GAAS,CACjD,UAAW8K,KAAS9K,EAAK,aACnB8K,EAAM,SAAWvV,GACrB,KAAK,UAAU,KAAK,CAClB,WAAY,cACZ,KAAM,WACN,SAAUuV,EAAM,SAChB,UAAWA,EAAM,UACjB,KAAMA,EAAM,KACZ,UAAWA,EAAM,UACjB,YAAaA,EAAM,YACnB,KAAM,OAAO,SAAS,SACtB,GAAI,KAAK,IAAG,CACtB,CAAS,CAEL,CAAC,EACD,KAAK,iBAAmB3V,EACxB,GAAI,CAEFA,EAAS,QAAQ,CACf,KAAM,WACN,SAAU,EAClB,CAAO,CACH,MAAQ,CACN,GAAI,CACFA,EAAS,QAAQ,CAAE,WAAY,CAAC,UAAU,CAAC,CAAE,CAC/C,MAAQ,CACR,CACF,CACF,CACA,UAAW,CAGT,GAFI,KAAK,QAAQ,OAAS,IACtB,SAAS,kBAAoB,UAC7B,KAAK,kBAAoB,KAAM,OACnC,MAAMiZ,EAAW,KAAK,QAAQ,sBAAwBH,GAAoC,qBACpF1Y,EAAY,KAAK,QAAQ,iBAAmB0Y,GAAoC,gBAChFI,EAAiB,KAAK,QAAQ,sBAAwBJ,GAAoC,qBAChG,KAAK,iBAAmB,YAAY,IAAG,EACvC,KAAK,gBAAkB,OAAO,YAAY,IAAM,CAC9C,MAAMze,EAAM,YAAY,IAAG,EACrB8e,EAAQ9e,EAAM,KAAK,iBAAmB4e,EAC5C,KAAK,iBAAmB5e,EACpB8e,GAAS/Y,IACX,KAAK,WAAa,EAClB,KAAK,YAAc+Y,EACnB,KAAK,WAAa,KAAK,IAAI,KAAK,WAAYA,CAAK,EAErD,EAAGF,CAAQ,EACX,KAAK,gBAAkB,OAAO,YAAY,IAAM,CAC1C,KAAK,WAAa,IACtB,KAAK,UAAU,KAAK,CAClB,WAAY,cACZ,KAAM,OACN,MAAO,KAAK,UACZ,OAAQ,KAAK,WAAa,KAAK,UAC/B,OAAQ,KAAK,WACb,UAAA7Y,EACA,eAAgB6Y,EAChB,eAAAC,EACA,KAAM,OAAO,SAAS,SACtB,GAAI,KAAK,IAAG,CACpB,CAAO,EACD,KAAK,UAAY,EACjB,KAAK,WAAa,EAClB,KAAK,WAAa,EACpB,EAAGA,CAAc,CACnB,CACA,UAAW,CACL,KAAK,kBAAoB,OAC3B,OAAO,cAAc,KAAK,eAAe,EACzC,KAAK,gBAAkB,MAErB,KAAK,kBAAoB,OAC3B,OAAO,cAAc,KAAK,eAAe,EACzC,KAAK,gBAAkB,MAEzB,KAAK,UAAY,EACjB,KAAK,WAAa,EAClB,KAAK,WAAa,CACpB,CACA,SAAU,CAGR,GAFI,KAAK,QAAQ,MAAQ,IACrB,SAAS,kBAAoB,UAC7B,KAAK,WAAa,KAAM,OAC5B,MAAME,EAAkB,KAAK,QAAQ,iBAAmBN,GAAoC,gBACtFO,EAAoB,KAAK,QAAQ,mBAAqBP,GAAoC,kBAChG,KAAK,cAAgB,EACrB,KAAK,eAAiB,YAAY,IAAG,EACrC,KAAK,uBAAyB,EAC9B,MAAMQ,EAAO,IAAM,CACjB,KAAK,eAAiB,EACtB,MAAMjf,EAAM,YAAY,IAAG,EACrBkf,EAAUlf,EAAM,KAAK,eAC3B,GAAIkf,GAAW,IAAK,CAClB,MAAMvM,EAAM,KAAK,cAAgB,IAAMuM,EACvC,KAAK,cAAgB,EACrB,KAAK,eAAiBlf,EAClB2S,EAAMoM,GACR,KAAK,wBAA0B,EAC3B,KAAK,yBAA2BC,GAClC,KAAK,UAAU,KAAK,CAClB,WAAY,cACZ,KAAM,SACN,IAAArM,EACA,UAAWoM,EACX,YAAa,KAAK,uBAClB,KAAM,OAAO,SAAS,SACtB,GAAI,KAAK,IAAG,CAC1B,CAAa,GAGH,KAAK,uBAAyB,CAElC,CACA,KAAK,SAAW,OAAO,sBAAsBE,CAAI,CACnD,EACA,KAAK,SAAW,OAAO,sBAAsBA,CAAI,CACnD,CACA,SAAU,CACJ,KAAK,WAAa,OACpB,OAAO,qBAAqB,KAAK,QAAQ,EACzC,KAAK,SAAW,MAElB,KAAK,cAAgB,EACrB,KAAK,uBAAyB,CAChC,CACF,ECnLIE,GAAiB,CACnB,CAAC,GAAK,EAAG,EACT,CAAC,GAAK,EAAG,EACT,CAAC,GAAK,EAAG,EACT,CAAC,GAAK,EAAG,EACT,CAAC,GAAK,EAAG,EACT,CAAC,GAAK,EAAG,EACT,CAAC,GAAK,EAAG,EACT,CAAC,GAAK,EAAG,EACT,CAAC,GAAK,EAAG,CACX,EACIC,GAA+B,CACjC,iBAAkB,CAAC,OAAQ,OAAQ,OAAQ,OAAO,EAClD,aAAc,IACd,UAAW,EACX,gBAAiB,IACjB,OAAQD,GACR,aAAc,GACd,gBAAiB,IACjB,WAAY,GACd,EACA,SAASE,GAAiBvmB,EAAI,CAC5B,MAAMod,EAAMpd,EAAG,QAAQ,YAAW,EAC5BxE,EAAKwE,EAAG,GAAK,IAAIA,EAAG,EAAE,GAAK,GAC3BQ,EAAYR,EAAG,UACfwmB,EAAU,OAAOhmB,GAAc,UAAYA,EAAU,OAAS,IAAIA,EAAU,KAAI,EAAG,MAAM,KAAK,EAAE,MAAM,EAAG,CAAC,EAAE,KAAK,GAAG,CAAC,GAAK,GAChI,MAAO,GAAG4c,CAAG,GAAG5hB,CAAE,GAAGgrB,CAAO,EAC9B,CACA,SAASC,GAAoBC,EAAW,CACtC,MAAMC,EAAM,CAAA,EACZ,UAAWC,KAAYF,EACrB,GAAI,CACF,MAAM1mB,EAAK,SAAS,cAAc4mB,CAAQ,EACtC5mB,GAAI2mB,EAAI,KAAK3mB,CAAE,CACrB,MAAQ,CACR,CAEF,OAAO2mB,CACT,CACA,IAAIE,GAAc,KAAM,CACtB,YAAYjJ,EAAW9b,EAAU,GAAI,CACnC,KAAK,UAAY8b,EACjB,KAAK,QAAU9b,CACjB,CACA,YAAc,GACd,WAAa,EACb,MAAQ,KACR,iBAAmB,KACnB,sBAAwB,KACxB,WAAa,EACb,UAAY,KACZ,SAAW,KACX,MAAO,CACL,MAAMglB,EAAY,IAAM,CACtB,MAAMC,EAAQ,KAAK,QAAQ,cAAgBT,GAA6B,aAExE,GADA,OAAO,WAAW,IAAM,KAAK,aAAa,MAAM,EAAGS,CAAK,EACpD,KAAK,QAAQ,aAAc,CAC7B,MAAMC,EAAW,KAAK,QAAQ,iBAAmBV,GAA6B,gBAC9E,KAAK,gBAAgB,OAAQU,CAAQ,EACrC,KAAK,iBAAgB,CACvB,CACF,EACI,SAAS,aAAe,WAC1BF,EAAS,EAET,OAAO,iBAAiB,OAAQA,EAAW,CAAE,KAAM,GAAM,CAE7D,CACA,QAAQpB,EAAS,SAAU,CACzB,GAAI,KAAK,QAAQ,aAAc,CAC7B,MAAMsB,EAAW,KAAK,QAAQ,iBAAmBV,GAA6B,gBAC9E,KAAK,gBAAgBZ,EAAQsB,CAAQ,CACvC,CACA,KAAK,eAAetB,CAAM,CAC5B,CACA,aAAaA,EAAQ,CACnB,KAAK,YAAW,EAChB,KAAK,WAAa,EAClB,MAAMI,EAAW,KAAK,QAAQ,iBAAmBQ,GAA6B,gBACxEW,EAAY,KAAK,QAAQ,WAAaX,GAA6B,UACnEY,EAAO,IAAM,CAGjB,GAFA,KAAK,YAAc,EACnB,KAAK,eAAexB,CAAM,EACtB,KAAK,aAAe,KAAK,YAAcuB,EAAW,CACpD,KAAK,YAAW,EAChB,MACF,CACA,KAAK,MAAQ,OAAO,WAAWC,EAAMpB,CAAQ,CAC/C,EACAoB,EAAI,CACN,CACA,aAAc,CACR,KAAK,QAAU,OACjB,OAAO,aAAa,KAAK,KAAK,EAC9B,KAAK,MAAQ,KAEjB,CACA,eAAexB,EAAQ,CACrB,GAAI,KAAK,YAAa,OACtB,MAAMtU,EAAS,KAAK,MAAK,EACpBA,EAAO,gBACZ,KAAK,YAAc,GACnB,KAAK,qBAAoB,EACzB,KAAK,UAAU,KAAK,CAClB,WAAY,QACZ,KAAM,cACN,OAAAsU,EACA,OAAAtU,EACA,KAAM,OAAO,SAAS,SACtB,GAAI,KAAK,IAAG,CAClB,CAAK,EACH,CACA,kBAAmB,CACjB,GAAI,KAAK,iBAAkB,OAC3B,MAAM+V,EAAc,KAAK,cAAa,EACtC,GAAI,CAACA,EAAa,OAClB,MAAMC,EAAa,KAAK,QAAQ,YAAcd,GAA6B,WAC3E,KAAK,iBAAmB,IAAI,iBAAiB,IAAM,CAC7C,CAAC,KAAK,kBAAoB,KAAK,cAC/B,KAAK,wBAA0B,MACjC,OAAO,aAAa,KAAK,qBAAqB,EAEhD,KAAK,sBAAwB,OAAO,WAAW,IAAM,CACnD,MAAMZ,EAAS,KAAK,UAAY,YAAY,KAAK,SAAS,GAAK,WAC/D,KAAK,eAAeA,CAAM,CAC5B,EAAG0B,CAAU,EACf,CAAC,EACD,KAAK,iBAAiB,QAAQD,EAAa,CACzC,UAAW,GACX,QAAS,GACT,WAAY,GACZ,cAAe,EACrB,CAAK,EACD,KAAK,qBAAoB,CAC3B,CACA,eAAgB,CACd,MAAMP,EAAW,KAAK,QAAQ,kBAC9B,GAAIA,EACF,GAAI,CACF,OAAO,SAAS,cAAcA,CAAQ,CACxC,MAAQ,CACN,OAAO,IACT,CAEF,OAAO,SAAS,eAClB,CACA,sBAAuB,CACrB,MAAMI,EAAW,KAAK,QAAQ,iBAAmBV,GAA6B,gBAC9E,OAAO,iBACL,QACA,IAAM,CACJ,KAAK,gBAAgB,QAASU,CAAQ,CACxC,EACA,EACN,EACI,OAAO,iBAAiB,WAAY,IAAM,KAAK,gBAAgB,WAAYA,CAAQ,CAAC,EACpF,OAAO,iBAAiB,aAAc,IAAM,KAAK,gBAAgB,aAAcA,CAAQ,CAAC,EACxF,MAAMK,EAAU,OAAO,QACjBC,EAAYD,EAAQ,UACpBE,EAAeF,EAAQ,aAC7B,GAAI,CAACC,EAAU,2BAA4B,CACzC,MAAME,EAAmB,IAAIvgB,IAAS,CACpC,MAAMwgB,EAAMH,EAAU,MAAMD,EAASpgB,CAAI,EACzC,cAAO,cAAc,IAAI,MAAM,mCAAmC,CAAC,EAC5DwgB,CACT,EACAD,EAAiB,2BAA6B,GAC9CH,EAAQ,UAAYG,CACtB,CACA,GAAI,CAACD,EAAa,2BAA4B,CAC5C,MAAMG,EAAsB,IAAIzgB,IAAS,CACvC,MAAMwgB,EAAMF,EAAa,MAAMF,EAASpgB,CAAI,EAC5C,cAAO,cAAc,IAAI,MAAM,mCAAmC,CAAC,EAC5DwgB,CACT,EACAC,EAAoB,2BAA6B,GACjDL,EAAQ,aAAeK,CACzB,CACA,OAAO,iBAAiB,oCAAqC,IAAM,KAAK,gBAAgB,UAAWV,CAAQ,CAAC,CAC9G,CACA,gBAAgBtB,EAAQiC,EAAY,CAClC,MAAMzgB,EAAM,KAAK,IAAG,EACpB,KAAK,WAAaA,EAAM,KAAK,IAAI,EAAGygB,CAAU,EAC9C,KAAK,UAAYjC,EACb,KAAK,WAAa,MAAM,OAAO,aAAa,KAAK,QAAQ,EAC7D,KAAK,SAAW,OAAO,WAAW,IAAM,CAClC,KAAK,OAAS,KAAK,aACrB,KAAK,UAAY,KAErB,EAAGiC,CAAU,CACf,CACA,gBAAiB,CACf,OAAO,KAAK,MAAQ,KAAK,UAC3B,CACA,sBAAuB,CACjB,KAAK,wBAA0B,OACjC,OAAO,aAAa,KAAK,qBAAqB,EAC9C,KAAK,sBAAwB,MAE3B,KAAK,WAAa,OACpB,OAAO,aAAa,KAAK,QAAQ,EACjC,KAAK,SAAW,MAElB,KAAK,kBAAkB,WAAU,EACjC,KAAK,iBAAmB,IAC1B,CACA,OAAQ,CACN,MAAMC,EAAS,KAAK,QAAQ,QAAUtB,GAA6B,OAC7DuB,EAAmB,KAAK,QAAQ,kBAAoBvB,GAA6B,iBACjFwB,EAAWrB,GAAoBoB,CAAgB,EAC/C5jB,EAAQ,OAAO,YAAc,SAAS,gBAAgB,aAAe,EACrEC,EAAS,OAAO,aAAe,SAAS,gBAAgB,cAAgB,EACxE6jB,EAAeH,EAAO,IAAI,CAAC,CAACI,EAAIC,CAAE,IAAM,CAC5C,MAAMtrB,EAAI,KAAK,IAAI,EAAG,KAAK,IAAIsH,EAAQ,EAAG,KAAK,MAAMA,EAAQ+jB,CAAE,CAAC,CAAC,EAC3DprB,EAAI,KAAK,IAAI,EAAG,KAAK,IAAIsH,EAAS,EAAG,KAAK,MAAMA,EAAS+jB,CAAE,CAAC,CAAC,EAC7DjoB,EAAK,SAAS,iBAAiBrD,EAAGC,CAAC,EACnCsrB,EAAY,CAACloB,GAAMA,IAAO,SAAS,iBAAmBA,IAAO,SAAS,MAAQ8nB,EAAS,KAAMK,GAAMA,IAAMnoB,CAAE,EACjH,MAAO,CACL,EAAArD,EACA,EAAAC,EACA,QAASoD,EAAKumB,GAAiBvmB,CAAE,EAAI,KACrC,UAAAkoB,CACR,CACI,CAAC,EAED,MAAO,CAAE,cADaH,EAAa,OAAS,GAAKA,EAAa,MAAOxa,GAAMA,EAAE,SAAS,EAC9D,OAAQwa,CAAY,CAC9C,CACF,ECnOIK,GAAe,IAAM,KACrBC,GAAa,KAAM,CACrB,YAAYvmB,EAAS,CACnB,KAAK,QAAUA,CACjB,CACA,UAAY,KACZ,KAAK8b,EAAW,CACd,KAAK,UAAYA,EACjBwK,GAAe,IAAMxK,EACrB,KAAK,QAAQ,cAAc,QAAS0K,GAAgB,CAClDA,EAAY,KAAK1K,CAAS,CAC5B,CAAC,CACH,CAOF,ECfA,SAAS2K,GAAiBC,EAAW,CACnCJ,GAAY,GAAI,KAAK,CAAE,WAAY,SAAU,KAAM,cAAe,UAAAI,EAAW,CAC/E,CACA,SAASC,GAAenT,EAAS,CAC/B8S,GAAY,GAAI,KAAK,CAAE,WAAY,SAAU,KAAM,gBAAiB,QAAA9S,EAAS,CAC/E,CACA,SAASoT,GAAaC,EAAW,CAC/BP,GAAY,GAAI,KAAK,CAAE,WAAY,SAAU,KAAM,cAAe,UAAAO,EAAW,CAC/E,CCQA,IAAIC,GAAc,KACdC,GAA2BnD,GAAW,CACxCkD,IAAa,QAAQlD,CAAM,CAC7B,EACIxI,GAAQpb,GAAY,CACtB,MAAMgnB,EAAa,IAAIT,GAAW,CAChC,IAAKvmB,EAAQ,IACb,aAAcA,GAAS,YAC3B,CAAG,EACK8b,EAAY,IAAIuH,GAAiBrjB,EAAQ,IAAK,CAClD,QAASA,EAAQ,QACjB,KAAMA,EAAQ,IAClB,CAAG,EAOD,GANAgnB,EAAW,KAAKlL,CAAS,EACzB,IAAI0H,GAAO1H,CAAS,EAAE,KAAI,EAC1B,IAAIoH,GAAQpH,CAAS,EAAE,KAAI,EAEzB,IAAID,GAAOC,EAAW9b,EAAQ,GAAG,EAAE,KAAI,EAErCA,EAAQ,cAAgB,GAAO,CACjC,MAAMinB,EAAc,OAAOjnB,EAAQ,aAAgB,SAAWA,EAAQ,YAAc,CAAA,EACpF,IAAI8jB,GAAmBhI,EAAW,CAAE,GAAG+H,GAAqC,GAAGoD,CAAW,CAAE,EAAE,KAAI,CACpG,CACA,GAAIjnB,EAAQ,cAAgB,GAAO,CACjC,MAAMknB,EAAqB,OAAOlnB,EAAQ,aAAgB,SAAWA,EAAQ,YAAc,CAAA,EAC3F8mB,GAAc,IAAI/B,GAAYjJ,EAAW,CAAE,GAAG0I,GAA8B,GAAG0C,EAAoB,EACnGJ,GAAY,KAAI,CAClB,CACA,OAAOE,CACT,EClDA,MAAAG,GAAe,YCAR,SAASC,GAAa5rB,EAA4B,CACrD,IAAI6rB,EAAU,EACd,MAAMC,EAAcnW,GAAkB,CAClCkW,EAAUlW,EACV3V,EAAQ,UAAY,YAAY6rB,CAAO,EAC3C,EACA7rB,EAAQ,iBAAiB,QAAS,IAAM8rB,EAAWD,EAAU,CAAC,CAAC,EAC/DC,EAAW,CAAC,CAChB,CCRA,MAAAC,GAAe,ymDCUTC,GAAW,wBACXC,GAAQ,UAEdrM,GAAK,CAID,IAAK,uDACL,QAAAoM,GACA,KAAAC,GACA,YAAa,CACT,aAAc,EAAA,EAElB,YAAa,CACT,gBAAiB,GACjB,kBAAmB,CAAA,CAG3B,CAAC,EAED,SAASC,IAAO,CACZ,MAAM,IAAI,MAAM,gDAAgD,CACpE,CAEA,SAASC,GAAgB9B,EAAoB,CACzC,MAAMzO,EAAQ,YAAY,IAAA,EAC1B,KAAO,YAAY,MAAQA,EAAQyO,GAAY,CAGnD,CAEA,IAAI+B,GAAgC,KACpC,SAASC,IAAkB,CACvB,GAAID,KAAmB,KAAM,CACzB,qBAAqBA,EAAc,EACnCA,GAAiB,KACjB,MACJ,CAEA,MAAMvD,EAAO,IAAM,CAEfsD,GAAgB,EAAE,EAClBC,GAAiB,sBAAsBvD,CAAI,CAC/C,EACAuD,GAAiB,sBAAsBvD,CAAI,CAC/C,CAEA,SAAS,cAA8B,MAAM,EAAG,UAAY;AAAA;AAAA;AAAA,kBAG1C8C,EAAQ;AAAA;AAAA;AAAA,kBAGRI,EAAc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAgChCH,GAAa,SAAS,cAAiC,UAAU,CAAE,EAEnE,SAAS,cAAiC,qBAAqB,EAAG,iBAAiB,QAAS,IAAM,CAC9FM,GAAA,CACJ,CAAC,EAED,SAAS,cAAiC,yBAAyB,EAAG,iBAAiB,QAAS,IAAM,CAChG,KAAqC,KAAA,CAC3C,CAAC,EAED,SAAS,cAAiC,8BAA8B,EAAG,iBAAiB,QAAS,IAAM,CACvG,IAAI,SAAS,4BAA4B,EAAA,CAC7C,CAAC,EAED,SAAS,cAAiC,yBAAyB,EAAG,iBAAiB,QAAS,IAAM,CAClG,QAAQ,OAAO,IAAI,MAAM,+CAA+C,CAAC,CAC7E,CAAC,EAED,SAAS,cAAiC,qBAAqB,EAAG,iBAAiB,QAAS,IAAM,CAC9F,MAAMI,EAAM,IAAI,MAChBA,EAAI,IAAM,yCACVA,EAAI,MAAM,MAAQ,OAClBA,EAAI,MAAM,OAAS,OACnBA,EAAI,MAAM,WAAa,OACvBA,EAAI,IAAM,iDAAiD,KAAK,IAAA,CAAK,GACrE,SAAS,cAA8B,MAAM,EAAG,YAAYA,CAAG,CACnE,CAAC,EAED,SAAS,cAAiC,0BAA0B,EAAG,iBAAiB,QAAS,IAAM,CACnG,GAAI,CACA,MAAM,IAAI,MAAM,gDAAgD,CACpE,OAASzM,EAAO,CACZoL,GAAiBpL,aAAiB,MAAQA,EAAQ,IAAI,MAAM,OAAOA,CAAK,CAAC,CAAC,CAC9E,CACJ,CAAC,EAED,SAAS,cAAiC,qBAAqB,EAAG,iBAAiB,QAAS,IAAM,CAC9FsL,GAAe,0CAA0C,CAC7D,CAAC,EAED,SAAS,cAAiC,mBAAmB,EAAG,iBAAiB,QAAS,IAAM,CAC5FC,GAAa,CACT,UAAW,eACX,KAAM,CACF,OAAQ,UACR,GAAI,KAAK,IAAA,EACT,KAAM,OAAO,SAAS,QAAA,CAC1B,CACH,CACL,CAAC,EAED,SAAS,cAAiC,mBAAmB,EAAG,iBAAiB,QAAS,IAAM,CAC5F,MAAMmB,EAAM,SAAS,cAA8B,MAAM,EACrDA,IACAA,EAAI,UAAY,GAChBA,EAAI,MAAM,UAAY,QACtBA,EAAI,MAAM,MAAQ,QAClBA,EAAI,MAAM,QAAU,KAExB,SAAS,gBAAgB,MAAM,gBAAkB,UACjD,SAAS,KAAK,MAAM,gBAAkB,UACtC,SAAS,KAAK,MAAM,MAAQ,UAE5BhB,GAAwB,gBAAgB,CAC5C,CAAC,EAED,SAAS,cAAiC,mBAAmB,EAAG,iBAAiB,QAAS,IAAM,CAC5F,QAAQ,UAAU,CAAA,EAAI,GAAI,eAAe,KAAK,IAAA,CAAK,EAAE,EAGrD,MAAMiB,EAAS,SAAS,cAAc,KAAK,EAC3CA,EAAO,MAAM,UAAY,OACzBA,EAAO,MAAM,SAAW,OACxBA,EAAO,MAAM,QAAU,MACvBA,EAAO,YAAc,qBAAqB,OAAO,SAAS,QAAQ,GAClE,SAAS,cAA8B,MAAM,EAAG,YAAYA,CAAM,CACtE,CAAC,EAED,SAAS,cAAiC,gCAAgC,EAAG,iBAAiB,QAAS,IAAM,CACzG,QAAQ,UAAU,CAAA,EAAI,GAAI,uBAAuB,KAAK,IAAA,CAAK,EAAE,EAG7D,MAAMD,EAAM,SAAS,cAA8B,MAAM,EACrDA,IACAA,EAAI,UAAY,GAChBA,EAAI,MAAM,UAAY,QACtBA,EAAI,MAAM,MAAQ,QAClBA,EAAI,MAAM,QAAU,KAExB,SAAS,gBAAgB,MAAM,gBAAkB,UACjD,SAAS,KAAK,MAAM,gBAAkB,UACtC,SAAS,KAAK,MAAM,MAAQ,SAChC,CAAC,EAED,SAAS,cAAiC,eAAe,EAAG,iBAAiB,QAAS,IAAM,CACxFJ,GAAgB,GAAG,CACvB,CAAC,EAED,SAAS,cAAiC,WAAW,EAAG,iBAAiB,QAAS,IAAM,CACpF,MAAMM,EAAY,KAAK,IAAA,EACjBnoB,EAAQ,OAAO,YAAY,IAAM,CACnC6nB,GAAgB,GAAG,EACf,KAAK,MAAQM,EAAY,KACzB,OAAO,cAAcnoB,CAAK,CAElC,EAAG,GAAG,CACV,CAAC,EAED,SAAS,cAAiC,UAAU,EAAG,iBAAiB,QAAS,IAAM,CACnF+nB,GAAA,CACJ,CAAC","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]}